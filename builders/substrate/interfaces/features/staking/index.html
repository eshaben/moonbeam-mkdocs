<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Learn about the Parachain Staking Pallet interface on Moonbeam, which can be used to perform delegator and collator activities and retrieve staking information."><link href=https://eshaben.github.io/moonbeam-mkdocs/builders/substrate/interfaces/features/staking/ rel=canonical><link href=../governance/referenda/ rel=prev><link href=../randomness/ rel=next><link rel=icon href=/assets/images/favicon.webp><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.24"><meta name=keywords content="staking, substrate, pallet, moonbeam, polkadot"><title>Parachain Staking Pallet | Moonbeam Docs</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.6543a935.min.css><link href=https://widget.kapa.ai/ rel=preconnect><style data-emotion=mantine data-s></style><script defer src=https://widget.kapa.ai/kapa-widget.bundle.js data-website-id=80af633e-fba6-486e-b3c8-b01fb6ca2a10 data-project-name=Moonbeam data-project-color="rgb(48, 47, 83)" data-project-logo=/images/moonbot.webp data-button-position-right=40px data-button-position-bottom=40px data-button-border-radius=4px data-modal-border-radius=4px data-search-show-more-button-text-color=#000 data-font-family="Banana Grotesk" data-footer-tos-privacy-links='[{"title": "terms of service", "url": "https://moonbeam.network/terms-of-use"}, {"title": "privacy policy", "url": "https://moonbeam.network/privacy-policy"}]'></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel=preconnect href=https://fonts.googleapis.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel=stylesheet><link rel=stylesheet href=/assets/stylesheets/moonbeam.min.css><link rel=stylesheet href=/assets/stylesheets/termynal.min.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-5ZBERCXWC3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#the-parachain-staking-pallet class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> <p>As of Runtime 3400, the minimum gas price has been reduced by 4x to 31.25 Gwei. Learn more about <a href=https://github.com/moonbeam-foundation/moonbeam/pull/3058>the new minimum gas price</a>.</p> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <div class=md-header__left-nav> <a href=https://eshaben.github.io/moonbeam-mkdocs/ title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src=/assets/images/logo.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> </div> <div class=md-header__buttons> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../ >Builders</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../get-started/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/get-started.webp alt="Get Started" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Get Started</span> <p class=dropdown-desc>Everything you need to get started building</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../ethereum/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/ethereum.webp alt="Ethereum Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum Toolkit</span> <p class=dropdown-desc>Ethereum libraries, tools, and contracts</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/substrate.webp alt="Substrate Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Substrate Toolkit</span> <p class=dropdown-desc>Substrate libraries, tools, and low-level interfaces</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../interoperability/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>GMP protocols for cross-chain development</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../integrations/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/integrations.webp alt=Integrate loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrate</span> <p class=dropdown-desc>Tools and protocols to integrate with</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../node-operators/ >Node Operators</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../node-operators/networks/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/networks.webp alt=Networks loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Networks</span> <p class=dropdown-desc>Run full, tracing, or collator nodes</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../node-operators/oracle-nodes/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/oracle-nodes.webp alt="Oracle Nodes" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Oracle Nodes</span> <p class=dropdown-desc>Run infrastructure for oracles services</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../node-operators/indexer-nodes/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/indexer-nodes.webp alt="Indexer Nodes" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Indexer Nodes</span> <p class=dropdown-desc>Run infrastructure for indexing and querying services</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../tokens/ >Tokens</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../tokens/connect/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/connect.webp alt="Connect to Moonbeam" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Connect to Moonbeam</span> <p class=dropdown-desc>Connect your wallet to Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tokens/manage/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/manage.webp alt="Account Management" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Account Management</span> <p class=dropdown-desc>Advanced account and identity services</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tokens/staking/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/staking.webp alt=Staking loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Staking</span> <p class=dropdown-desc>Stake tokens by delegating to collators</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tokens/governance/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/governance.webp alt=Governance loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Governance</span> <p class=dropdown-desc>Submit and vote on on-chain proposals</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../learn/ >Learn</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../learn/platform/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/platform.webp alt=Platform loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Platform</span> <p class=dropdown-desc>Dive into underlying technology and design aspects</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../learn/core-concepts/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/core-concepts.webp alt="Core Concepts" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Core Concepts</span> <p class=dropdown-desc>Learn about the fundamentals of Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../learn/features/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/features.webp alt=Features loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Features</span> <p class=dropdown-desc>Explore core features</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../learn/dapps-list/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/dapps-list.webp alt="DApps List" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>DApps List</span> <p class=dropdown-desc>Discover DApps deployed on Moonbeam</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../../../tutorials/ >Tutorials</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../../../tutorials/interoperability/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>Get hands-on building cross-chain DApps</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tutorials/eth-api/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/eth-api.webp alt="Ethereum API" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum API</span> <p class=dropdown-desc>Beginner to pro smart contract tutorials</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../../../tutorials/integrations/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/integrations.webp alt=Integrations loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrations</span> <p class=dropdown-desc>Dive deeper with tutorials on seamless integrations</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-select-wrapper select-wrapper"> <span class="language-select-label select-label">Eng</span> <ul class="language-select select"> <li class=en value=en><a href=#>Eng</a></li> <li class=cn value=cn><a href>中文</a></li> </ul> <span class="md-icon selector-closed active"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span> <span class="md-icon selector-open"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41Z"/></svg></span> </div> <a href=# class="md-header__button md-button connectMetaMask-nav md-typeset"> Connect Wallet </a> <a class="md-header__button md-button faucet md-typeset" href=https://faucet.moonbeam.network/ target=_blank> Faucet </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component=logo> <img src=/assets/images/logo.webp alt=logo> </a> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ >Builders</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../get-started/ >Get Started</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../get-started/quick-start/ class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../../get-started/create-account/ class=md-nav__link> Create an Account </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../get-started/networks/ >Networks</a> <label for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../get-started/networks/moonbeam-dev/ class=md-nav__link> Local Moonbeam Dev Node </a> </li> <li class=md-nav__item> <a href=../../../../get-started/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../../get-started/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../../get-started/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../get-started/endpoints/ class=md-nav__link> Network RPC Endpoints </a> </li> <li class=md-nav__item> <a href=../../../../get-started/explorers/ class=md-nav__link> Block Explorers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/ >Ethereum Toolkit</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/canonical-contracts/ class=md-nav__link> Canonical Contracts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/ >Precompiled Contracts</a> <label for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/account/ >Account Management</a> <label for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/ux/ >User Experience</a> <label for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/ux/batch/ class=md-nav__link> Batch </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/ux/call-permit/ class=md-nav__link> Call Permit </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/ux/erc20/ class=md-nav__link> Native Token ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/features/ >Network Features</a> <label for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/features/governance/ >Governance</a> <label for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/governance/collective/ class=md-nav__link> Collective </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/features/staking/ class=md-nav__link> Staking Functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/interoperability/ >Interoperability</a> <label for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/interoperability/gmp/ class=md-nav__link> GMP </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> X-Tokens </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> XCM Interface </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> XCM Transactor </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/precompiles/utility/ >Utility</a> <label for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/utility/eth-mainnet/ class=md-nav__link> Ethereum Native </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/utility/registry/ class=md-nav__link> Precompile Registry </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/utility/relay-data-verifier/ class=md-nav__link> Relay Data Verifier </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/precompiles/utility/non-specific/ class=md-nav__link> Non-Network Specific </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/libraries/ >Libraries</a> <label for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/libraries/ethersjs/ class=md-nav__link> Ethers.js </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/libraries/ethersrs/ class=md-nav__link> Ethers.rs </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/libraries/viem/ class=md-nav__link> viem </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/libraries/web3js/ class=md-nav__link> Web3.js </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/libraries/web3py/ class=md-nav__link> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/dev-env/ >Dev Environments</a> <label for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/dev-env/openzeppelin/ >OpenZeppelin</a> <label for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-openzeppelin-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/openzeppelin/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/openzeppelin/contracts/ class=md-nav__link> Contract Wizard </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/openzeppelin/defender/ class=md-nav__link> Defender </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/ape/ class=md-nav__link> Ape </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/brownie/ class=md-nav__link> Brownie </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/foundry/ class=md-nav__link> Foundry </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/hardhat/ class=md-nav__link> Hardhat </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/remix/ class=md-nav__link> Remix </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/scaffold-eth/ class=md-nav__link> Scaffold-ETH </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/tenderly/ class=md-nav__link> Tenderly </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/thirdweb/ class=md-nav__link> thirdweb </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/dev-env/waffle-mars/ class=md-nav__link> Waffle & Mars </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/verify-contracts/ >Verify Contracts</a> <label for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-verify-contracts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/verify-contracts/block-explorers/ class=md-nav__link> Block Explorers </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/verify-contracts/etherscan-plugins/ class=md-nav__link> Etherscan Plugins </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/verify-contracts/api-verification/ class=md-nav__link> API-based Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../../ethereum/json-rpc/ >JSON-RPC APIs</a> <label for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-json-rpc-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../ethereum/json-rpc/eth-rpc/ class=md-nav__link> Standard Ethereum </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/json-rpc/debug-trace/ class=md-nav__link> Non-standard Ethereum: Tracing </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/json-rpc/pubsub/ class=md-nav__link> Non-standard Ethereum: Pubsub </a> </li> <li class=md-nav__item> <a href=../../../../ethereum/json-rpc/moonbeam-custom-api/ class=md-nav__link> Custom Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../ >Substrate Toolkit</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=true> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../libraries/ >Libraries</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../libraries/polkadot-js-api/ class=md-nav__link> Polkadot.js API </a> </li> <li class=md-nav__item> <a href=../../../libraries/py-substrate-interface/ class=md-nav__link> Py Substrate Interface </a> </li> <li class=md-nav__item> <a href=../../../libraries/sidecar/ class=md-nav__link> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../dev-env/ >Dev Environments</a> <label for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../dev-env/chopsticks/ class=md-nav__link> Chopsticks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Low-Level Interfaces</a> <label for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_4_label aria-expanded=true> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../account/ >Account Management</a> <label for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../account/multisig/ class=md-nav__link> Multisig </a> </li> <li class=md-nav__item> <a href=../../account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Network Features</a> <label for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../governance/ >Governance</a> <label for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_4_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Parachain Staking <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href=./ class="md-nav__link md-nav__link--active"> Parachain Staking </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#exit-delays class=md-nav__link> <span class=md-ellipsis> Exit Delays </span> </a> </li> <li class=md-nav__item> <a href=#parachain-staking-pallet-interface class=md-nav__link> <span class=md-ellipsis> Parachain Staking Pallet Interface </span> </a> <nav class=md-nav aria-label="Parachain Staking Pallet Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extrinsics class=md-nav__link> <span class=md-ellipsis> Extrinsics </span> </a> </li> <li class=md-nav__item> <a href=#storage-methods class=md-nav__link> <span class=md-ellipsis> Storage Methods </span> </a> </li> <li class=md-nav__item> <a href=#constants class=md-nav__link> <span class=md-ellipsis> Pallet Constants </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../randomness/ class=md-nav__link> Randomness </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../interoperability/ >Interoperability</a> <label for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Polkadot XCM </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> XCM Transactor </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../utility/ >Utility</a> <label for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../utility/utility/ class=md-nav__link> Utility </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/ >Interoperability</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/ >XCM Interoperability</a> <label for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/core-concepts/ >Core Concepts</a> <label for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/core-concepts/instructions/ class=md-nav__link> XCM Instructions </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/core-concepts/multilocations/ class=md-nav__link> Multilocations </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/core-concepts/weights-fees/ class=md-nav__link> Weights and Fees </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/xc-registration/ >XC Registration</a> <label for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc-registration/forum-templates/ class=md-nav__link> Forum Templates </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc-registration/xc-integration/ class=md-nav__link> XC Channel Registration </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc-registration/assets/ class=md-nav__link> XC Asset Registration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/xc20/ >XC-20s</a> <label for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/interact/ class=md-nav__link> Interact with XC-20s </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/xc20/send-xc20s/ >Send XC-20s</a> <label for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/send-xc20s/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Using the Substrate API: Polkadot XCM Pallet </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> Using the Ethereum API: X-Tokens Precompile </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> Using the Ethereum API: XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/remote-execution/ >Remote Execution</a> <label for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/remote-execution/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/remote-execution/computed-origins/ class=md-nav__link> Computed Origin Accounts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/xcm/remote-execution/substrate-calls/ >Remote Substrate Calls</a> <label for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> Using the Substrate API </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> Using the Ethereum API </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/remote-execution/remote-evm-calls/ class=md-nav__link> Remote EVM Calls </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://moonbeam-foundation.github.io/xcm-sdk/latest/ class=md-nav__link> XCM SDK </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/send-execute-xcm/ class=md-nav__link> Send, Execute, & Test XCMs </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../interoperability/protocols/ >Cross-Chain Protocols</a> <label for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-protocols-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../interoperability/protocols/axelar/ class=md-nav__link> Axelar </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/protocols/hyperlane/ class=md-nav__link> Hyperlane </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/protocols/layerzero/ class=md-nav__link> LayerZero </a> </li> <li class=md-nav__item> <a href=../../../../interoperability/protocols/wormhole/ class=md-nav__link> Wormhole </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../interoperability/mrl/ class=md-nav__link> Moonbeam Routed Liquidity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../integrations/ >Integrate</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../integrations/analytics/ >Analytics</a> <label for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-analytics-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../integrations/analytics/dapplooker/ class=md-nav__link> Dapplooker </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../integrations/indexers/ >Indexers</a> <label for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-indexers-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../integrations/indexers/thegraph/ class=md-nav__link> The Graph </a> </li> <li class=md-nav__item> <a href=../../../../integrations/indexers/covalent/ class=md-nav__link> GoldRush API </a> </li> <li class=md-nav__item> <a href=../../../../integrations/indexers/moralis/ class=md-nav__link> Moralis </a> </li> <li class=md-nav__item> <a href=../../../../integrations/indexers/subquery/ class=md-nav__link> SubQuery </a> </li> <li class=md-nav__item> <a href=../../../../integrations/indexers/subsquid/ class=md-nav__link> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../integrations/oracles/ >Oracles</a> <label for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-oracles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../integrations/oracles/api3/ class=md-nav__link> API3 </a> </li> <li class=md-nav__item> <a href=../../../../integrations/oracles/band-protocol/ class=md-nav__link> Band Protocol </a> </li> <li class=md-nav__item> <a href=../../../../integrations/oracles/chainlink/ class=md-nav__link> Chainlink </a> </li> <li class=md-nav__item> <a href=../../../../integrations/oracles/dia/ class=md-nav__link> DIA </a> </li> <li class=md-nav__item> <a href=../../../../integrations/oracles/razor-network/ class=md-nav__link> Razor Network </a> </li> <li class=md-nav__item> <a href=../../../../integrations/oracles/supra/ class=md-nav__link> Supra </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../integrations/wallets/ >Wallets</a> <label for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../integrations/wallets/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../../integrations/wallets/walletconnect/ class=md-nav__link> WalletConnect </a> </li> <li class=md-nav__item> <a href=../../../../integrations/wallets/particle-network/ class=md-nav__link> Particle Network </a> </li> <li class=md-nav__item> <a href=../../../../integrations/wallets/rainbowkit/ class=md-nav__link> RainbowKit </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/ >Node Operators</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/networks/ >Networks</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/networks/run-a-node/ >Run a Node</a> <label for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-run-a-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../node-operators/networks/run-a-node/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/run-a-node/docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/run-a-node/systemd/ class=md-nav__link> Using Systemd </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/run-a-node/flags/ class=md-nav__link> Flags </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/tracing-node/ class=md-nav__link> Run a Tracing Node </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/networks/collators/ >Collators</a> <label for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-collators-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/requirements/ class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/account-management/ class=md-nav__link> Account Management </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/author-mapping/ class=md-nav__link> Author Mapping Precompile </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/activities/ class=md-nav__link> Collator Activities </a> </li> <li class=md-nav__item> <a href=../../../../../node-operators/networks/collators/orbiter/ class=md-nav__link> Orbiter Program </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/oracle-nodes/ >Oracle Nodes</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-oracle-nodes-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../node-operators/oracle-nodes/node-chainlink/ class=md-nav__link> Chainlink Node </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../node-operators/indexer-nodes/ >Indexer Nodes</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-indexer-nodes-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../node-operators/indexer-nodes/thegraph-node/ class=md-nav__link> Graph Node </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/ >Tokens</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/connect/ >Connect to Moonbeam</a> <label for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/connect/ledger/ >Ledger</a> <label for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-ledger-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tokens/connect/ledger/moonbeam/ class=md-nav__link> Moonbeam App </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/ledger/moonriver/ class=md-nav__link> Moonriver App </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/ledger/ethereum/ class=md-nav__link> Ethereum App </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/coinbase-wallet/ class=md-nav__link> Coinbase Wallet </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/mathwallet/ class=md-nav__link> MathWallet </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/polkadotjs/ class=md-nav__link> Polkadot.js Apps </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/subwallet/ class=md-nav__link> SubWallet </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/trezor/ class=md-nav__link> Trezor </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/connect/on-ramps/ class=md-nav__link> On Ramps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/manage/ >Account Management</a> <label for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-manage-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tokens/manage/proxy-accounts/ class=md-nav__link> Proxy Accounts </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/manage/multisig-safe/ class=md-nav__link> Moonbeam Safe </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/manage/identity/ class=md-nav__link> Managing an Identity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/staking/ >Staking</a> <label for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-staking-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tokens/staking/stake/ class=md-nav__link> How to Stake </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tokens/governance/ >Governance</a> <label for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tokens/governance/proposals/ class=md-nav__link> Submit a Democracy Proposal </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/governance/voting/ class=md-nav__link> Vote on a Proposal </a> </li> <li class=md-nav__item> <a href=../../../../../tokens/governance/treasury-spend/ class=md-nav__link> Submit a Treasury Proposal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/ >Learn</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/platform/ >Platform</a> <label for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/platform/networks/ >Networks</a> <label for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../learn/platform/networks/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/vision/ class=md-nav__link> Vision </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/why-polkadot/ class=md-nav__link> Why Polkadot </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/technology/ class=md-nav__link> Technology & Architecture </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/tokens/ class=md-nav__link> Tokens </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/code/ class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/links/ class=md-nav__link> Important Links </a> </li> <li class=md-nav__item> <a href=../../../../../learn/platform/glossary/ class=md-nav__link> Glossary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/core-concepts/ >Core Concepts</a> <label for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/balances/ class=md-nav__link> Account Balances </a> </li> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/transfers-api/ class=md-nav__link> Balance Transfers </a> </li> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/consensus-finality/ class=md-nav__link> Consensus & Finality </a> </li> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/tx-fees/ class=md-nav__link> Transaction Fees </a> </li> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/unified-accounts/ class=md-nav__link> Unified Accounts </a> </li> <li class=md-nav__item> <a href=../../../../../learn/core-concepts/security/ class=md-nav__link> Security Considerations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/features/ >Features</a> <label for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-features-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../learn/features/xchain-plans/ class=md-nav__link> Cross-Chain Communication </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/eth-compatibility/ class=md-nav__link> Ethereum Compatibility </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/governance/ class=md-nav__link> Governance </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/consensus/ class=md-nav__link> Parachain Consensus </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/staking/ class=md-nav__link> Staking </a> </li> <li class=md-nav__item> <a href=../../../../../learn/features/treasury/ class=md-nav__link> Treasury </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../learn/dapps-list/ >DApps List</a> <label for=__nav_5_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-dapps-list-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../learn/dapps-list/dapp-directory/ class=md-nav__link> Moonbeam Foundation DApp Directory </a> </li> <li class=md-nav__item> <a href=../../../../../learn/dapps-list/dapp-radar/ class=md-nav__link> DappRadar </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/ >Tutorials</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/interoperability/ >Interoperability</a> <label for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/interoperability/protocols.index/ >Create Connected Contracts with Cross-Chain Protocols</a> <label for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-protocols.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/interoperability/cross-chain-dao/ class=md-nav__link> [LayerZero] Creating a Cross-Chain DAO </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/interoperability/using-axelar-sdk/ class=md-nav__link> [Axelar] Minting a Cross-Chain NFT </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/interoperability/xcm.index/ >Build Cross-Chain Applications with XCM</a> <label for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-xcm.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/interoperability/remote-staking-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Remote Staking on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/interoperability/uniswapv2-swap-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Uniswap V2 Swap on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/interoperability/remote-batched-evm-calls/ class=md-nav__link> [Polkadot's XCM Pallet] Batched Remote EVM Calls on Moonbeam from Polkadot </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/eth-api/ >Ethereum API</a> <label for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/eth-api/get-started.index/ >Get Started with Smart Contracts</a> <label for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-get-started.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/chat-gpt/ class=md-nav__link> [ChatGPT] Use GPT-4 to Write and Debug Smart Contracts </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/how-to-build-a-dapp/ class=md-nav__link> [Ethers.js] How to Build a DApp </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/foundry-start-to-end/ class=md-nav__link> [Foundry] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/hardhat-start-to-end/ class=md-nav__link> [Hardhat] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/using-tenderly/ class=md-nav__link> [Tenderly] Using Tenderly to Debug and Simulate Transactions </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/thirdweb/ class=md-nav__link> [thirdweb] Building a DApp with thirdweb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/eth-api/precompiles.index/ >Interact with Precompiles</a> <label for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-precompiles.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/batch-approve-swap/ class=md-nav__link> [Batch] Approve & Swap Tokens in a Single Transaction </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/randomness-lottery/ class=md-nav__link> [Randomness] Create a Lottery </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/eth-api/call-permit-gasless-txs/ class=md-nav__link> [Call Permit] Send Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/integrations/ >Integrations</a> <label for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/integrations/indexers.index/ >Use Indexers to Query Chain Data</a> <label for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-indexers.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/integrations/local-subsquid/ class=md-nav__link> [SQD] Index a Local Dev Node </a> </li> <li class=md-nav__item> <a href=../../../../../tutorials/integrations/nft-subsquid/ class=md-nav__link> [SQD] Index NFT Transfers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../../../tutorials/integrations/oracles.index/ >Use Oracles to Fetch Off-Chain Data</a> <label for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-oracles.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../tutorials/integrations/supra/ class=md-nav__link> [Supra] Fetch Price Data </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../tutorials/integrations/0xgasless/ class=md-nav__link> Enable Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#exit-delays class=md-nav__link> <span class=md-ellipsis> Exit Delays </span> </a> </li> <li class=md-nav__item> <a href=#parachain-staking-pallet-interface class=md-nav__link> <span class=md-ellipsis> Parachain Staking Pallet Interface </span> </a> <nav class=md-nav aria-label="Parachain Staking Pallet Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extrinsics class=md-nav__link> <span class=md-ellipsis> Extrinsics </span> </a> </li> <li class=md-nav__item> <a href=#storage-methods class=md-nav__link> <span class=md-ellipsis> Storage Methods </span> </a> </li> <li class=md-nav__item> <a href=#constants class=md-nav__link> <span class=md-ellipsis> Pallet Constants </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=the-parachain-staking-pallet>The Parachain Staking Pallet<a class=headerlink href=#the-parachain-staking-pallet title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Moonbeam uses a Delegated Proof of Stake (DPoS) system that determines which collators are eligible to produce blocks based on their total stake in the network. For general information on staking, such as general terminology, staking variables, and more, please refer to the <a href=/learn/features/staking/ target=_blank>Staking on Moonbeam</a> page.</p> <p>The DPoS system is powered by the <a href=https://github.com/moonbeam-foundation/moonbeam/tree/master/pallets/parachain-staking/src target=_blank>parachain staking</a> pallet, allowing token holders (delegators) to express exactly which collator candidates they would like to support and with what quantity of stake. The design of the parachain staking pallet is such that it enforces shared risk/reward on chain between delegators and candidates.</p> <p>Some of the functionality of the parachain staking pallet is also available through a staking precompile. The precompile is a Solidity interface that enables you to perform staking actions through the Ethereum API. Please refer to the <a href=/builders/ethereum/precompiles/features/staking/ target=_blank>Staking Precompile</a> guide for more information.</p> <p>This guide will provide an overview of the extrinsics, storage methods, and getters for the pallet constants available in the parachain staking pallet.</p> <h2 id=exit-delays>Exit Delays<a class=headerlink href=#exit-delays title="Permanent link">&para;</a></h2> <p>Some of the staking pallet extrinsics include exit delays that you must wait before the request can be executed. The exit delays to note are as follows:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Moonbeam</label><label for=__tabbed_1_2>Moonriver</label><label for=__tabbed_1_3>Moonbase Alpha</label></div> <div class=tabbed-content> <div class=tabbed-block> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">Decrease candidate bond</td> <td style="text-align: center;">28 rounds (168 hours)</td> </tr> <tr> <td style="text-align: center;">Decrease delegator bond</td> <td style="text-align: center;">28 rounds (168 hours)</td> </tr> <tr> <td style="text-align: center;">Revoke delegation</td> <td style="text-align: center;">28 rounds (168 hours)</td> </tr> <tr> <td style="text-align: center;">Leave candidates</td> <td style="text-align: center;">28 rounds (168 hours)</td> </tr> <tr> <td style="text-align: center;">Leave delegators</td> <td style="text-align: center;">28 rounds (168 hours)</td> </tr> </tbody> </table> </div> <div class=tabbed-block> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">Decrease candidate bond</td> <td style="text-align: center;">24 rounds (48 hours)</td> </tr> <tr> <td style="text-align: center;">Decrease delegator bond</td> <td style="text-align: center;">24 rounds (48 hours)</td> </tr> <tr> <td style="text-align: center;">Revoke delegation</td> <td style="text-align: center;">24 rounds (48 hours)</td> </tr> <tr> <td style="text-align: center;">Leave candidates</td> <td style="text-align: center;">24 rounds (48 hours)</td> </tr> <tr> <td style="text-align: center;">Leave delegators</td> <td style="text-align: center;">24 rounds (48 hours)</td> </tr> </tbody> </table> </div> <div class=tabbed-block> <table> <thead> <tr> <th style="text-align: center;">Variable</th> <th style="text-align: center;">Value</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">Decrease candidate bond</td> <td style="text-align: center;">2 rounds (4 hours)</td> </tr> <tr> <td style="text-align: center;">Decrease delegator bond</td> <td style="text-align: center;">2 rounds (4 hours)</td> </tr> <tr> <td style="text-align: center;">Revoke delegation</td> <td style="text-align: center;">2 rounds (4 hours)</td> </tr> <tr> <td style="text-align: center;">Leave candidates</td> <td style="text-align: center;">2 rounds (4 hours)</td> </tr> <tr> <td style="text-align: center;">Leave delegators</td> <td style="text-align: center;">2 rounds (4 hours)</td> </tr> </tbody> </table> </div> </div> </div> <h2 id=parachain-staking-pallet-interface>Parachain Staking Pallet Interface<a class=headerlink href=#parachain-staking-pallet-interface title="Permanent link">&para;</a></h2> <h3 id=extrinsics>Extrinsics<a class=headerlink href=#extrinsics title="Permanent link">&para;</a></h3> <p>The parachain staking pallet provides the following extrinsics (functions):</p> <details class=function> <summary><strong>cancelCandidateBondLess</strong>() - cancels a pending scheduled request to decrease a candidate's self bond amount</summary> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>Parameters</label><label for=__tabbed_2_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=w> </span><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=w> </span><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=c1>// Initialize the API</span>
<span class=w>   </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>     </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>   </span><span class=p>});</span>

<span class=w>   </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>   </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>   </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>     </span><span class=c1>// Setup account from private key</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>account</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>     </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Account address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>account</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>

<span class=w>     </span><span class=c1>// Create the cancel transaction</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>cancelCandidateBondLess</span><span class=p>();</span>

<span class=w>     </span><span class=c1>// Sign and send the transaction</span>
<span class=w>     </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>account</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>         </span><span class=c1>// Process events</span>
<span class=w>         </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>           </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>           </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>           </span><span class=c1>// Handle any failures</span>
<span class=w>           </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>             </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>             </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>             </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>               </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                 </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>               </span><span class=p>);</span>
<span class=w>               </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>             </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>               </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>             </span><span class=p>}</span>
<span class=w>             </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>           </span><span class=p>}</span>

<span class=w>           </span><span class=c1>// Log successful cancellation</span>
<span class=w>           </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>             </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>             </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CancelledCandidateBondLess&#39;</span>
<span class=w>           </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>             </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>             </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully cancelled bond decrease request!&#39;</span><span class=p>);</span>
<span class=w>             </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>             </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount that was to be decreased:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>             </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>               </span><span class=s1>&#39;Round it was to be executed:&#39;</span><span class=p>,</span>
<span class=w>               </span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>             </span><span class=p>);</span>
<span class=w>           </span><span class=p>}</span>
<span class=w>         </span><span class=p>});</span>

<span class=w>         </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>       </span><span class=p>}</span>
<span class=w>     </span><span class=p>});</span>
<span class=w>   </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>     </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in cancelling candidate bond less:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>     </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>   </span><span class=p>}</span>
<span class=w> </span><span class=p>};</span>

<span class=w> </span><span class=c1>// Execute the script</span>
<span class=w> </span><span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>   </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w> </span><span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>cancelDelegationRequest</strong>(candidate) - cancels any pending delegation requests provided the address of a candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>Parameters</label><label for=__tabbed_3_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The address of the relevant collator</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address for which to cancel the delegation request</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Create the cancel delegation request transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>cancelDelegationRequest</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful cancellation</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CancelledDelegationRequest&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegatorAddress</span><span class=p>,</span><span class=w> </span><span class=nx>scheduledRequest</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully cancelled delegation request!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegatorAddress</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>scheduledRequest</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>();</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Request details:&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;- Execution round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>whenExecutable</span><span class=p>);</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>decrease</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;- Action: Decrease by&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>decrease</span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>revoke</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;- Action: Revoke amount&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>revoke</span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in cancelling delegation request:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>cancelLeaveCandidates</strong>(candidateCount) - cancels a candidate's pending scheduled request to leave the candidate pool given the current number of candidates in the pool</summary> <div class="tabbed-set tabbed-alternate" data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>Parameters</label><label for=__tabbed_4_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidateCount</code> - The current number of collator candidates in the pool</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup candidate account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// First, get the current candidate count from the chain</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidatePool</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidates</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current candidate count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateCount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Create the cancel leave candidates transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>cancelLeaveCandidates</span><span class=p>(</span><span class=nx>candidateCount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful cancellation</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CancelledLeaveCandidates&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidateAddress</span><span class=p>,</span><span class=w> </span><span class=nx>candidateCount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully cancelled leave candidates request!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Candidate count at cancellation:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>candidateCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in cancelling leave candidates request:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>candidateBondMore</strong>(more) - request to increase a candidate's self bond by a specified amount</summary> <div class="tabbed-set tabbed-alternate" data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>Parameters</label><label for=__tabbed_5_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>more</code> - The amount of WEI by which to increase the candidate's self bond</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup candidate account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Amount to increase bond by (e.g., 1 DEV = 1_000_000_000_000_000_000)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>moreBond</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1000000000000000000&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Increasing bond by:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>moreBond</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei (1 DEV)&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query current bond before increasing</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the increase bond transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateBondMore</span><span class=p>(</span><span class=nx>moreBond</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Transaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful bond increase</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateBondedMore&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidateAddress</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>newTotal</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully increased candidate bond!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount increased:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;New total bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>newTotal</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query updated bond after transaction</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>newInfo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>newInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>newInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in increasing candidate bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>delegate</strong>(candidate, amount, candidateDelegationCount, delegationCount) - <em>deprecated as of runtime 2400</em> - request to add a delegation to a specific candidate for a given amount. Use the <code>delegateWithAutoCompound</code> extrinsic instead</summary> <div class="tabbed-set tabbed-alternate" data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><input id=__tabbed_6_2 name=__tabbed_6 type=radio><div class=tabbed-labels><label for=__tabbed_6_1>Parameters</label><label for=__tabbed_6_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The address of the collator candidate to delegate to (H160 format address, e.g., '0x123...')</li> <li><code>amount</code> - The amount to delegate in Wei (e.g., 1 DEV = 1_000_000_000_000_000_000 Wei)</li> <li><code>candidateDelegationCount</code> - The current number of delegations to the candidate</li> <li><code>delegationCount</code> - The current number of delegations from the delegator</li> </ul> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 2400</em> Use the <code>delegateWithAutoCompound</code> extrinsic instead </p> </div> </div> </div> </details> <details class=function> <summary><strong>delegateWithAutoCompound</strong>(candidate, amount, autoCompound, candidateDelegationCount, candidateAutoCompoundingDelegationCount, delegationCount) - delegates a collator candidate and sets the percentage of rewards to auto-compound given an integer (no decimals) for the <code>amount</code> between 0-100. If the caller is not a delegator, this function adds them to the set of delegators. If the caller is already a delegator, then it adjusts their delegation amount</summary> <div class="tabbed-set tabbed-alternate" data-tabs=7:2><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><input id=__tabbed_7_2 name=__tabbed_7 type=radio><div class=tabbed-labels><label for=__tabbed_7_1>Parameters</label><label for=__tabbed_7_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The collator's address you want to delegate to</li> <li><code>amount</code> - The amount to delegate (in Wei, e.g. 1000000000000000000 for 1 DEV)</li> <li><code>autoCompound</code> - The percentage of rewards to automatically compound (0-100)</li> <li><code>candidateDelegationCount</code> - The current number of delegations to the collator</li> <li><code>candidateAutoCompoundingDelegationCount</code> - The current number of auto-compounding delegations for the collator</li> <li><code>delegationCount</code> - The total number of delegations you have across all collators</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address to delegate to</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Amount to delegate (e.g., 1 DEV = 1_000_000_000_000_000_000)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1000000000000000000&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Auto-compound percentage (0-100)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>50</span><span class=p>;</span><span class=w> </span><span class=c1>// 50% of rewards will be auto-compounded</span>

<span class=w>    </span><span class=c1>// Get current delegation counts</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>        </span><span class=nx>candidateAddress</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get delegation counts</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>candidateDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>delegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>candidateDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>delegationCount</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>delegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei (1 DEV)&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compound percentage:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>autoCompound</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Stats:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Candidate delegation count:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateDelegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Candidate auto-compounding delegation count:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator total delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Create the delegate with auto-compound transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegateWithAutoCompound</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidateAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>amount</span><span class=p>,</span>
<span class=w>      </span><span class=nx>autoCompound</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateDelegationCount</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=p>,</span>
<span class=w>      </span><span class=nx>delegationCount</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful delegation</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;Delegation&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>autoCompound</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully delegated with auto-compound!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Auto-compound percentage:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>autoCompound</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=s1>&#39;%&#39;</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in delegation with auto-compound:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>delegatorBondMore</strong>(candidate, more) - request to increase a delegator's amount delegated for a specific candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=8:2><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><input id=__tabbed_8_2 name=__tabbed_8 type=radio><div class=tabbed-labels><label for=__tabbed_8_1>Parameters</label><label for=__tabbed_8_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - the address of the respective collator</li> <li><code>more</code> - The amount you want to increase your delegation by (in Wei, e.g. 1000000000000000000 for 1 DEV)</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address for which to increase delegation</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Amount to increase delegation by (e.g., 1 DEV = 1_000_000_000_000_000_000)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>moreBond</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1000000000000000000&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Query current delegation before increasing</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Delegation Info:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Current delegation amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>currentDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount to increase by:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>moreBond</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei (1 DEV)&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Create the increase delegation transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorBondMore</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidateAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>moreBond</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful bond increase</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;DelegationIncreased&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>inTopDelegations</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully increased delegation!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount increased by:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;In top delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>inTopDelegations</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query updated delegation after transaction</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>newState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>newState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>newState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>                </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>                  </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>                  </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>updatedDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;\nNew delegation amount:&#39;</span><span class=p>,</span>
<span class=w>                  </span><span class=nx>updatedDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in increasing delegation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>executeCandidateBondLess</strong>(candidate) - executes any scheduled due requests to decrease a candidate's self bond amount</summary> <div class="tabbed-set tabbed-alternate" data-tabs=9:2><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><input id=__tabbed_9_2 name=__tabbed_9 type=radio><div class=tabbed-labels><label for=__tabbed_9_1>Parameters</label><label for=__tabbed_9_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - the address of the respective collator</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup account from private key (this can be any account, doesn&#39;t need to be the candidate)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>executor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address whose bond decrease should be executed</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Query current candidate info before execution</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execution Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Executor address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executor</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate current bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the execute bond decrease transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>executeCandidateBondLess</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>executor</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful execution</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateBondedLess&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>newBond</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully executed candidate bond decrease!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount decreased:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;New bond amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>newBond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query updated candidate info after execution</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>newInfo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>newInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>newInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated candidate bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in executing candidate bond decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>executeDelegationRequest</strong>(delegator, candidate) - executes any scheduled due delegation requests for a specific delegator provided the address of the candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=10:2><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><input id=__tabbed_10_2 name=__tabbed_10 type=radio><div class=tabbed-labels><label for=__tabbed_10_1>Parameters</label><label for=__tabbed_10_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>delegator</code> - The address of the delegator who made the delegation request</li> <li><code>candidate</code> - The collator's address associated with the delegation request</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup executor account from private key (this can be any account)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>executor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The delegator&#39;s address whose request will be executed</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_DELEGATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address for the delegation request</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Query current delegation info before execution</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execution Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Executor address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executor</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegatorAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nCurrent delegation amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>currentDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the execute delegation request transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>executeDelegationRequest</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegatorAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateAddress</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>executor</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful delegation decrease/revoke</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;DelegationDecreased&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>inTopDelegations</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully executed delegation decrease!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount decreased:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;In top delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>inTopDelegations</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;DelegationRevoked&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully executed delegation revocation!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount revoked:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query updated delegation info after execution</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegatorAddress</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>newState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>newState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>newState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>                </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>                  </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>                  </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>updatedDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;\nNew delegation amount:&#39;</span><span class=p>,</span>
<span class=w>                  </span><span class=nx>updatedDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegation has been fully revoked&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in executing delegation request:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>executeLeaveCandidates</strong>(candidate, candidateDelegationCount) - executes any scheduled due requests to leave the set of collator candidates</summary> <div class="tabbed-set tabbed-alternate" data-tabs=11:2><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><input id=__tabbed_11_2 name=__tabbed_11 type=radio><div class=tabbed-labels><label for=__tabbed_11_1>Parameters</label><label for=__tabbed_11_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The address of the collator who requested to leave the candidate pool</li> <li><code>candidateDelegationCount</code> - The current number of delegations for the leaving candidate</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup executor account from private key (this can be any account)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>executor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address who is scheduled to leave</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get candidate information and delegation count</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>candidateDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execution Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Executor address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executor</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>candidateDelegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>;</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateDelegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Candidate info not found&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the execute leave candidates transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>executeLeaveCandidates</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidateAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateDelegationCount</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>executor</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful execution of leave request</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateLeft&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>,</span><span class=w> </span><span class=nx>remainingCount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully executed leave candidates request!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount unlocked:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Remaining candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>remainingCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final candidate state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isNone</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;\nCandidate has been successfully removed from the candidate pool&#39;</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Candidate still exists in the pool&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current state:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in executing leave candidates request:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>goOffline</strong>() - allows a collator candidate to temporarily leave the pool of candidates without unbonding</summary> <div class="tabbed-set tabbed-alternate" data-tabs=12:2><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><input id=__tabbed_12_2 name=__tabbed_12 type=radio><div class=tabbed-labels><label for=__tabbed_12_1>Parameters</label><label for=__tabbed_12_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup collator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query current collator info before going offline</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>      </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Status:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Not found in candidate pool&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the go offline transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>goOffline</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>collator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful offline status change</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateWentOffline&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>collatorAccount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully went offline!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAccount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final collator state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in going offline:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>goOnline</strong>() - allows a collator candidate to rejoin the pool of candidates after previously calling <code>goOffline()</code></summary> <div class="tabbed-set tabbed-alternate" data-tabs=13:2><input checked=checked id=__tabbed_13_1 name=__tabbed_13 type=radio><input id=__tabbed_13_2 name=__tabbed_13 type=radio><div class=tabbed-labels><label for=__tabbed_13_1>Parameters</label><label for=__tabbed_13_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup collator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query current collator info before going online</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>      </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Status:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Not found in candidate pool&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the go online transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>goOnline</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>collator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful online status change</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateBackOnline&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>collatorAccount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully went back online!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAccount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final collator state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in going online:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>joinCandidates</strong>(bond, candidateCount) - request to join the set of collator candidates with a specified bond amount and provided the current candidate count</summary> <div class="tabbed-set tabbed-alternate" data-tabs=14:2><input checked=checked id=__tabbed_14_1 name=__tabbed_14 type=radio><input id=__tabbed_14_2 name=__tabbed_14 type=radio><div class=tabbed-labels><label for=__tabbed_14_1>Parameters</label><label for=__tabbed_14_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>bond</code> - The amount to stake as collator bond (in Wei, e.g. 500000000000000000000 for 500 DEV)</li> <li><code>candidateCount</code> - The total number of candidates currently in the candidate pool</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>account</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Set bond amount to 500 DEV (multiply by 10^18 for proper decimals)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>bondAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;500000000000000000000&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current candidate count</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidatePool</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidates</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Check account balance</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>balance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>system</span><span class=p>.</span><span class=nx>account</span><span class=p>(</span><span class=nx>account</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Join Candidates Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Account address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>account</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current free balance:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>balance</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>free</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>bondAmount</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;(501 DEV)&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current candidate count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateCount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Create the join candidates transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>joinCandidates</span><span class=p>(</span>
<span class=w>      </span><span class=nx>bondAmount</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateCount</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>account</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful joining</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;JoinedCollatorCandidates&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>account</span><span class=p>,</span><span class=w> </span><span class=nx>amountLocked</span><span class=p>,</span><span class=w> </span><span class=nx>newTotalAmountLocked</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully joined collator candidates!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Account:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>account</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount locked:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amountLocked</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;New total amount locked:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>newTotalAmountLocked</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final candidate state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>account</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNew Candidate Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>

<span class=w>            </span><span class=c1>// Get updated candidate count</span>
<span class=w>            </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidatePool</span><span class=p>().</span><span class=nx>then</span><span class=p>((</span><span class=nx>newCandidates</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;New candidate count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>newCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>              </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in joining candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>notifyInactiveCollator</strong>(collator) - marks a collator as inactive if they have not been producing blocks for the maximum number of offline rounds, as returned by the <a href=#constants><code>maxOfflineRounds</code> pallet constant</a></summary> <div class="tabbed-set tabbed-alternate" data-tabs=15:2><input checked=checked id=__tabbed_15_1 name=__tabbed_15 type=radio><input id=__tabbed_15_2 name=__tabbed_15 type=radio><div class=tabbed-labels><label for=__tabbed_15_1>Parameters</label><label for=__tabbed_15_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>collator</code> - the address of the collator to be notified</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup notifier account from private key (this can be any account)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>notifier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The potentially inactive collator&#39;s address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>inactiveCollator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get max offline rounds from constants</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxOfflineRounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxOfflineRounds</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current round info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Get collator info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>inactiveCollator</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Notify Inactive Collator Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Notifier address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>notifier</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Inactive collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>inactiveCollator</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Maximum allowed offline rounds:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxOfflineRounds</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Current Status:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the notify inactive collator transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>notifyInactiveCollator</span><span class=p>(</span><span class=nx>inactiveCollator</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>notifier</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful notification</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CollatorWentOffline&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>collatorAccount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully notified inactive collator!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAccount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final collator state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>inactiveCollator</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Collator Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in notifying inactive collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>scheduleCandidateBondLess</strong>(less) - schedules a request to decrease a candidate's self bond by a specified amount. There is an <a href=#exit-delays>exit delay</a> that must be waited before you can execute the request via the <code>executeCandidateBondLess</code> extrinsic</summary> <div class="tabbed-set tabbed-alternate" data-tabs=16:2><input checked=checked id=__tabbed_16_1 name=__tabbed_16 type=radio><input id=__tabbed_16_2 name=__tabbed_16 type=radio><div class=tabbed-labels><label for=__tabbed_16_1>Parameters</label><label for=__tabbed_16_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>less</code> - The amount you want to decrease your delegation by (in Wei, e.g. 1000000000000000000 for 1 DEV)</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup candidate account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Amount to decrease bond by (e.g., 1 DEV = 1_000_000_000_000_000_000)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>decreaseAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1000000000000000000&#39;</span><span class=p>;</span><span class=w> </span><span class=c1>// 1 DEV</span>

<span class=w>    </span><span class=c1>// Get current candidate info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Schedule Bond Decrease Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond decrease amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>decreaseAmount</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei (1 DEV)&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Candidate Status:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Account is not a candidate&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the schedule bond decrease transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>scheduleCandidateBondLess</span><span class=p>(</span><span class=nx>decreaseAmount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get current round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful scheduling</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateBondLessRequested&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amountToDecrease</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully scheduled bond decrease!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount to decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amountToDecrease</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execute round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=sb>`\nNote: You must wait until round </span><span class=si>${</span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> to execute the decrease request`</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final candidate state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidate</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Candidate Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in scheduling bond decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>scheduleDelegatorBondLess</strong>(candidate, less) - schedules a request for a delegator to bond less with respect to a specific candidate. There is an <a href=#exit-delays>exit delay</a> that must be waited before you can execute the request via the <code>executeDelegationRequest</code> extrinsic</summary> <div class="tabbed-set tabbed-alternate" data-tabs=17:2><input checked=checked id=__tabbed_17_1 name=__tabbed_17 type=radio><input id=__tabbed_17_2 name=__tabbed_17 type=radio><div class=tabbed-labels><label for=__tabbed_17_1>Parameters</label><label for=__tabbed_17_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The collator's address for which you want to decrease your delegation</li> <li><code>less</code> - The amount you want to decrease your delegation by (in Wei, e.g. 1000000000000000000 for 1 DEV)</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address to decrease delegation for</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Amount to decrease delegation by (e.g., 1 DEV = 1_000_000_000_000_000_000)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>decreaseAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;1000000000000000000&#39;</span><span class=p>;</span><span class=w> </span><span class=c1>// 1 DEV</span>

<span class=w>    </span><span class=c1>// Get current delegation info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Schedule Delegation Decrease Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount to decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>decreaseAmount</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei (1 DEV)&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nCurrent Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>currentDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nWarning: No existing delegation found for this candidate&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Account is not a delegator&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Get current round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Create the schedule decrease transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>scheduleDelegatorBondLess</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidateAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>decreaseAmount</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful scheduling</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;DelegationDecreaseScheduled&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>amountToDecrease</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully scheduled delegation decrease!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount to decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amountToDecrease</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execute round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=sb>`\nNote: You must wait until round </span><span class=si>${</span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> to execute the decrease request`</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final delegation state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>                </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>                  </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>                  </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>updatedDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Delegation Status:&#39;</span><span class=p>);</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;Note: Amount will decrease after execution in the scheduled round&#39;</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in scheduling delegation decrease:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>scheduleLeaveCandidates</strong>(candidateCount) - schedules a request for a candidate to remove themselves from the candidate pool. There is an <a href=#exit-delays>exit delay</a> that must be waited before you can execute the request via the <code>executeLeaveCandidates</code> extrinsic</summary> <div class="tabbed-set tabbed-alternate" data-tabs=18:2><input checked=checked id=__tabbed_18_1 name=__tabbed_18 type=radio><input id=__tabbed_18_2 name=__tabbed_18 type=radio><div class=tabbed-labels><label for=__tabbed_18_1>Parameters</label><label for=__tabbed_18_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidateCount</code> - The total number of candidates currently in the candidate pool</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup collator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get current candidate pool information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidatePool</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidates</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current candidate info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>      </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Schedule Leave Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current candidate count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateCount</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Candidate Status:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Account is not a candidate&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Create the schedule leave transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>scheduleLeaveCandidates</span><span class=p>(</span><span class=nx>candidateCount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get the current round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>collator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful scheduling</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;CandidateScheduledExit&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>round</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>scheduledExit</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully scheduled leave candidates!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Scheduled exit round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>scheduledExit</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=sb>`\nNote: You must wait until round </span><span class=si>${</span><span class=nx>scheduledExit</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> to execute the leave request`</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final candidate state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>collator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Candidate Status:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span>
<span class=w>                </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>                </span><span class=s1>&#39;(Leaving status shows the exit round)&#39;</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in scheduling leave candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>scheduleRevokeDelegation</strong>(collator) - schedules a request to revoke a delegation given the address of a candidate. There is an <a href=#exit-delays>exit delay</a> that must be waited before you can execute the request via the <code>executeDelegationRequest</code> extrinsic</summary> <div class="tabbed-set tabbed-alternate" data-tabs=19:2><input checked=checked id=__tabbed_19_1 name=__tabbed_19 type=radio><input id=__tabbed_19_2 name=__tabbed_19 type=radio><div class=tabbed-labels><label for=__tabbed_19_1>Parameters</label><label for=__tabbed_19_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>collator</code> - The collator's address from which you want to revoke your delegation</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The collator&#39;s address to revoke delegation from</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current delegation info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Schedule Revoke Delegation Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>collatorAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nCurrent Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>currentDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nWarning: No existing delegation found for this collator&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Account is not a delegator&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Get current round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Create the schedule revoke transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>scheduleRevokeDelegation</span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful scheduling</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;DelegationRevocationScheduled&#39;</span>
<span class=w>          </span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>round</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully scheduled delegation revocation!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Execute round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=sb>`\nNote: You must wait until round </span><span class=si>${</span><span class=nx>executeRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> to execute the revocation request`</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query final delegation state</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>finalState</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>finalState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>finalState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>                </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>                  </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>                  </span><span class=nx>collatorAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>updatedDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Delegation Status:&#39;</span><span class=p>);</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>updatedDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;Note: Delegation will be fully revoked after execution in the scheduled round&#39;</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in scheduling delegation revocation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>setAutoCompound</strong>(candidate, value, candidateAutoCompoundingDelegationCountHint, delegationCountHint) - sets the percentage of rewards to be auto-compounded for an existing delegation given an integer (no decimals) for the <code>value</code> between 0-100</summary> <div class="tabbed-set tabbed-alternate" data-tabs=20:2><input checked=checked id=__tabbed_20_1 name=__tabbed_20 type=radio><input id=__tabbed_20_2 name=__tabbed_20 type=radio><div class=tabbed-labels><label for=__tabbed_20_1>Parameters</label><label for=__tabbed_20_2>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>candidate</code> - The collator's address you're delegating to</li> <li><code>value</code> - Auto-compound percentage (0-100)</li> <li><code>candidateAutoCompoundingDelegationCountHint</code> - Number of auto-compounding delegations for this collator</li> <li><code>delegationCountHint</code> - Total number of delegations you have across all collators</li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Keyring</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/keyring&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=c1>// Initialize the keyring with ethereum type</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>keyring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>Keyring</span><span class=p>({</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;ethereum&#39;</span><span class=w> </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Setup delegator account from private key</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_PRIVATE_KEY&#39;</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>keyring</span><span class=p>.</span><span class=nx>addFromUri</span><span class=p>(</span><span class=nx>PRIVATE_KEY</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// The candidate&#39;s address for the delegation</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Auto-compound percentage (0-100)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>50</span><span class=p>;</span><span class=w> </span><span class=c1>// 50% of rewards will be auto-compounded</span>

<span class=w>    </span><span class=c1>// Get auto-compounding delegations count</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>        </span><span class=nx>candidateAddress</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get delegator state for delegation count</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>      </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>delegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Set Auto-Compound Details:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compound percentage:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>autoCompoundValue</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>delegationCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nCurrent Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>currentDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;\nWarning: No existing delegation found for this candidate&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nWarning: Account is not a delegator&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegation Counts:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Auto-compounding delegations:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateAutoCompoundingDelegationCount</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegationCount</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Create the set auto-compound transaction</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>tx</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>tx</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>setAutoCompound</span><span class=p>(</span>
<span class=w>      </span><span class=nx>candidateAddress</span><span class=p>,</span>
<span class=w>      </span><span class=nx>autoCompoundValue</span><span class=p>,</span>
<span class=w>      </span><span class=nx>candidateAutoCompoundingDelegationCount</span><span class=p>,</span>
<span class=w>      </span><span class=nx>delegationCount</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sign and send the transaction</span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>tx</span><span class=p>.</span><span class=nx>signAndSend</span><span class=p>(</span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>status</span><span class=p>,</span><span class=w> </span><span class=nx>events</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isInBlock</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nTransaction included in block hash: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>asInBlock</span><span class=si>}</span><span class=sb>`</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Process events</span>
<span class=w>        </span><span class=nx>events</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>event</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>section</span><span class=p>,</span><span class=w> </span><span class=nx>method</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>event</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\t</span><span class=si>${</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>          </span><span class=c1>// Handle any failures</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;ExtrinsicFailed&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>dispatchError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=kd>let</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>;</span>

<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>isModule</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>decoded</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>registry</span><span class=p>.</span><span class=nx>findMetaError</span><span class=p>(</span>
<span class=w>                </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>asModule</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>section</span><span class=si>}</span><span class=sb>.</span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>docs</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>errorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>dispatchError</span><span class=p>.</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failure reason:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>errorInfo</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>

<span class=w>          </span><span class=c1>// Log successful auto-compound setting</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>section</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;parachainStaking&#39;</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>method</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;AutoCompoundSet&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>candidate</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>data</span><span class=p>;</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSuccessfully set auto-compound percentage!&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compound value:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Query updated auto-compound settings</span>
<span class=w>        </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span>
<span class=w>          </span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>)</span>
<span class=w>          </span><span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>newAutoCompound</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorSetting</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>newAutoCompound</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>              </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>                </span><span class=nx>d</span><span class=p>.</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>                </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>address</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorSetting</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nUpdated Auto-Compound Setting:&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Value:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegatorSetting</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>});</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error in setting auto-compound:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <h3 id=storage-methods>Storage Methods<a class=headerlink href=#storage-methods title="Permanent link">&para;</a></h3> <p>The parachain staking pallet includes the following read-only storage methods to obtain chain state data:</p> <details class=function> <summary><strong>atStake</strong>(u32, AccountId20) - provides a snapshot of a collator's delegation stake and the percentage of rewards set to auto-compound given a round number and, optionally, the collator's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=21:3><input checked=checked id=__tabbed_21_1 name=__tabbed_21 type=radio><input id=__tabbed_21_2 name=__tabbed_21 type=radio><input id=__tabbed_21_3 name=__tabbed_21 type=radio><div class=tabbed-labels><label for=__tabbed_21_1>Parameters</label><label for=__tabbed_21_2>Returns</label><label for=__tabbed_21_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>u32</code> - round number</li> <li><code>AccountId20</code> - collator address to query. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>Information about a collator's delegations including delegator addresses, amounts, and auto-compound percentages</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Example collator address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query current round</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nQuerying current round stake...&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>atStake</span><span class=p>(</span>
<span class=w>      </span><span class=nx>currentRound</span><span class=p>,</span>
<span class=w>      </span><span class=nx>collatorAddress</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>currentStake</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Round Stake Details:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>stakeInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentStake</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>stakeInfo</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>));</span>

<span class=w>      </span><span class=c1>// Get raw values for calculations if needed</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>rawStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentStake</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nRaw Stake Values:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>rawStake</span><span class=p>.</span><span class=nx>total</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Own stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>rawStake</span><span class=p>.</span><span class=nx>bond</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Query previous round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>previousRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nQuerying previous round stake...&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>previousStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>atStake</span><span class=p>(</span>
<span class=w>      </span><span class=nx>previousRound</span><span class=p>,</span>
<span class=w>      </span><span class=nx>collatorAddress</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>previousStake</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nPrevious Round Stake Details:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>previousStakeInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>previousStake</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>previousStakeInfo</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Get scheduled delegation requests</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegationRequests</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegationScheduledRequests</span><span class=p>(</span>
<span class=w>        </span><span class=nx>collatorAddress</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nScheduled Delegation Changes:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegationRequests</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>delegationRequests</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>(),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No scheduled delegation changes&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Get auto-compound settings</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompound</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>        </span><span class=nx>collatorAddress</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nAuto-Compound Settings:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>autoCompound</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>autoCompound</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>(),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No auto-compound settings found&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying at stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>autoCompoundingDelegations</strong>(AccountId20) - returns a list of delegators for a given candidate that have set up auto-compounding along with the percentage of rewards set to be auto-compounded</summary> <div class="tabbed-set tabbed-alternate" data-tabs=22:3><input checked=checked id=__tabbed_22_1 name=__tabbed_22 type=radio><input id=__tabbed_22_2 name=__tabbed_22 type=radio><input id=__tabbed_22_3 name=__tabbed_22 type=radio><div class=tabbed-labels><label for=__tabbed_22_1>Parameters</label><label for=__tabbed_22_2>Returns</label><label for=__tabbed_22_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the collator address to query. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>The list of delegators who have auto-compounding enabled and the respective percentage of rewards they have set to be auto-compounded</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Example candidate address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query auto-compounding delegations</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>        </span><span class=nx>candidateAddress</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get candidate info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nAuto-Compounding Delegations:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total auto-compounding delegators:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Display each auto-compounding delegation</span>
<span class=w>      </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>delegation</span><span class=p>,</span><span class=w> </span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegation</span><span class=p>;</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nDelegator #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compound percentage:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=p>});</span>

<span class=w>      </span><span class=c1>// Get more detailed information for each delegator</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDetailed Delegation Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>delegation</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span>
<span class=w>          </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>delegator</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>specificDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>            </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>              </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>              </span><span class=nx>candidateAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>          </span><span class=p>);</span>

<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>specificDelegation</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nDelegator </span><span class=si>${</span><span class=nx>delegation</span><span class=p>.</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Delegation amount:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>specificDelegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Auto-compound value:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=s1>&#39;%&#39;</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Calculate some statistics</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>averageCompounding</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
<span class=w>          </span><span class=p>(</span><span class=nx>acc</span><span class=p>,</span><span class=w> </span><span class=nx>curr</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>acc</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>curr</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>(),</span>
<span class=w>          </span><span class=mf>0</span>
<span class=w>        </span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStatistics:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Average auto-compound percentage:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>averageCompounding</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>),</span>
<span class=w>        </span><span class=s1>&#39;%&#39;</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>maxCompounding</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>(</span>
<span class=w>        </span><span class=p>...</span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>())</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>minCompounding</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span>
<span class=w>        </span><span class=p>...</span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>())</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Highest auto-compound setting:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxCompounding</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest auto-compound setting:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minCompounding</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No auto-compounding delegations found for this candidate&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying auto-compounding delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>awardedPts</strong>(u32, AccountId20) - returns the awarded points for each collator per round given a round number and, optionally, the collator's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=23:3><input checked=checked id=__tabbed_23_1 name=__tabbed_23 type=radio><input id=__tabbed_23_2 name=__tabbed_23 type=radio><input id=__tabbed_23_3 name=__tabbed_23 type=radio><div class=tabbed-labels><label for=__tabbed_23_1>Parameters</label><label for=__tabbed_23_2>Returns</label><label for=__tabbed_23_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>u32</code> - the round number</li> <li><code>AccountId20</code> - the collator to query. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>The number of awarded points for a given round and collator. </p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Example collator address - you can set this to null to query all collators</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Query several recent rounds</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>roundsToQuery</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>rounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span>
<span class=w>      </span><span class=p>{</span><span class=w> </span><span class=nx>length</span><span class=o>:</span><span class=w> </span><span class=nx>roundsToQuery</span><span class=w> </span><span class=p>},</span>
<span class=w>      </span><span class=p>(</span><span class=nx>_</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>&#39;All collators&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Querying last </span><span class=si>${</span><span class=nx>roundsToQuery</span><span class=si>}</span><span class=sb> rounds:`</span><span class=p>,</span><span class=w> </span><span class=nx>rounds</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Store points data for analysis</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>pointsData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>

<span class=w>    </span><span class=c1>// Query points for each round</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>roundNumber</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>rounds</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>roundPoints</span><span class=p>;</span>

<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Query specific collator</span>
<span class=w>        </span><span class=nx>roundPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>          </span><span class=nx>roundNumber</span><span class=p>,</span>
<span class=w>          </span><span class=nx>collatorAddress</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=sb>`\nRound </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb> Points for </span><span class=si>${</span><span class=nx>collatorAddress</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span>
<span class=w>          </span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>roundNumber</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=p>[</span><span class=nx>collatorAddress</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>(),</span>
<span class=w>        </span><span class=p>};</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Query all collators for this round</span>
<span class=w>        </span><span class=nx>roundPoints</span><span class=w> </span><span class=o>=</span>
<span class=w>          </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>roundNumber</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nRound </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb> Points:`</span><span class=p>);</span>

<span class=w>        </span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>roundNumber</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{};</span>

<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>key</span><span class=p>,</span><span class=w> </span><span class=nx>points</span><span class=p>]</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>roundPoints</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>key</span><span class=p>.</span><span class=nx>args</span><span class=p>[</span><span class=mf>1</span><span class=p>].</span><span class=nx>toString</span><span class=p>();</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>pointsValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>points</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Collator </span><span class=si>${</span><span class=nx>collator</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>pointsValue</span><span class=si>}</span><span class=sb> points`</span><span class=p>);</span>

<span class=w>          </span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>roundNumber</span><span class=p>][</span><span class=nx>collator</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>pointsValue</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Calculate statistics</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStatistics:&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=c1>// Statistics for specific collator</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>rounds</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>r</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>r</span><span class=p>][</span><span class=nx>collatorAddress</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>0</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=p>,</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>averagePoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>rounds</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>maxPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>(...</span><span class=nx>collatorPoints</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>minPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(...</span><span class=nx>collatorPoints</span><span class=p>);</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nCollator </span><span class=si>${</span><span class=nx>collatorAddress</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalPoints</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Average points per round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>averagePoints</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>));</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Highest points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxPoints</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minPoints</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=c1>// Statistics for all collators</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>collators</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Set</span><span class=p>(</span>
<span class=w>        </span><span class=nx>rounds</span><span class=p>.</span><span class=nx>flatMap</span><span class=p>((</span><span class=nx>r</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>Object</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>r</span><span class=p>]))</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>collators</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>rounds</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>r</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>pointsData</span><span class=p>[</span><span class=nx>r</span><span class=p>][</span><span class=nx>collator</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=p>,</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>averagePoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>rounds</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>maxPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>(...</span><span class=nx>collatorPoints</span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>minPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(...</span><span class=nx>collatorPoints</span><span class=p>);</span>

<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nCollator </span><span class=si>${</span><span class=nx>collator</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalPoints</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Average points per round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>averagePoints</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>));</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Highest points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxPoints</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minPoints</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Points history:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;, &#39;</span><span class=p>));</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Get current selected candidates for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrently Selected Candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>toString</span><span class=p>()).</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;\n&#39;</span><span class=p>));</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying awarded points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>bottomDelegations</strong>(AccountId20) - returns at the most the bottom 50 delegations for all candidates or for a given candidate's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=24:3><input checked=checked id=__tabbed_24_1 name=__tabbed_24 type=radio><input id=__tabbed_24_2 name=__tabbed_24 type=radio><input id=__tabbed_24_3 name=__tabbed_24 type=radio><div class=tabbed-labels><label for=__tabbed_24_1>Parameters</label><label for=__tabbed_24_2>Returns</label><label for=__tabbed_24_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the collator to query. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>The bottom 50 delegations for a given collator address</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=w> </span><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=c1>// Initialize the API</span>
<span class=w>   </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>     </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>   </span><span class=p>});</span>

<span class=w>   </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>     </span><span class=c1>// Example candidate address</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>     </span><span class=c1>// Get candidate info first</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>       </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>     </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>     </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>     </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>       </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate Information:&#39;</span><span class=p>);</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>     </span><span class=p>}</span>

<span class=w>     </span><span class=c1>// Query bottom delegations</span>
<span class=w>     </span><span class=kd>const</span><span class=w> </span><span class=nx>bottomDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>       </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>bottomDelegations</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>     </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>       </span><span class=kd>const</span><span class=w> </span><span class=nx>delegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nBottom Delegations:&#39;</span><span class=p>);</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>         </span><span class=s1>&#39;Total bottom delegations found:&#39;</span><span class=p>,</span>
<span class=w>         </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span>
<span class=w>       </span><span class=p>);</span>

<span class=w>       </span><span class=c1>// Sort delegations by amount in descending order</span>
<span class=w>       </span><span class=kd>const</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>delegations</span><span class=p>].</span><span class=nx>sort</span><span class=p>(</span>
<span class=w>         </span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>b</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span>
<span class=w>       </span><span class=p>);</span>

<span class=w>       </span><span class=c1>// Display each delegation</span>
<span class=w>       </span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>delegation</span><span class=p>,</span><span class=w> </span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nDelegation #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=c1>// Convert Wei to DEV (1 DEV = 10^18 Wei)</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>devAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>devAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;DEV&#39;</span><span class=p>);</span>
<span class=w>       </span><span class=p>});</span>

<span class=w>       </span><span class=c1>// Calculate some statistics</span>
<span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>total</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
<span class=w>           </span><span class=p>(</span><span class=nx>acc</span><span class=p>,</span><span class=w> </span><span class=nx>curr</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>acc</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>curr</span><span class=p>.</span><span class=nx>amount</span><span class=p>),</span>
<span class=w>           </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>)</span>
<span class=w>         </span><span class=p>);</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>average</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>total</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>highest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=p>[</span><span class=mf>0</span><span class=p>].</span><span class=nx>amount</span><span class=p>;</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>lowest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=p>[</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>].</span><span class=nx>amount</span><span class=p>;</span>

<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStatistics:&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegated in bottom:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>total</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Average delegation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>average</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Highest bottom delegation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>highest</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest bottom delegation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>lowest</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>

<span class=w>         </span><span class=c1>// Show in DEV for readability</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStatistics (in DEV):&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>           </span><span class=s1>&#39;Total delegated:&#39;</span><span class=p>,</span>
<span class=w>           </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>total</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>           </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>         </span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>           </span><span class=s1>&#39;Average delegation:&#39;</span><span class=p>,</span>
<span class=w>           </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>average</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>           </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>         </span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>           </span><span class=s1>&#39;Highest bottom delegation:&#39;</span><span class=p>,</span>
<span class=w>           </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>highest</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>           </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>         </span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>           </span><span class=s1>&#39;Lowest bottom delegation:&#39;</span><span class=p>,</span>
<span class=w>           </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>lowest</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>           </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>         </span><span class=p>);</span>
<span class=w>       </span><span class=p>}</span>

<span class=w>       </span><span class=c1>// Get top delegations for comparison</span>
<span class=w>       </span><span class=kd>const</span><span class=w> </span><span class=nx>topDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>         </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>topDelegations</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>         </span><span class=kd>const</span><span class=w> </span><span class=nx>top</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nComparison with Top Delegations:&#39;</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Number of top delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>top</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>         </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Number of bottom delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>         </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>top</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>           </span><span class=kd>const</span><span class=w> </span><span class=nx>lowestTop</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>top</span><span class=p>.</span><span class=nx>delegations</span><span class=p>[</span><span class=nx>top</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>].</span><span class=nx>amount</span><span class=p>;</span>
<span class=w>           </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest top delegation:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>lowestTop</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>           </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>             </span><span class=s1>&#39;Lowest top delegation in DEV:&#39;</span><span class=p>,</span>
<span class=w>             </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>lowestTop</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>             </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>           </span><span class=p>);</span>
<span class=w>         </span><span class=p>}</span>
<span class=w>       </span><span class=p>}</span>
<span class=w>     </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>       </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNo bottom delegations found for this candidate&#39;</span><span class=p>);</span>
<span class=w>     </span><span class=p>}</span>

<span class=w>     </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>   </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>     </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying bottom delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>     </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>   </span><span class=p>}</span>
<span class=w> </span><span class=p>};</span>

<span class=w> </span><span class=c1>// Execute the script</span>
<span class=w> </span><span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>   </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>   </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w> </span><span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>candidateInfo</strong>(AccountId20) - returns candidate information such as the candidate's bond, delegation count, and more for all candidates or for a given candidate's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=25:3><input checked=checked id=__tabbed_25_1 name=__tabbed_25 type=radio><input id=__tabbed_25_2 name=__tabbed_25 type=radio><input id=__tabbed_25_3 name=__tabbed_25 type=radio><div class=tabbed-labels><label for=__tabbed_25_1>Parameters</label><label for=__tabbed_25_2>Returns</label><label for=__tabbed_25_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - The collator address to query. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>Information about the relevant collator including collator bond, total backing stake, delegation count, lowest included delegation amount, collator status, and capacity information</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Example candidate address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query candidate info</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Lowest Top Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>info</span><span class=p>.</span><span class=nx>lowestTopDelegationAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Lowest Top Delegation in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>lowestTopDelegationAmount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Highest Bottom Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>info</span><span class=p>.</span><span class=nx>highestBottomDelegationAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Highest Bottom Delegation in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span>
<span class=w>          </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>highestBottomDelegationAmount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>        </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Lowest Bottom Delegation Amount:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>info</span><span class=p>.</span><span class=nx>lowestBottomDelegationAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Lowest Bottom Delegation in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span>
<span class=w>          </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>lowestBottomDelegationAmount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>        </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Top Capacity:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>topCapacity</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bottom Capacity:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bottomCapacity</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>      </span><span class=c1>// Get additional context</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCurrent Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>      </span><span class=c1>// Check if in selected candidates</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>isSelected</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>candidateAddress</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Is Selected Candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>isSelected</span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Get top delegations</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>topDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>topDelegations</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>top</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nTop Delegations Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>top</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Top Delegated:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>top</span><span class=p>.</span><span class=nx>total</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total Top Delegated in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>top</span><span class=p>.</span><span class=nx>total</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Get bottom delegations</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>bottomDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>bottomDelegations</span><span class=p>(</span><span class=nx>candidateAddress</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>bottom</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nBottom Delegations Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>bottom</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Bottom Delegated:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>bottom</span><span class=p>.</span><span class=nx>total</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total Bottom Delegated in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>bottom</span><span class=p>.</span><span class=nx>total</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Get auto-compounding delegations</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompounding</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>          </span><span class=nx>candidateAddress</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;\nAuto-compounding Delegations Count:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>autoCompounding</span><span class=p>.</span><span class=nx>length</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Calculate some total statistics</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>totalStake</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=p>(</span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>isSome</span>
<span class=w>          </span><span class=o>?</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>total</span><span class=p>)</span>
<span class=w>          </span><span class=o>:</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>))</span><span class=w> </span><span class=o>+</span>
<span class=w>        </span><span class=p>(</span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>isSome</span>
<span class=w>          </span><span class=o>?</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>bottomDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>().</span><span class=nx>total</span><span class=p>)</span>
<span class=w>          </span><span class=o>:</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>));</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nTotal Statistics:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalStake</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total Stake in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalStake</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Check recent points (last 3 rounds)</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nRecent Points:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>      </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mf>3</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>roundNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span><span class=p>;</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>          </span><span class=nx>roundNumber</span><span class=p>,</span>
<span class=w>          </span><span class=nx>candidateAddress</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Round </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>points</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> points`</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNo candidate information found for this address&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying candidate info:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>candidatePool</strong>() - returns a list of each of the candidates in the pool and their total backing stake</summary> <div class="tabbed-set tabbed-alternate" data-tabs=26:3><input checked=checked id=__tabbed_26_1 name=__tabbed_26 type=radio><input id=__tabbed_26_2 name=__tabbed_26 type=radio><input id=__tabbed_26_3 name=__tabbed_26 type=radio><div class=tabbed-labels><label for=__tabbed_26_1>Parameters</label><label for=__tabbed_26_2>Returns</label><label for=__tabbed_26_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p>A list of each of the candidates in the pool and their total backing stake</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Query candidate pool</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidatePool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidatePool</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCandidate Pool Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidatePool</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Sort candidates by amount, handling BigInt comparison correctly</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>sortedCandidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>candidatePool</span><span class=p>].</span><span class=nx>sort</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>amountA</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>amount</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>amountB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>b</span><span class=p>.</span><span class=nx>amount</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>amountA</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=nx>amountB</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>amountA</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nx>amountB</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=o>-</span><span class=mf>1</span><span class=p>;</span>
<span class=w>      </span><span class=k>return</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>});</span>

<span class=w>    </span><span class=c1>// Get selected candidates for comparison</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedSet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Set</span><span class=p>(</span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>toString</span><span class=p>()));</span>

<span class=w>    </span><span class=c1>// Track total stake in pool</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>totalStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Display each candidate&#39;s information</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDetailed Candidate Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>]</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>sortedCandidates</span><span class=p>.</span><span class=nx>entries</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>owner</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidate</span><span class=p>;</span>
<span class=w>      </span><span class=nx>totalStake</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>amount</span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Get candidate info</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>owner</span><span class=p>);</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nCandidate #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total Stake in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Is Selected Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedSet</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>()));</span>

<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Self Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Self Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Get auto-compounding delegations count</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompounding</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span><span class=nx>owner</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compounding Delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>autoCompounding</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Get recent points (last 3 rounds)</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Recent Points:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mf>3</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>roundNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span><span class=p>;</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>          </span><span class=nx>roundNumber</span><span class=p>,</span>
<span class=w>          </span><span class=nx>owner</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`  Round </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>points</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb> points`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>points</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Average Points (last 3 rounds):&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalPoints</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>3</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Display pool statistics</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nPool Statistics:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidatePool</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Selected Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Stake in Pool:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalStake</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Total Stake in Pool (DEV):&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>totalStake</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Average Stake per Candidate (DEV):&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>totalStake</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>candidatePool</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Calculate stake distribution</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>stakes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>sortedCandidates</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>amount</span><span class=p>));</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>median</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>stakes</span><span class=p>[</span><span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nx>stakes</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>2</span><span class=p>)];</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>highest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>stakes</span><span class=p>[</span><span class=mf>0</span><span class=p>];</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>lowest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>stakes</span><span class=p>[</span><span class=nx>stakes</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>];</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStake Distribution:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Highest Stake (DEV):&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>highest</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Median Stake (DEV):&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>median</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest Stake (DEV):&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>lowest</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying candidate pool:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>candidateState</strong>(AccountId20) - <em>deprecated as of runtime 1200</em> - use <code>candidateInfo</code> instead</summary> <div class="tabbed-set tabbed-alternate" data-tabs=27:3><input checked=checked id=__tabbed_27_1 name=__tabbed_27 type=radio><input id=__tabbed_27_2 name=__tabbed_27 type=radio><input id=__tabbed_27_3 name=__tabbed_27 type=radio><div class=tabbed-labels><label for=__tabbed_27_1>Parameters</label><label for=__tabbed_27_2>Returns</label><label for=__tabbed_27_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the collator account to query</li> </ul> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1200</em> - use <code>candidateInfo</code> instead</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1200</em> - use <code>candidateInfo</code> instead</p> </div> </div> </div> </details> <details class=function> <summary><strong>collatorCommission</strong>() - returns the commission percent taken off of rewards for all collators</summary> <div class="tabbed-set tabbed-alternate" data-tabs=28:3><input checked=checked id=__tabbed_28_1 name=__tabbed_28 type=radio><input id=__tabbed_28_2 name=__tabbed_28 type=radio><input id=__tabbed_28_3 name=__tabbed_28 type=radio><div class=tabbed-labels><label for=__tabbed_28_1>Parameters</label><label for=__tabbed_28_2>Returns</label><label for=__tabbed_28_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p>The percent collator commission, e.g. <code>20.00%</code> </p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Query collator commission</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>commission</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>collatorCommission</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Get the current round for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Get selected candidates count for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Commission Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Commission Rate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>commission</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Per Billion&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=c1>// Convert to percentage (commission is stored as parts per billion)</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>commissionPercent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nb>Number</span><span class=p>(</span><span class=nx>commission</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Commission Percentage:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>commissionPercent</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNetwork Context:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Active Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Example calculation for a reward</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>exampleReward</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>1000000000000000000</span><span class=p>);</span><span class=w> </span><span class=c1>// 1 DEV</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>commissionAmount</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=p>(</span><span class=nx>exampleReward</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>commission</span><span class=p>))</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>1000000000</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nExample Reward Calculation:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;For a reward of 1 DEV:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Commission Amount:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>commissionAmount</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Remaining Reward:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>((</span><span class=nx>exampleReward</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>commissionAmount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying collator commission:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>collatorState2</strong>(AccountId20) - <em>deprecated as of runtime 1001</em> - use <code>candidateInfo</code> instead</summary> <div class="tabbed-set tabbed-alternate" data-tabs=29:3><input checked=checked id=__tabbed_29_1 name=__tabbed_29 type=radio><input id=__tabbed_29_2 name=__tabbed_29 type=radio><input id=__tabbed_29_3 name=__tabbed_29 type=radio><div class=tabbed-labels><label for=__tabbed_29_1>Parameters</label><label for=__tabbed_29_2>Returns</label><label for=__tabbed_29_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the collator to query</li> </ul> </div> <div class=tabbed-block> <p>Deprecated as of runtime 1001* - use <code>candidateInfo</code> instead</p> </div> <div class=tabbed-block> <p>Deprecated as of runtime 1001* - use <code>candidateInfo</code> instead</p> </div> </div> </div> </details> <details class=function> <summary><strong>delayedPayouts</strong>(u32) - returns the delayed payouts for all rounds or for a given round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=30:3><input checked=checked id=__tabbed_30_1 name=__tabbed_30 type=radio><input id=__tabbed_30_2 name=__tabbed_30 type=radio><input id=__tabbed_30_3 name=__tabbed_30 type=radio><div class=tabbed-labels><label for=__tabbed_30_1>Parameters</label><label for=__tabbed_30_2>Returns</label><label for=__tabbed_30_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>u32</code> - the round to query. If omitted, the latest round information will be returned</li> </ul> </div> <div class=tabbed-block> <p>The round issuance, the total staking reward, and collator commission.</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query several recent rounds for delayed payouts</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>roundsToCheck</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>rounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span>
<span class=w>      </span><span class=p>{</span><span class=w> </span><span class=nx>length</span><span class=o>:</span><span class=w> </span><span class=nx>roundsToCheck</span><span class=w> </span><span class=p>},</span>
<span class=w>      </span><span class=p>(</span><span class=nx>_</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;\nChecking Delayed Payouts for the Last&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>roundsToCheck</span><span class=p>,</span>
<span class=w>      </span><span class=s1>&#39;Rounds:&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Track statistics</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>totalPayouts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>totalRewards</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>

<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>roundNumber</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>rounds</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nRound </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>

<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>delayedPayout</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delayedPayouts</span><span class=p>(</span><span class=nx>roundNumber</span><span class=p>);</span>

<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delayedPayout</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>payout</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delayedPayout</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>

<span class=w>        </span><span class=c1>// Debug log to see the structure</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Raw payout data:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>payout</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>(),</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>)</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Safely access the data</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>payoutData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>payout</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>();</span>

<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Found Delayed Payout:&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>payoutData</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>totalPayouts</span><span class=o>++</span><span class=p>;</span>

<span class=w>          </span><span class=c1>// Calculate total rewards if data is available</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>colReward</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>delReward</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>roundReward</span><span class=w> </span><span class=o>=</span>
<span class=w>              </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>colReward</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>delReward</span><span class=p>);</span>
<span class=w>            </span><span class=nx>totalRewards</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>roundReward</span><span class=p>;</span>

<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>toCollator</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator Reward:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>colReward</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Collator Reward in DEV:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>colReward</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Delegator Reward:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>delReward</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Total Delegator Reward in DEV:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>delReward</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Round Reward:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>roundReward</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Total Round Reward in DEV:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=p>(</span><span class=nx>roundReward</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>            </span><span class=p>);</span>

<span class=w>            </span><span class=c1>// Get collator information if available</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>toCollator</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>                </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>                  </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>toCollator</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Information:&#39;</span><span class=p>);</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span>
<span class=w>                  </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Self Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>                </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                  </span><span class=s1>&#39;Self Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>                  </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>                  </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>                </span><span class=p>);</span>
<span class=w>              </span><span class=p>}</span>

<span class=w>              </span><span class=c1>// Get awarded points for context</span>
<span class=w>              </span><span class=kd>const</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>                </span><span class=nx>roundNumber</span><span class=p>,</span>
<span class=w>                </span><span class=nx>payoutData</span><span class=p>.</span><span class=nx>toCollator</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Points earned in round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>points</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No delayed payout found&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Display statistics</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nPayout Statistics:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Rounds with Payouts:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalPayouts</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Average Payouts per Round:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>totalPayouts</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>roundsToCheck</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>totalPayouts</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Average Reward per Payout:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalRewards</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalPayouts</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total Rewards:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalRewards</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying delayed payouts:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>delegationScheduledRequests</strong>(AccountId20) - returns the outstanding scheduled delegation requests for all collators or for a given collator's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=31:3><input checked=checked id=__tabbed_31_1 name=__tabbed_31 type=radio><input id=__tabbed_31_2 name=__tabbed_31 type=radio><input id=__tabbed_31_3 name=__tabbed_31 type=radio><div class=tabbed-labels><label for=__tabbed_31_1>Parameters</label><label for=__tabbed_31_2>Returns</label><label for=__tabbed_31_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the address of the collator. If omitted, information about all collators will be returned</li> </ul> </div> <div class=tabbed-block> <p>The set of pending scheduled delegation requests including the delegator's address, the action requested, and eligible block at which the action can be executed.</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Example collator address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current round information for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get collator info for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Current Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Query scheduled delegation requests</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>requests</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegationScheduledRequests</span><span class=p>(</span>
<span class=w>        </span><span class=nx>collatorAddress</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nScheduled Delegation Requests:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>requests</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total requests:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>requests</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Process each request</span>
<span class=w>      </span><span class=nx>requests</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>request</span><span class=p>,</span><span class=w> </span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nRequest #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>delegator</span><span class=p>,</span><span class=w> </span><span class=nx>whenExecutable</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>request</span><span class=p>;</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Executable at round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>whenExecutable</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Rounds until executable:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>whenExecutable</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>currentRound</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Handle different types of actions</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>isDecrease</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>asDecrease</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Action: Decrease&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>            </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>isRevoke</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>amount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>asRevoke</span><span class=p>;</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Action: Revoke&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>            </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>});</span>

<span class=w>      </span><span class=c1>// Calculate some statistics</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>totalDecreaseAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>totalRevokeAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>decreaseCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>revokeCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=w>      </span><span class=nx>requests</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>request</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>isDecrease</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>totalDecreaseAmount</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asDecrease</span><span class=p>);</span>
<span class=w>          </span><span class=nx>decreaseCount</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>isRevoke</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>totalRevokeAmount</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asRevoke</span><span class=p>);</span>
<span class=w>          </span><span class=nx>revokeCount</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>});</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nRequest Statistics:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Decrease requests:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>decreaseCount</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>decreaseCount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total decrease amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>totalDecreaseAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total decrease amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>totalDecreaseAmount</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Average decrease amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span>
<span class=w>            </span><span class=nx>totalDecreaseAmount</span><span class=w> </span><span class=o>/</span>
<span class=w>            </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>decreaseCount</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>            </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>          </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Revoke requests:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>revokeCount</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>revokeCount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total revoke amount:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=nx>totalRevokeAmount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Total revoke amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>totalRevokeAmount</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Average revoke amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span>
<span class=w>            </span><span class=nx>totalRevokeAmount</span><span class=w> </span><span class=o>/</span>
<span class=w>            </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>revokeCount</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>            </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>          </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Show impact on collator&#39;s delegation</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>totalImpact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>totalDecreaseAmount</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>totalRevokeAmount</span><span class=p>;</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nTotal Impact:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total amount to be removed:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalImpact</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total amount to be removed in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalImpact</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No scheduled delegation requests found&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying delegation requests:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>delegatorState</strong>(AccountId20) - returns delegator information such as their delegations, delegation status, and total delegation amount for all delegators or for a given delegator's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=32:3><input checked=checked id=__tabbed_32_1 name=__tabbed_32 type=radio><input id=__tabbed_32_2 name=__tabbed_32 type=radio><input id=__tabbed_32_3 name=__tabbed_32 type=radio><div class=tabbed-labels><label for=__tabbed_32_1>Parameters</label><label for=__tabbed_32_2>Returns</label><label for=__tabbed_32_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - the address of the delegator to query</li> </ul> </div> <div class=tabbed-block> <p>Delegator state information including the collators delegated and their respective amounts</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Example delegator address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_DELEGATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get current round information for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegatorAddress</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Query delegator state</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorState</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegatorState</span><span class=p>(</span><span class=nx>delegatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>state</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegatorState</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>delegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>delegations</span><span class=p>;</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegator Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Calculate total delegated amount</span>
<span class=w>      </span><span class=kd>let</span><span class=w> </span><span class=nx>totalDelegated</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>      </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>totalDelegated</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>d</span><span class=p>.</span><span class=nx>amount</span><span class=p>);</span>
<span class=w>      </span><span class=p>});</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Amount Delegated:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalDelegated</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total Amount Delegated in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>totalDelegated</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Show detailed delegation information</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDetailed Delegations:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>]</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>entries</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nDelegation #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Get collator information</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span>
<span class=w>          </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator Total Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Collator Delegation Count:&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=c1>// Check auto-compound setting</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>          </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>            </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span>
<span class=w>          </span><span class=p>(</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>            </span><span class=nx>d</span><span class=p>.</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>            </span><span class=nx>delegatorAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>autoCompound</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Auto-compound Percentage:&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>autoCompound</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>            </span><span class=s1>&#39;%&#39;</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Auto-compound: Not set&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=c1>// Check for scheduled requests</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>requests</span><span class=w> </span><span class=o>=</span>
<span class=w>          </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegationScheduledRequests</span><span class=p>(</span>
<span class=w>            </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>delegatorRequests</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>requests</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span>
<span class=w>          </span><span class=p>(</span><span class=nx>r</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>            </span><span class=nx>r</span><span class=p>.</span><span class=nx>delegator</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span><span class=w> </span><span class=o>===</span>
<span class=w>            </span><span class=nx>delegatorAddress</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>delegatorRequests</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nPending Requests:&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>delegatorRequests</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>request</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>              </span><span class=s1>&#39;Executable at round:&#39;</span><span class=p>,</span>
<span class=w>              </span><span class=nx>request</span><span class=p>.</span><span class=nx>whenExecutable</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>            </span><span class=p>);</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>isDecrease</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Action: Decrease&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span>
<span class=w>                </span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asDecrease</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>                </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>                </span><span class=p>(</span>
<span class=w>                  </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asDecrease</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>                </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>                </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>isRevoke</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Action: Revoke&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asRevoke</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>              </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>                </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>                </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>action</span><span class=p>.</span><span class=nx>asRevoke</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>                </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>              </span><span class=p>);</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>          </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Calculate statistics</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>amounts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>d</span><span class=p>.</span><span class=nx>amount</span><span class=p>));</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>averageDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>totalDelegated</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>maxDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=nx>b</span><span class=p>),</span>
<span class=w>        </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>)</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>minDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span><span class=nx>a</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=nx>b</span><span class=p>),</span>
<span class=w>        </span><span class=nx>amounts</span><span class=p>[</span><span class=mf>0</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>)</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegation Statistics:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Average Delegation:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>averageDelegation</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Largest Delegation:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>maxDelegation</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Smallest Delegation:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nx>minDelegation</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Get network context</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNetwork Context:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Selected Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Delegating to Selected Collators:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span>
<span class=w>          </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>some</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>())</span>
<span class=w>        </span><span class=p>).</span><span class=nx>length</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNo delegator state found for this address&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying delegator state:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>enabledMarkingOffline</strong>() - returns a boolean indicating whether or not the marking offline feature for inactive collators is enabled</summary> <div class="tabbed-set tabbed-alternate" data-tabs=33:3><input checked=checked id=__tabbed_33_1 name=__tabbed_33 type=radio><input id=__tabbed_33_2 name=__tabbed_33 type=radio><input id=__tabbed_33_3 name=__tabbed_33 type=radio><div class=tabbed-labels><label for=__tabbed_33_1>Parameters</label><label for=__tabbed_33_2>Returns</label><label for=__tabbed_33_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>boolean</code> - Indicating whether or not the marking offline feature for inactive collators is enabled</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get marking offline status with the correct method name</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>isEnabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>enableMarkingOffline</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Marking Offline Feature Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>isEnabled</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying marking offline status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>inflationConfig</strong>() - returns the inflation configuration</summary> <div class="tabbed-set tabbed-alternate" data-tabs=34:3><input checked=checked id=__tabbed_34_1 name=__tabbed_34 type=radio><input id=__tabbed_34_2 name=__tabbed_34 type=radio><input id=__tabbed_34_3 name=__tabbed_34 type=radio><div class=tabbed-labels><label for=__tabbed_34_1>Parameters</label><label for=__tabbed_34_2>Returns</label><label for=__tabbed_34_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p>A JSON object that contains the minimum, ideal, and maximum inflation parameters in each of the following thresholds: expected, annual, and round. </p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Query inflation configuration</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>inflationConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>inflationConfig</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Get current round info for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nInflation Configuration (Human Readable):&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>inflationConfig</span><span class=p>.</span><span class=nx>toHuman</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>config</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>));</span>

<span class=w>    </span><span class=c1>// Access the nested structure correctly</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>rawConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>inflationConfig</span><span class=p>.</span><span class=nx>toJSON</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDetailed Configuration Breakdown:&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Expected rewards</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nExpected Rewards:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Min:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>expect</span><span class=p>.</span><span class=nx>min</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Ideal:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>expect</span><span class=p>.</span><span class=nx>ideal</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Max:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>expect</span><span class=p>.</span><span class=nx>max</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Annual inflation rates (divide by 10^7 to get percentage)</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nAnnual Inflation Rates:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Min:&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>min</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Ideal:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>ideal</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Max:&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>max</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Round inflation rates</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nRound Inflation Rates:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Min:&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>round</span><span class=p>.</span><span class=nx>min</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>4</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Ideal:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>round</span><span class=p>.</span><span class=nx>ideal</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>4</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Max:&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>round</span><span class=p>.</span><span class=nx>max</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>4</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Example calculations for 100 DEV with annual rates</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>exampleStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100n</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>);</span><span class=w> </span><span class=c1>// 100 DEV</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nExample Annual Returns for 100 DEV stake:&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Convert to BigInt for calculations</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>annualMin</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>min</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>exampleStake</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>annualIdeal</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>ideal</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>exampleStake</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>annualMax</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>rawConfig</span><span class=p>.</span><span class=nx>annual</span><span class=p>.</span><span class=nx>max</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>exampleStake</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=nx>_000_000</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Min:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>annualMin</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;DEV&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Ideal:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>annualIdeal</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;DEV&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Max:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>annualMax</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;DEV&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying inflation configuration:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>nominatorState2</strong>(AccountId20) - <em>deprecated as of runtime 1001</em> - use <code>delegatorState</code> instead</summary> <div class="tabbed-set tabbed-alternate" data-tabs=35:3><input checked=checked id=__tabbed_35_1 name=__tabbed_35 type=radio><input id=__tabbed_35_2 name=__tabbed_35 type=radio><input id=__tabbed_35_3 name=__tabbed_35 type=radio><div class=tabbed-labels><label for=__tabbed_35_1>Parameters</label><label for=__tabbed_35_2>Returns</label><label for=__tabbed_35_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - The account to query</li> </ul> </div> <div class=tabbed-block> <p>Deprecated as of runtime 1001* - use <code>delegatorState</code> instead</p> </div> <div class=tabbed-block> <p>Deprecated as of runtime 1001* - use <code>delegatorState</code> instead</p> </div> </div> </div> </details> <details class=function> <summary><strong>palletVersion</strong>() - returns the current pallet version</summary> <div class="tabbed-set tabbed-alternate" data-tabs=36:3><input checked=checked id=__tabbed_36_1 name=__tabbed_36 type=radio><input id=__tabbed_36_2 name=__tabbed_36 type=radio><input id=__tabbed_36_3 name=__tabbed_36 type=radio><div class=tabbed-labels><label for=__tabbed_36_1>Parameters</label><label for=__tabbed_36_2>Returns</label><label for=__tabbed_36_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u16</code> - current pallet version</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Query pallet version</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>palletVersion</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Parachain Staking Pallet Version:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>version</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying pallet version:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>points</strong>(u32) - returns the total points awarded to collators for block production in all rounds or for a given round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=37:3><input checked=checked id=__tabbed_37_1 name=__tabbed_37 type=radio><input id=__tabbed_37_2 name=__tabbed_37 type=radio><input id=__tabbed_37_3 name=__tabbed_37 type=radio><div class=tabbed-labels><label for=__tabbed_37_1>Parameters</label><label for=__tabbed_37_2>Returns</label><label for=__tabbed_37_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>u32</code> - a round number. If omitted, the data for the last three rounds will be returned</li> </ul> </div> <div class=tabbed-block> <ul> <li><code>u32</code> - total points awarded to collators in the given round </li> </ul> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Query points for several recent rounds</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>roundsToCheck</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>rounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Array</span><span class=p>.</span><span class=kr>from</span><span class=p>(</span>
<span class=w>      </span><span class=p>{</span><span class=w> </span><span class=nx>length</span><span class=o>:</span><span class=w> </span><span class=nx>roundsToCheck</span><span class=w> </span><span class=p>},</span>
<span class=w>      </span><span class=p>(</span><span class=nx>_</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentRound</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get selected candidates for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Number of Selected Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Check each round</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>roundNumber</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>rounds</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nPoints for Round </span><span class=si>${</span><span class=nx>roundNumber</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>roundPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>points</span><span class=p>(</span><span class=nx>roundNumber</span><span class=p>);</span>

<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>()</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;No points recorded for this round&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>        </span><span class=c1>// Get individual collator points for this round</span>
<span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>collatorPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>collator</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>            </span><span class=nx>roundNumber</span><span class=p>,</span>
<span class=w>            </span><span class=nx>collator</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>points</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>()</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>              </span><span class=nx>collator</span><span class=o>:</span><span class=w> </span><span class=nx>collator</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>              </span><span class=nx>points</span><span class=o>:</span><span class=w> </span><span class=nx>points</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>(),</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>          </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=c1>// Sort collators by points</span>
<span class=w>        </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>sort</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>b</span><span class=p>.</span><span class=nx>points</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>points</span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Display collator points</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Performance:&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(({</span><span class=w> </span><span class=nx>collator</span><span class=p>,</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Collator </span><span class=si>${</span><span class=nx>collator</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>points</span><span class=si>}</span><span class=sb> points`</span><span class=p>);</span>
<span class=w>          </span><span class=p>});</span>

<span class=w>          </span><span class=c1>// Calculate statistics</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span>
<span class=w>            </span><span class=p>(</span><span class=nx>sum</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>points</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>sum</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>points</span><span class=p>,</span>
<span class=w>            </span><span class=mf>0</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>averagePoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>totalPoints</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>maxPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>[</span><span class=mf>0</span><span class=p>].</span><span class=nx>points</span><span class=p>;</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>minPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>[</span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>].</span><span class=nx>points</span><span class=p>;</span>

<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nRound Statistics:&#39;</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Active Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorPoints</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Average Points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>averagePoints</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>));</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Highest Points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxPoints</span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Lowest Points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minPoints</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying points:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>round</strong>() - returns the current round number, the first block of the current round, and the length of the round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=38:3><input checked=checked id=__tabbed_38_1 name=__tabbed_38 type=radio><input id=__tabbed_38_2 name=__tabbed_38 type=radio><input id=__tabbed_38_3 name=__tabbed_38 type=radio><div class=tabbed-labels><label for=__tabbed_38_1>Parameters</label><label for=__tabbed_38_2>Returns</label><label for=__tabbed_38_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p>Returns the current round number, the first block of the current round, and the length of the round</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Query round information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>roundInfo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Round Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>roundInfo</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;First Block of Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>roundInfo</span><span class=p>.</span><span class=nx>first</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Round Length:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>roundInfo</span><span class=p>.</span><span class=nx>length</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Calculate some additional useful information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentBlock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>rpc</span><span class=p>.</span><span class=nx>chain</span><span class=p>.</span><span class=nx>getBlock</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>currentBlockNumber</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentBlock</span><span class=p>.</span><span class=nx>block</span><span class=p>.</span><span class=nx>header</span><span class=p>.</span><span class=nx>number</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>

<span class=w>    </span><span class=c1>// Calculate blocks remaining in current round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>blocksIntoRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>currentBlockNumber</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>roundInfo</span><span class=p>.</span><span class=nx>first</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>blocksRemaining</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>roundInfo</span><span class=p>.</span><span class=nx>length</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>blocksIntoRound</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nAdditional Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Block:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>currentBlockNumber</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Blocks Into Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>blocksIntoRound</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Blocks Remaining in Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>blocksRemaining</span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying round information:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>selectedCandidates</strong>() - returns the collator candidates selected to be in the active set for the current round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=39:3><input checked=checked id=__tabbed_39_1 name=__tabbed_39 type=radio><input id=__tabbed_39_2 name=__tabbed_39 type=radio><input id=__tabbed_39_3 name=__tabbed_39 type=radio><div class=tabbed-labels><label for=__tabbed_39_1>Parameters</label><label for=__tabbed_39_2>Returns</label><label for=__tabbed_39_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p>A set of <code>AccountId20</code>s - collator candidates selected to be in the active set for the current round </p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get current round for context</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>round</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>round</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Current Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=c1>// Query selected candidates</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nSelected Candidates:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Selected:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get detailed information for each candidate</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDetailed Candidate Information:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>]</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>entries</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidate</span><span class=p>);</span>

<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nCandidate #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>candidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Count:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Status:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>        </span><span class=c1>// Get recent points for context (last 3 rounds)</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>currentRound</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>round</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>recentPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Recent Points:&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>let</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mf>3</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kd>const</span><span class=w> </span><span class=nx>roundPoints</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>awardedPts</span><span class=p>(</span>
<span class=w>            </span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span><span class=p>,</span>
<span class=w>            </span><span class=nx>candidate</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`  Round </span><span class=si>${</span><span class=nx>currentRound</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nx>i</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>          </span><span class=nx>recentPoints</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>roundPoints</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Points (last 3 rounds):&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>recentPoints</span><span class=p>);</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Calculate some statistics</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>totalBond</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>totalDelegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kd>const</span><span class=w> </span><span class=nx>candidate</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>candidate</span><span class=p>);</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>        </span><span class=nx>totalBond</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>);</span>
<span class=w>        </span><span class=nx>totalDelegations</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toNumber</span><span class=p>();</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollective Statistics:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Bonded:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalBond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Total Bonded in DEV:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>totalBond</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Average Bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span>
<span class=w>        </span><span class=nx>totalBond</span><span class=w> </span><span class=o>/</span>
<span class=w>        </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span><span class=w> </span><span class=o>/</span>
<span class=w>        </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)</span>
<span class=w>      </span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Average Delegations per Candidate:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>totalDelegations</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mf>2</span><span class=p>)</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying selected candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>topDelegations</strong>(AccountId20) - returns at the most the top 300 delegations for all collators or for a given collator's address</summary> <div class="tabbed-set tabbed-alternate" data-tabs=40:3><input checked=checked id=__tabbed_40_1 name=__tabbed_40 type=radio><input id=__tabbed_40_2 name=__tabbed_40 type=radio><input id=__tabbed_40_3 name=__tabbed_40 type=radio><div class=tabbed-labels><label for=__tabbed_40_1>Parameters</label><label for=__tabbed_40_2>Returns</label><label for=__tabbed_40_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li><code>AccountId20</code> - Address of the given collator. If no address is provided then the top 300 delegations for all collators is returned.</li> </ul> </div> <div class=tabbed-block> <p>Returns up to the top 300 delegations for a given collator, including the address of the delegator and the amount delegated</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Example collator address</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>collatorAddress</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;INSERT_COLLATOR_ADDRESS&#39;</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Get collator info first</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>candidateInfo</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateInfo</span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Query Parameters:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Collator address:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>candidateInfo</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nCollator Information:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>delegationCount</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Self bond:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Self bond in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nx>bond</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Query top delegations</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>topDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>topDelegations</span><span class=p>(</span><span class=nx>collatorAddress</span><span class=p>);</span>

<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>isSome</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>delegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>topDelegations</span><span class=p>.</span><span class=nx>unwrap</span><span class=p>();</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nTop Delegations:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total delegations found:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total amount delegated:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>delegations</span><span class=p>.</span><span class=nx>total</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Total amount delegated in DEV:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>total</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>        </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Sort delegations by amount in descending order</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>delegations</span><span class=p>].</span><span class=nx>sort</span><span class=p>(</span>
<span class=w>        </span><span class=p>(</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>b</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>a</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span>
<span class=w>      </span><span class=p>);</span>

<span class=w>      </span><span class=c1>// Display each delegation</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegation Details:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>delegation</span><span class=p>,</span><span class=w> </span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`\nDelegation #</span><span class=si>${</span><span class=nx>index</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=si>}</span><span class=sb>:`</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>owner</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegation</span><span class=p>.</span><span class=nx>amount</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=p>});</span>

<span class=w>      </span><span class=c1>// Calculate statistics</span>
<span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>amounts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>d</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>d</span><span class=p>.</span><span class=nx>amount</span><span class=p>));</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>total</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=p>,</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>));</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>average</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>total</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>highest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>[</span><span class=mf>0</span><span class=p>];</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>lowest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>[</span><span class=nx>amounts</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>];</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>median</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>amounts</span><span class=p>[</span><span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nx>amounts</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>2</span><span class=p>)];</span>

<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nDelegation Statistics:&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Average delegation:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>average</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Highest delegation:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>highest</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Median delegation:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>median</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Lowest delegation:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span><span class=nx>lowest</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>          </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>        </span><span class=p>);</span>

<span class=w>        </span><span class=c1>// Distribution analysis</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>totalDelegated</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>delegations</span><span class=p>.</span><span class=nx>total</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStake Distribution:&#39;</span><span class=p>);</span>
<span class=w>        </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>          </span><span class=s1>&#39;Top 5 delegators control:&#39;</span><span class=p>,</span>
<span class=w>          </span><span class=p>(</span>
<span class=w>            </span><span class=p>(</span><span class=nx>amounts</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=mf>5</span><span class=p>).</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=p>,</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>))</span><span class=w> </span><span class=o>*</span>
<span class=w>              </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>100</span><span class=p>))</span><span class=w> </span><span class=o>/</span>
<span class=w>            </span><span class=nx>totalDelegated</span>
<span class=w>          </span><span class=p>).</span><span class=nx>toString</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>sortedDelegations</span><span class=p>.</span><span class=nx>length</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mf>10</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>            </span><span class=s1>&#39;Top 10 delegators control:&#39;</span><span class=p>,</span>
<span class=w>            </span><span class=p>(</span>
<span class=w>              </span><span class=p>(</span><span class=nx>amounts</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=mf>10</span><span class=p>).</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span><span class=p>,</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>0</span><span class=p>))</span><span class=w> </span><span class=o>*</span>
<span class=w>                </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>100</span><span class=p>))</span><span class=w> </span><span class=o>/</span>
<span class=w>              </span><span class=nx>totalDelegated</span>
<span class=w>            </span><span class=p>).</span><span class=nx>toString</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span>
<span class=w>          </span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>      </span><span class=p>}</span>

<span class=w>      </span><span class=c1>// Check auto-compound settings</span>
<span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>autoCompoundDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>        </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>autoCompoundingDelegations</span><span class=p>(</span>
<span class=w>          </span><span class=nx>collatorAddress</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nAuto-compound Settings:&#39;</span><span class=p>);</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>        </span><span class=s1>&#39;Delegators with auto-compound:&#39;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>autoCompoundDelegations</span><span class=p>.</span><span class=nx>length</span>
<span class=w>      </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNo top delegations found for this collator&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying top delegations:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>total</strong>() - returns the total capital locked in the staking pallet</summary> <div class="tabbed-set tabbed-alternate" data-tabs=41:3><input checked=checked id=__tabbed_41_1 name=__tabbed_41 type=radio><input id=__tabbed_41_2 name=__tabbed_41 type=radio><input id=__tabbed_41_3 name=__tabbed_41 type=radio><div class=tabbed-labels><label for=__tabbed_41_1>Parameters</label><label for=__tabbed_41_2>Returns</label><label for=__tabbed_41_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u128</code> - returns the total capital locked in the staking pallet</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get total staked amount</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>totalStaked</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>total</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Total Staked:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>totalStaked</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalStaked</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get some context information</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>selectedCandidates</span><span class=p>();</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nNetwork Context:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Number of Selected Collators:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Get total issuance for percentage calculation</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>totalIssuance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>balances</span><span class=p>.</span><span class=nx>totalIssuance</span><span class=p>();</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>percentageStaked</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalStaked</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>100</span><span class=p>))</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalIssuance</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nStaking Metrics:&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Total Issuance:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalIssuance</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Percentage of Total Supply Staked:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>percentageStaked</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s1>&#39;%&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=c1>// Calculate average stake per collator</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>averageStakePerCollator</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>totalStaked</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>selectedCandidates</span><span class=p>.</span><span class=nx>length</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Average Stake per Collator:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nx>averageStakePerCollator</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;DEV&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying total staked:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>totalSelected</strong>() - returns the total number of collator candidates that can be selected for the active set</summary> <div class="tabbed-set tabbed-alternate" data-tabs=42:3><input checked=checked id=__tabbed_42_1 name=__tabbed_42 type=radio><input id=__tabbed_42_2 name=__tabbed_42 type=radio><input id=__tabbed_42_3 name=__tabbed_42 type=radio><div class=tabbed-labels><label for=__tabbed_42_1>Parameters</label><label for=__tabbed_42_2>Returns</label><label for=__tabbed_42_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the total number of collator candidates that can be selected for the active set</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get total number of collators that can be selected</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>totalSelected</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>totalSelected</span><span class=p>();</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Maximum Number of Collators that can be Selected:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>totalSelected</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying total selected:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <h3 id=constants>Pallet Constants<a class=headerlink href=#constants title="Permanent link">&para;</a></h3> <p>The parachain staking pallet includes the following read-only functions to obtain pallet constants:</p> <details class=function> <summary><strong>candidateBondLessDelay</strong>() - returns the number of rounds that must be waited until a candidate's scheduled request to decrease their self bond can be executed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=43:3><input checked=checked id=__tabbed_43_1 name=__tabbed_43 type=radio><input id=__tabbed_43_2 name=__tabbed_43 type=radio><input id=__tabbed_43_3 name=__tabbed_43 type=radio><div class=tabbed-labels><label for=__tabbed_43_1>Parameters</label><label for=__tabbed_43_2>Returns</label><label for=__tabbed_43_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the number of rounds that must be waited until a candidate's scheduled request to decrease their self bond can be executed</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the bond less delay constant</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delay</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>candidateBondLessDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Candidate Bond Less Delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;rounds&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying candidate bond less delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>defaultBlocksPerRound</strong>() - <em>deprecated as of runtime 1900</em> - returns the default number of blocks per round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=44:3><input checked=checked id=__tabbed_44_1 name=__tabbed_44 type=radio><input id=__tabbed_44_2 name=__tabbed_44 type=radio><input id=__tabbed_44_3 name=__tabbed_44 type=radio><div class=tabbed-labels><label for=__tabbed_44_1>Parameters</label><label for=__tabbed_44_2>Returns</label><label for=__tabbed_44_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> </div> </div> </details> <details class=function> <summary><strong>defaultCollatorCommission</strong>() - <em>deprecated as of runtime 1900</em> - returns the default commission due to collators</summary> <div class="tabbed-set tabbed-alternate" data-tabs=45:3><input checked=checked id=__tabbed_45_1 name=__tabbed_45 type=radio><input id=__tabbed_45_2 name=__tabbed_45 type=radio><input id=__tabbed_45_3 name=__tabbed_45 type=radio><div class=tabbed-labels><label for=__tabbed_45_1>Parameters</label><label for=__tabbed_45_2>Returns</label><label for=__tabbed_45_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> </div> </div> </details> <details class=function> <summary><strong>defaultParachainBondReservePercent</strong>() - <em>deprecated as of runtime 1900</em> - returns the default percent of inflation set aside for the parachain bond account</summary> <div class="tabbed-set tabbed-alternate" data-tabs=46:3><input checked=checked id=__tabbed_46_1 name=__tabbed_46 type=radio><input id=__tabbed_46_2 name=__tabbed_46 type=radio><input id=__tabbed_46_3 name=__tabbed_46 type=radio><div class=tabbed-labels><label for=__tabbed_46_1>Parameters</label><label for=__tabbed_46_2>Returns</label><label for=__tabbed_46_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 1900</em></p> </div> </div> </div> </details> <details class=function> <summary><strong>delegationBondLessDelay</strong>() - returns the number of rounds that must be waited until a scheduled request to decrease a delegation can be executed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=47:3><input checked=checked id=__tabbed_47_1 name=__tabbed_47 type=radio><input id=__tabbed_47_2 name=__tabbed_47 type=radio><input id=__tabbed_47_3 name=__tabbed_47 type=radio><div class=tabbed-labels><label for=__tabbed_47_1>Parameters</label><label for=__tabbed_47_2>Returns</label><label for=__tabbed_47_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the number of rounds that must be waited until a scheduled request to decrease a delegation can be executed</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the delegation bond less delay constant</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>delay</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>delegationBondLessDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Delegation Bond Less Delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>delay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;rounds&#39;</span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying delegation bond less delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>leaveCandidatesDelay</strong>() - returns the number of rounds that must be waited before a scheduled request for a candidate to leave the candidate pool can be executed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=48:3><input checked=checked id=__tabbed_48_1 name=__tabbed_48 type=radio><input id=__tabbed_48_2 name=__tabbed_48 type=radio><input id=__tabbed_48_3 name=__tabbed_48 type=radio><div class=tabbed-labels><label for=__tabbed_48_1>Parameters</label><label for=__tabbed_48_2>Returns</label><label for=__tabbed_48_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the number of rounds that must be waited before a scheduled request for a candidate to leave the candidate pool can be executed</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the leaveCandidatesDelay constant from the parachainStaking module</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>leaveCandidatesDelay</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>leaveCandidatesDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Leave Candidates Delay:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>leaveCandidatesDelay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;rounds&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying leave candidates delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>leaveDelegatorsDelay</strong>() - returns the number of rounds that must be waited before a scheduled request for a delegator to leave the set of delegators can be executed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=49:3><input checked=checked id=__tabbed_49_1 name=__tabbed_49 type=radio><input id=__tabbed_49_2 name=__tabbed_49 type=radio><input id=__tabbed_49_3 name=__tabbed_49 type=radio><div class=tabbed-labels><label for=__tabbed_49_1>Parameters</label><label for=__tabbed_49_2>Returns</label><label for=__tabbed_49_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the number of rounds that must be waited before a scheduled request for a delegator to leave the set of delegators can be executed</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the leaveDelegatorsDelay constant from the parachainStaking module</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>leaveDelegatorsDelay</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>leaveDelegatorsDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Leave Delegators Delay:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>leaveDelegatorsDelay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;rounds&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying leave delegators delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>maxBottomDelegationsPerCandidate</strong>() - returns the maximum number of bottom delegations per candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=50:3><input checked=checked id=__tabbed_50_1 name=__tabbed_50 type=radio><input id=__tabbed_50_2 name=__tabbed_50 type=radio><input id=__tabbed_50_3 name=__tabbed_50 type=radio><div class=tabbed-labels><label for=__tabbed_50_1>Parameters</label><label for=__tabbed_50_2>Returns</label><label for=__tabbed_50_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the maximum number of bottom delegations per candidate</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the maxBottomDelegationsPerCandidate constant from the parachainStaking module</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxBottomDelegationsPerCandidate</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxBottomDelegationsPerCandidate</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Max Bottom Delegations Per Candidate:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>maxBottomDelegationsPerCandidate</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Error querying max bottom delegations per candidate:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>error</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>maxCandidates</strong>() - returns the maximum number of candidates allowed in the candidate pool</summary> <div class="tabbed-set tabbed-alternate" data-tabs=51:3><input checked=checked id=__tabbed_51_1 name=__tabbed_51 type=radio><input id=__tabbed_51_2 name=__tabbed_51 type=radio><input id=__tabbed_51_3 name=__tabbed_51 type=radio><div class=tabbed-labels><label for=__tabbed_51_1>Parameters</label><label for=__tabbed_51_2>Returns</label><label for=__tabbed_51_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the maximum number of candidates allowed in the candidate pool</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the maximum number of candidates allowed</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxCandidates</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxCandidates</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Maximum Allowed Candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxCandidates</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying max candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>maxDelegationsPerDelegator</strong>() - returns the maximum number of delegations per delegator</summary> <div class="tabbed-set tabbed-alternate" data-tabs=52:3><input checked=checked id=__tabbed_52_1 name=__tabbed_52 type=radio><input id=__tabbed_52_2 name=__tabbed_52 type=radio><input id=__tabbed_52_3 name=__tabbed_52 type=radio><div class=tabbed-labels><label for=__tabbed_52_1>Parameters</label><label for=__tabbed_52_2>Returns</label><label for=__tabbed_52_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the maximum number of delegations per delegator</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the maximum number of delegations per delegator</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxDelegationsPerDelegator</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Maximum Delegations Per Delegator:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>maxDelegations</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying max delegations per delegator:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>maxOfflineRounds</strong>() - returns the number of rounds that must pass before a collator that has stopped producing blocks is marked as inactive</summary> <div class="tabbed-set tabbed-alternate" data-tabs=53:3><input checked=checked id=__tabbed_53_1 name=__tabbed_53 type=radio><input id=__tabbed_53_2 name=__tabbed_53 type=radio><input id=__tabbed_53_3 name=__tabbed_53 type=radio><div class=tabbed-labels><label for=__tabbed_53_1>Parameters</label><label for=__tabbed_53_2>Returns</label><label for=__tabbed_53_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the number of rounds that must pass before a collator that has stopped producing blocks is marked as inactive</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the maximum number of offline rounds</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxOfflineRounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxOfflineRounds</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Maximum Offline Rounds:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>maxOfflineRounds</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying max offline rounds:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>maxTopDelegationsPerCandidate</strong>() - returns the maximum number of top delegations per candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=54:3><input checked=checked id=__tabbed_54_1 name=__tabbed_54 type=radio><input id=__tabbed_54_2 name=__tabbed_54 type=radio><input id=__tabbed_54_3 name=__tabbed_54 type=radio><div class=tabbed-labels><label for=__tabbed_54_1>Parameters</label><label for=__tabbed_54_2>Returns</label><label for=__tabbed_54_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the maximum number of top delegations per candidate</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the maximum number of top delegations per candidate</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>maxTopDelegations</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>maxTopDelegationsPerCandidate</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Maximum Top Delegations Per Candidate:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>maxTopDelegations</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying max top delegations per candidate:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>minBlocksPerRound</strong>() - returns the minimum number of blocks per round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=55:3><input checked=checked id=__tabbed_55_1 name=__tabbed_55 type=radio><input id=__tabbed_55_2 name=__tabbed_55 type=radio><input id=__tabbed_55_3 name=__tabbed_55 type=radio><div class=tabbed-labels><label for=__tabbed_55_1>Parameters</label><label for=__tabbed_55_2>Returns</label><label for=__tabbed_55_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - returns the minimum number of blocks per round</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the minimum number of blocks per round</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>minBlocksPerRound</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>minBlocksPerRound</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Minimum Blocks Per Round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minBlocksPerRound</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying min blocks per round:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>minCandidateStk</strong>() - returns the minimum stake required for a candidate to be a collator candidate</summary> <div class="tabbed-set tabbed-alternate" data-tabs=56:3><input checked=checked id=__tabbed_56_1 name=__tabbed_56 type=radio><input id=__tabbed_56_2 name=__tabbed_56 type=radio><input id=__tabbed_56_3 name=__tabbed_56 type=radio><div class=tabbed-labels><label for=__tabbed_56_1>Parameters</label><label for=__tabbed_56_2>Returns</label><label for=__tabbed_56_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u128</code> - returns the minimum stake required for a candidate to be a collator candidate</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the minimum candidate stake required</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>minCandidateStake</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>minCandidateStk</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Minimum Candidate Stake:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>minCandidateStake</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;Wei&#39;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Minimum Candidate Stake in DEV:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>minCandidateStake</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying min candidate stake:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>minCollatorStk</strong>() - <em>deprecated as of runtime 2400</em> - returns the minimum stake required for a candidate to be in the active set</summary> <div class="tabbed-set tabbed-alternate" data-tabs=57:3><input checked=checked id=__tabbed_57_1 name=__tabbed_57 type=radio><input id=__tabbed_57_2 name=__tabbed_57 type=radio><input id=__tabbed_57_3 name=__tabbed_57 type=radio><div class=tabbed-labels><label for=__tabbed_57_1>Parameters</label><label for=__tabbed_57_2>Returns</label><label for=__tabbed_57_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 2400</em></p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 2400</em></p> </div> </div> </div> </details> <details class=function> <summary><strong>minDelegation</strong>() - returns the minimum delegation amount</summary> <div class="tabbed-set tabbed-alternate" data-tabs=58:3><input checked=checked id=__tabbed_58_1 name=__tabbed_58 type=radio><input id=__tabbed_58_2 name=__tabbed_58 type=radio><input id=__tabbed_58_3 name=__tabbed_58 type=radio><div class=tabbed-labels><label for=__tabbed_58_1>Parameters</label><label for=__tabbed_58_2>Returns</label><label for=__tabbed_58_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u128</code> - returns the minimum delegation amount</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the minimum delegation amount</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>minDelegation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>minDelegation</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Minimum Delegation Amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>minDelegation</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span><span class=w> </span><span class=s1>&#39;Wei&#39;</span><span class=p>);</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Minimum Delegation Amount in DEV:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=p>(</span><span class=nb>BigInt</span><span class=p>(</span><span class=nx>minDelegation</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=nb>BigInt</span><span class=p>(</span><span class=mf>10</span><span class=w> </span><span class=o>**</span><span class=w> </span><span class=mf>18</span><span class=p>)).</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying min delegation amount:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>minDelegatorStk</strong>() - <em>deprecated as of runtime 2500</em> - returns the minimum stake for an account to be a delegator</summary> <div class="tabbed-set tabbed-alternate" data-tabs=59:3><input checked=checked id=__tabbed_59_1 name=__tabbed_59 type=radio><input id=__tabbed_59_2 name=__tabbed_59 type=radio><input id=__tabbed_59_3 name=__tabbed_59 type=radio><div class=tabbed-labels><label for=__tabbed_59_1>Parameters</label><label for=__tabbed_59_2>Returns</label><label for=__tabbed_59_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 2500</em></p> </div> <div class=tabbed-block> <p><em>Deprecated as of runtime 2500</em></p> </div> </div> </div> </details> <details class=function> <summary><strong>minSelectedCandidates</strong>() - returns the minimum number of selected candidates in the active set every round</summary> <div class="tabbed-set tabbed-alternate" data-tabs=60:3><input checked=checked id=__tabbed_60_1 name=__tabbed_60 type=radio><input id=__tabbed_60_2 name=__tabbed_60 type=radio><input id=__tabbed_60_3 name=__tabbed_60 type=radio><div class=tabbed-labels><label for=__tabbed_60_1>Parameters</label><label for=__tabbed_60_2>Returns</label><label for=__tabbed_60_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - the minimum number of selected candidates in the active set every round</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the minimum number of selected candidates</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>minSelectedCandidates</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>minSelectedCandidates</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Minimum Selected Candidates:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>minSelectedCandidates</span><span class=p>.</span><span class=nx>toString</span><span class=p>()</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying min selected candidates:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>revokeDelegationDelay</strong>() - returns the number of rounds that must be waited before a scheduled request to revoke a delegation can be executed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=61:3><input checked=checked id=__tabbed_61_1 name=__tabbed_61 type=radio><input id=__tabbed_61_2 name=__tabbed_61 type=radio><input id=__tabbed_61_3 name=__tabbed_61 type=radio><div class=tabbed-labels><label for=__tabbed_61_1>Parameters</label><label for=__tabbed_61_2>Returns</label><label for=__tabbed_61_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - the number of rounds that must be waited before a scheduled request to revoke a delegation can be executed</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the revoke delegation delay</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>revokeDelegationDelay</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>revokeDelegationDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Revoke Delegation Delay:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>revokeDelegationDelay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;rounds&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying revoke delegation delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <details class=function> <summary><strong>rewardPaymentDelay</strong>() - returns the number of rounds that must be waited after which block authors are rewarded</summary> <div class="tabbed-set tabbed-alternate" data-tabs=62:3><input checked=checked id=__tabbed_62_1 name=__tabbed_62 type=radio><input id=__tabbed_62_2 name=__tabbed_62 type=radio><input id=__tabbed_62_3 name=__tabbed_62 type=radio><div class=tabbed-labels><label for=__tabbed_62_1>Parameters</label><label for=__tabbed_62_2>Returns</label><label for=__tabbed_62_3>Polkadot.js API Example</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>None</p> </div> <div class=tabbed-block> <p><code>u32</code> - The number of rounds that must be waited after which block authors are rewarded</p> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>,</span><span class=w> </span><span class=nx>WsProvider</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@polkadot/api&#39;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>main</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=c1>// Initialize the API</span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>api</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>ApiPromise</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
<span class=w>    </span><span class=nx>provider</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WsProvider</span><span class=p>(</span><span class=s1>&#39;wss://moonbase-alpha.public.blastapi.io&#39;</span><span class=p>),</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Get the reward payment delay</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>rewardPaymentDelay</span><span class=w> </span><span class=o>=</span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>api</span><span class=p>.</span><span class=nx>consts</span><span class=p>.</span><span class=nx>parachainStaking</span><span class=p>.</span><span class=nx>rewardPaymentDelay</span><span class=p>;</span>

<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span>
<span class=w>      </span><span class=s1>&#39;Reward Payment Delay:&#39;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>rewardPaymentDelay</span><span class=p>.</span><span class=nx>toString</span><span class=p>(),</span>
<span class=w>      </span><span class=s1>&#39;rounds&#39;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error querying reward payment delay:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>    </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Execute the script</span>
<span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>((</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Script error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
<span class=w>  </span><span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mf>1</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div> </div> </div> </div> </details> <div class=md-source-file> <small> <span class=source-file-label>Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 6, 2025</span> <br> <span class=source-file-seperator>|</span> <span class=source-file-label>Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 6, 2025</span> </small> <!-- Was this page helpful? --> <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine feedback configuration --> <!-- Determine whether to show feedback --> <!-- Was this page helpful? --> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <!-- Feedback ratings --> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> True <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2M1 21h4V9H1v12Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> False <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2Z"/></svg> </button> </div> <!-- Feedback rating notes (shown after submission) --> <div class=md-feedback__note> <div data-md-value=1 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! </div> <div data-md-value=0 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Parachain%20Staking%20Pallet+-+/builders/substrate/interfaces/features/staking/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> </form> </div> <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine feedback configuration --> <!-- Determine whether to show feedback --> <!-- Was this page helpful? --> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <!-- Feedback ratings --> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> True <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2M1 21h4V9H1v12Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> False <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2Z"/></svg> </button> </div> <!-- Feedback rating notes (shown after submission) --> <div class=md-feedback__note> <div data-md-value=1 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! </div> <div data-md-value=0 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Parachain%20Staking%20Pallet+-+/builders/substrate/interfaces/features/staking/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../governance/referenda/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <span class=md-footer__page-name> Referenda </span> </div> </a> <a href=../randomness/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <span class=md-footer__page-name> Randomness </span> </div> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column newsletter"> <label class=newsletter-label>Join our newsletter</label> <form class=md-footer-newsletter> <!-- These script tags are for the newsletter signup and must be here --> <script charset=utf-8 type=text/javascript src=//js.hsforms.net/forms/v2.js></script> <script>
            hbspt.forms.create({
              region: "na1",
              portalId: "6074164",
              formId: "e5b4a7bd-1d01-479a-ac4a-da1b38bb1acb"
            });
            </script> </form> </div> <div class=md-social> <a href=https://discord.gg/PfpUATX target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://t.me/Moonbeam_Official target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://twitter.com/MoonbeamNetwork target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://www.youtube.com/c/MoonbeamNetwork target=_blank rel=noopener title=YouTube class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> <a href=https://github.com/moonbeam-foundation/moonbeam target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> © 2024 Moonbeam Foundation. All Rights Reserved. </div> <div class=papermoon> <span>Made with 🩵 by <a href=https://papermoon.io/ target=_blank>PaperMoon</a></span> </div> <div class=policy-links> <a href=https://moonbeam.network/terms-of-use target=_blank>Terms of use</a> <a href=https://moonbeam.network/privacy-policy target=_blank>Privacy policy</a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.prune", "content.code.copy", "announce.dismiss"], "search": "../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../../assets/javascripts/bundle.081f42fc.min.js></script> <script src=../../../../../js/connectMetaMask.min.js></script> <script src=../../../../../js/errorModal.min.js></script> <script src=../../../../../js/networkModal.min.js></script> <script src=../../../../../js/handleLanguageChange.min.js></script> <script src=../../../../../js/fixCreatedDate.min.js></script> <script src=../../../../../js/externalLinkModal.min.js></script> </body> </html>