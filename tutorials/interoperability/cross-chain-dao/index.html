<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In this step-by-step tutorial, you'll learn about connected contracts and how to create a cross-chain DAO using OpenZeppelin's Governor contract on Moonbeam."><link href=https://eshaben.github.io/moonbeam-mkdocs/tutorials/interoperability/cross-chain-dao/ rel=canonical><link href=../protocols.index/ rel=prev><link href=../using-axelar-sdk/ rel=next><link rel=icon href=../../../assets/images/favicon.webp><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.24"><title>Build a Cross-Chain DAO with OpenZeppelin's Governor | Moonbeam Docs</title><link rel=stylesheet href=../../../assets/stylesheets/main.6543a935.min.css><link href=https://widget.kapa.ai/ rel=preconnect><style data-emotion=mantine data-s></style><script defer src=https://widget.kapa.ai/kapa-widget.bundle.js data-website-id=80af633e-fba6-486e-b3c8-b01fb6ca2a10 data-project-name=Moonbeam data-project-color="rgb(48, 47, 83)" data-project-logo=/images/moonbot.webp data-button-position-right=40px data-button-position-bottom=40px data-button-border-radius=4px data-modal-border-radius=4px data-search-show-more-button-text-color=#000 data-font-family="Banana Grotesk" data-footer-tos-privacy-links='[{"title": "terms of service", "url": "https://moonbeam.network/terms-of-use"}, {"title": "privacy policy", "url": "https://moonbeam.network/privacy-policy"}]'></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Banana+Grotesk:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Banana Grotesk";--md-code-font:"Roboto Mono"}</style><link rel=preconnect href=https://fonts.googleapis.com><link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel=stylesheet><link rel=stylesheet href=../../../assets/stylesheets/moonbeam.min.css><link rel=stylesheet href=../../../assets/stylesheets/termynal.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-5ZBERCXWC3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-5ZBERCXWC3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-5ZBERCXWC3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#building-a-cross-chain-dao-with-openzeppelins-governor-contract class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> <p>As of Runtime 3400, the minimum gas price has been reduced by 4x to 31.25 Gwei. Learn more about <a href=https://github.com/moonbeam-foundation/moonbeam/pull/3058>the new minimum gas price</a>.</p> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <div class=md-header__left-nav> <a href=https://eshaben.github.io/moonbeam-mkdocs/ title="Moonbeam Docs" class="md-header__button md-logo" aria-label="Moonbeam Docs"> <img src=../../../assets/images/logo.webp alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> </div> <div class=md-header__buttons> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../builders/ >Builders</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../builders/get-started/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/get-started.webp alt="Get Started" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Get Started</span> <p class=dropdown-desc>Everything you need to get started building</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/ethereum/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/ethereum.webp alt="Ethereum Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum Toolkit</span> <p class=dropdown-desc>Ethereum libraries, tools, and contracts</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/substrate/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/substrate.webp alt="Substrate Toolkit" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Substrate Toolkit</span> <p class=dropdown-desc>Substrate libraries, tools, and low-level interfaces</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/interoperability/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>GMP protocols for cross-chain development</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../builders/integrations/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/integrations.webp alt=Integrate loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrate</span> <p class=dropdown-desc>Tools and protocols to integrate with</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../node-operators/ >Node Operators</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../node-operators/networks/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/networks.webp alt=Networks loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Networks</span> <p class=dropdown-desc>Run full, tracing, or collator nodes</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../node-operators/oracle-nodes/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/oracle-nodes.webp alt="Oracle Nodes" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Oracle Nodes</span> <p class=dropdown-desc>Run infrastructure for oracles services</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../node-operators/indexer-nodes/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/indexer-nodes.webp alt="Indexer Nodes" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Indexer Nodes</span> <p class=dropdown-desc>Run infrastructure for indexing and querying services</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../tokens/ >Tokens</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../tokens/connect/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/connect.webp alt="Connect to Moonbeam" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Connect to Moonbeam</span> <p class=dropdown-desc>Connect your wallet to Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/manage/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/manage.webp alt="Account Management" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Account Management</span> <p class=dropdown-desc>Advanced account and identity services</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/staking/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/staking.webp alt=Staking loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Staking</span> <p class=dropdown-desc>Stake tokens by delegating to collators</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../tokens/governance/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/governance.webp alt=Governance loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Governance</span> <p class=dropdown-desc>Submit and vote on on-chain proposals</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../../learn/ >Learn</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../../../learn/platform/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/platform.webp alt=Platform loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Platform</span> <p class=dropdown-desc>Dive into underlying technology and design aspects</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/core-concepts/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/core-concepts.webp alt="Core Concepts" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Core Concepts</span> <p class=dropdown-desc>Learn about the fundamentals of Moonbeam</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/features/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/features.webp alt=Features loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Features</span> <p class=dropdown-desc>Explore core features</p> </div> </a> </li> <li class=md-tab__item> <a href=../../../learn/dapps-list/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/dapps-list.webp alt="DApps List" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>DApps List</span> <p class=dropdown-desc>Discover DApps deployed on Moonbeam</p> </div> </a> </li> </ul> </li> <li class=md-tabs__item--custom tabindex=0> <span class=md-tabs__link> <a href=../../ >Tutorials</a> </span> <ul class=md-tab__list> <li class=md-tab__item> <a href=../ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/interoperability.webp alt=Interoperability loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Interoperability</span> <p class=dropdown-desc>Get hands-on building cross-chain DApps</p> </div> </a> </li> <li class=md-tab__item> <a href=../../eth-api/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/eth-api.webp alt="Ethereum API" loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Ethereum API</span> <p class=dropdown-desc>Beginner to pro smart contract tutorials</p> </div> </a> </li> <li class=md-tab__item> <a href=../../integrations/ > <div class=icon-col> <img class=dropdown-icon src=/assets/images/dropdown-icons/integrations.webp alt=Integrations loading=lazy> </div> <div class=text-col> <span class=dropdown-title>Integrations</span> <p class=dropdown-desc>Dive deeper with tutorials on seamless integrations</p> </div> </a> </li> </ul> </li> </ul> </div> </nav> <div class="language-select-wrapper select-wrapper"> <span class="language-select-label select-label">Eng</span> <ul class="language-select select"> <li class=en value=en><a href=#>Eng</a></li> <li class=cn value=cn><a href>中文</a></li> </ul> <span class="md-icon selector-closed active"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span> <span class="md-icon selector-open"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41Z"/></svg></span> </div> <a href=# class="md-header__button md-button connectMetaMask-nav md-typeset"> Connect Wallet </a> <a class="md-header__button md-button faucet md-typeset" href=https://faucet.moonbeam.network/ target=_blank> Faucet </a> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Moonbeam Docs" class="md-nav__button md-logo" aria-label="Moonbeam Docs" data-md-component=logo> <img src=../../../assets/images/logo.webp alt=logo> </a> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ >Builders</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/get-started/ >Get Started</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/get-started/quick-start/ class=md-nav__link> Quick Start </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/create-account/ class=md-nav__link> Create an Account </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/get-started/networks/ >Networks</a> <label for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-get-started-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbeam-dev/ class=md-nav__link> Local Moonbeam Dev Node </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/get-started/endpoints/ class=md-nav__link> Network RPC Endpoints </a> </li> <li class=md-nav__item> <a href=../../../builders/get-started/explorers/ class=md-nav__link> Block Explorers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/ >Ethereum Toolkit</a> <label for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/canonical-contracts/ class=md-nav__link> Canonical Contracts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/ >Precompiled Contracts</a> <label for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/account/ >Account Management</a> <label for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/ux/ >User Experience</a> <label for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-ux-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/batch/ class=md-nav__link> Batch </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/call-permit/ class=md-nav__link> Call Permit </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/ux/erc20/ class=md-nav__link> Native Token ERC-20 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/features/ >Network Features</a> <label for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/features/governance/ >Governance</a> <label for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_3_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/collective/ class=md-nav__link> Collective </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/features/staking/ class=md-nav__link> Staking Functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/interoperability/ >Interoperability</a> <label for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/interoperability/gmp/ class=md-nav__link> GMP </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> X-Tokens </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> XCM Interface </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> XCM Transactor </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/precompiles/utility/ >Utility</a> <label for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-precompiles-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/eth-mainnet/ class=md-nav__link> Ethereum Native </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/registry/ class=md-nav__link> Precompile Registry </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/relay-data-verifier/ class=md-nav__link> Relay Data Verifier </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/precompiles/utility/non-specific/ class=md-nav__link> Non-Network Specific </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/libraries/ >Libraries</a> <label for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/ethersjs/ class=md-nav__link> Ethers.js </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/ethersrs/ class=md-nav__link> Ethers.rs </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/viem/ class=md-nav__link> viem </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/web3js/ class=md-nav__link> Web3.js </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/libraries/web3py/ class=md-nav__link> Web3.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/dev-env/ >Dev Environments</a> <label for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/dev-env/openzeppelin/ >OpenZeppelin</a> <label for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-dev-env-openzeppelin-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/openzeppelin/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/openzeppelin/contracts/ class=md-nav__link> Contract Wizard </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/openzeppelin/defender/ class=md-nav__link> Defender </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/ape/ class=md-nav__link> Ape </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/brownie/ class=md-nav__link> Brownie </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/foundry/ class=md-nav__link> Foundry </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/hardhat/ class=md-nav__link> Hardhat </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/remix/ class=md-nav__link> Remix </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/scaffold-eth/ class=md-nav__link> Scaffold-ETH </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/tenderly/ class=md-nav__link> Tenderly </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/thirdweb/ class=md-nav__link> thirdweb </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/dev-env/waffle-mars/ class=md-nav__link> Waffle & Mars </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/verify-contracts/ >Verify Contracts</a> <label for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-verify-contracts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/block-explorers/ class=md-nav__link> Block Explorers </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/etherscan-plugins/ class=md-nav__link> Etherscan Plugins </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/verify-contracts/api-verification/ class=md-nav__link> API-based Verification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/ethereum/json-rpc/ >JSON-RPC APIs</a> <label for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_7> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-ethereum-json-rpc-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/eth-rpc/ class=md-nav__link> Standard Ethereum </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/debug-trace/ class=md-nav__link> Non-standard Ethereum: Tracing </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/pubsub/ class=md-nav__link> Non-standard Ethereum: Pubsub </a> </li> <li class=md-nav__item> <a href=../../../builders/ethereum/json-rpc/moonbeam-custom-api/ class=md-nav__link> Custom Moonbeam </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/ >Substrate Toolkit</a> <label for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/libraries/ >Libraries</a> <label for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-libraries-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/polkadot-js-api/ class=md-nav__link> Polkadot.js API </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/py-substrate-interface/ class=md-nav__link> Py Substrate Interface </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/libraries/sidecar/ class=md-nav__link> Sidecar </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/dev-env/ >Dev Environments</a> <label for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-dev-env-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/dev-env/chopsticks/ class=md-nav__link> Chopsticks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/ >Low-Level Interfaces</a> <label for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/account/ >Account Management</a> <label for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-account-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/identity/ class=md-nav__link> Identity </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/multisig/ class=md-nav__link> Multisig </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/account/proxy/ class=md-nav__link> Proxy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/features/ >Network Features</a> <label for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/features/governance/ >Governance</a> <label for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_4_4_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-features-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/conviction-voting/ class=md-nav__link> Conviction Voting </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/preimage/ class=md-nav__link> Preimage </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/governance/referenda/ class=md-nav__link> Referenda </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/staking/ class=md-nav__link> Parachain Staking </a> </li> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/features/randomness/ class=md-nav__link> Randomness </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/interoperability/ >Interoperability</a> <label for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-interoperability-" data-md-scrollfix> <li class=md-nav__item> <a href=/builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Polkadot XCM </a> </li> <li class=md-nav__item> <a href=/builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> XCM Transactor </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/substrate/interfaces/utility/ >Utility</a> <label for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_4_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-substrate-interfaces-utility-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/substrate/interfaces/utility/utility/ class=md-nav__link> Utility </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/ >Interoperability</a> <label for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/ >XCM Interoperability</a> <label for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/core-concepts/ >Core Concepts</a> <label for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/instructions/ class=md-nav__link> XCM Instructions </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/multilocations/ class=md-nav__link> Multilocations </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/core-concepts/weights-fees/ class=md-nav__link> Weights and Fees </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc-registration/ >XC Registration</a> <label for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc-registration-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/forum-templates/ class=md-nav__link> Forum Templates </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/xc-integration/ class=md-nav__link> XC Channel Registration </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc-registration/assets/ class=md-nav__link> XC Asset Registration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc20/ >XC-20s</a> <label for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/interact/ class=md-nav__link> Interact with XC-20s </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/ >Send XC-20s</a> <label for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-xc20-send-xc20s-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/xcm-pallet/ class=md-nav__link> Using the Substrate API: Polkadot XCM Pallet </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/xtokens-precompile/ class=md-nav__link> Using the Ethereum API: X-Tokens Precompile </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xc20/send-xc20s/eth-api/ class=md-nav__link> Using the Ethereum API: XCM Precompile </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/remote-execution/ >Remote Execution</a> <label for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_5_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/computed-origins/ class=md-nav__link> Computed Origin Accounts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/ >Remote Substrate Calls</a> <label for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_5_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-xcm-remote-execution-substrate-calls-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-pallet/ class=md-nav__link> Using the Substrate API </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/substrate-calls/xcm-transactor-precompile/ class=md-nav__link> Using the Ethereum API </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/remote-execution/remote-evm-calls/ class=md-nav__link> Remote EVM Calls </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://moonbeam-foundation.github.io/xcm-sdk/latest/ class=md-nav__link> XCM SDK </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/send-execute-xcm/ class=md-nav__link> Send, Execute, & Test XCMs </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/xcm/xcm-utils/ class=md-nav__link> XCM Utilities </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/interoperability/protocols/ >Cross-Chain Protocols</a> <label for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-interoperability-protocols-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/axelar/ class=md-nav__link> Axelar </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/hyperlane/ class=md-nav__link> Hyperlane </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/layerzero/ class=md-nav__link> LayerZero </a> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/protocols/wormhole/ class=md-nav__link> Wormhole </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../builders/interoperability/mrl/ class=md-nav__link> Moonbeam Routed Liquidity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/ >Integrate</a> <label for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/analytics/ >Analytics</a> <label for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-analytics-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/analytics/dapplooker/ class=md-nav__link> Dapplooker </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/indexers/ >Indexers</a> <label for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-indexers-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/thegraph/ class=md-nav__link> The Graph </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/covalent/ class=md-nav__link> GoldRush API </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/moralis/ class=md-nav__link> Moralis </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/subquery/ class=md-nav__link> SubQuery </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/indexers/subsquid/ class=md-nav__link> SQD </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/oracles/ >Oracles</a> <label for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-oracles-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/api3/ class=md-nav__link> API3 </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/band-protocol/ class=md-nav__link> Band Protocol </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/chainlink/ class=md-nav__link> Chainlink </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/dia/ class=md-nav__link> DIA </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/razor-network/ class=md-nav__link> Razor Network </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/oracles/supra/ class=md-nav__link> Supra </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../builders/integrations/wallets/ >Wallets</a> <label for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list builders-integrations-wallets-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/walletconnect/ class=md-nav__link> WalletConnect </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/particle-network/ class=md-nav__link> Particle Network </a> </li> <li class=md-nav__item> <a href=../../../builders/integrations/wallets/rainbowkit/ class=md-nav__link> RainbowKit </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/ >Node Operators</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/ >Networks</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/run-a-node/ >Run a Node</a> <label for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-run-a-node-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/docker/ class=md-nav__link> Using Docker </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/systemd/ class=md-nav__link> Using Systemd </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/run-a-node/flags/ class=md-nav__link> Flags </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/tracing-node/ class=md-nav__link> Run a Tracing Node </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/networks/collators/ >Collators</a> <label for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-networks-collators-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/requirements/ class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/account-management/ class=md-nav__link> Account Management </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/author-mapping/ class=md-nav__link> Author Mapping Precompile </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/activities/ class=md-nav__link> Collator Activities </a> </li> <li class=md-nav__item> <a href=../../../node-operators/networks/collators/orbiter/ class=md-nav__link> Orbiter Program </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/oracle-nodes/ >Oracle Nodes</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-oracle-nodes-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/oracle-nodes/node-chainlink/ class=md-nav__link> Chainlink Node </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../node-operators/indexer-nodes/ >Indexer Nodes</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list node-operators-indexer-nodes-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../node-operators/indexer-nodes/thegraph-node/ class=md-nav__link> Graph Node </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/ >Tokens</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/connect/ >Connect to Moonbeam</a> <label for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/connect/ledger/ >Ledger</a> <label for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-connect-ledger-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/moonbeam/ class=md-nav__link> Moonbeam App </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/moonriver/ class=md-nav__link> Moonriver App </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/ledger/ethereum/ class=md-nav__link> Ethereum App </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../tokens/connect/coinbase-wallet/ class=md-nav__link> Coinbase Wallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/mathwallet/ class=md-nav__link> MathWallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/metamask/ class=md-nav__link> MetaMask </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/polkadotjs/ class=md-nav__link> Polkadot.js Apps </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/subwallet/ class=md-nav__link> SubWallet </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/talisman/ class=md-nav__link> Talisman </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/trezor/ class=md-nav__link> Trezor </a> </li> <li class=md-nav__item> <a href=../../../tokens/connect/on-ramps/ class=md-nav__link> On Ramps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/manage/ >Account Management</a> <label for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-manage-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/manage/proxy-accounts/ class=md-nav__link> Proxy Accounts </a> </li> <li class=md-nav__item> <a href=../../../tokens/manage/multisig-safe/ class=md-nav__link> Moonbeam Safe </a> </li> <li class=md-nav__item> <a href=../../../tokens/manage/identity/ class=md-nav__link> Managing an Identity </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/staking/ >Staking</a> <label for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-staking-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/staking/stake/ class=md-nav__link> How to Stake </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../tokens/governance/ >Governance</a> <label for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tokens-governance-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../tokens/governance/proposals/ class=md-nav__link> Submit a Democracy Proposal </a> </li> <li class=md-nav__item> <a href=../../../tokens/governance/voting/ class=md-nav__link> Vote on a Proposal </a> </li> <li class=md-nav__item> <a href=../../../tokens/governance/treasury-spend/ class=md-nav__link> Submit a Treasury Proposal </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/ >Learn</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-" data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/platform/ >Platform</a> <label for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/platform/networks/ >Networks</a> <label for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-platform-networks-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/platform/networks/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonbase/ class=md-nav__link> Moonbase Alpha </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonriver/ class=md-nav__link> Moonriver </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/networks/moonbeam/ class=md-nav__link> Moonbeam </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../learn/platform/vision/ class=md-nav__link> Vision </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/why-polkadot/ class=md-nav__link> Why Polkadot </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/technology/ class=md-nav__link> Technology & Architecture </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/tokens/ class=md-nav__link> Tokens </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/code/ class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/links/ class=md-nav__link> Important Links </a> </li> <li class=md-nav__item> <a href=../../../learn/platform/glossary/ class=md-nav__link> Glossary </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/core-concepts/ >Core Concepts</a> <label for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-core-concepts-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/core-concepts/balances/ class=md-nav__link> Account Balances </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/transfers-api/ class=md-nav__link> Balance Transfers </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/consensus-finality/ class=md-nav__link> Consensus & Finality </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/tx-fees/ class=md-nav__link> Transaction Fees </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/unified-accounts/ class=md-nav__link> Unified Accounts </a> </li> <li class=md-nav__item> <a href=../../../learn/core-concepts/security/ class=md-nav__link> Security Considerations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/features/ >Features</a> <label for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-features-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/features/xchain-plans/ class=md-nav__link> Cross-Chain Communication </a> </li> <li class=md-nav__item> <a href=../../../learn/features/eth-compatibility/ class=md-nav__link> Ethereum Compatibility </a> </li> <li class=md-nav__item> <a href=../../../learn/features/governance/ class=md-nav__link> Governance </a> </li> <li class=md-nav__item> <a href=../../../learn/features/consensus/ class=md-nav__link> Parachain Consensus </a> </li> <li class=md-nav__item> <a href=../../../learn/features/randomness/ class=md-nav__link> Randomness </a> </li> <li class=md-nav__item> <a href=../../../learn/features/staking/ class=md-nav__link> Staking </a> </li> <li class=md-nav__item> <a href=../../../learn/features/treasury/ class=md-nav__link> Treasury </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../learn/dapps-list/ >DApps List</a> <label for=__nav_5_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list learn-dapps-list-" data-md-scrollfix> <li class=md-nav__item> <a href=../../../learn/dapps-list/dapp-directory/ class=md-nav__link> Moonbeam Foundation DApp Directory </a> </li> <li class=md-nav__item> <a href=../../../learn/dapps-list/dapp-radar/ class=md-nav__link> DappRadar </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Tutorials</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Interoperability</a> <label for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=true> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../protocols.index/ >Create Connected Contracts with Cross-Chain Protocols</a> <label for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_6_2_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-protocols.index-" data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> [LayerZero] Creating a Cross-Chain DAO <span class="md-nav__icon md-icon"></span> </label> <div class="md-nav__link-wrapper md-nav__item md-nav__item--active"> <a href=./ class="md-nav__link md-nav__link--active"> [LayerZero] Creating a Cross-Chain DAO </a> </div> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#intuition-and-planning class=md-nav__link> <span class=md-ellipsis> Intuition And Planning </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#cross-chain-dao-token-contract class=md-nav__link> <span class=md-ellipsis> Writing the Cross-Chain DAO Token Contract </span> </a> </li> <li class=md-nav__item> <a href=#cross-chain-dao-contract class=md-nav__link> <span class=md-ellipsis> Writing the Cross-Chain DAO Contract </span> </a> <nav class=md-nav aria-label="Writing the Cross-Chain DAO Contract"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starting-with-the-openzeppelin-contract-wizard class=md-nav__link> <span class=md-ellipsis> Starting with the OpenZeppelin Contract Wizard </span> </a> </li> <li class=md-nav__item> <a href=#adding-cross-chain-support class=md-nav__link> <span class=md-ellipsis> Adding Cross-Chain Support </span> </a> </li> <li class=md-nav__item> <a href=#counting-votes-with-cross-chain-governor-counting-contract class=md-nav__link> <span class=md-ellipsis> Counting Votes with Cross-Chain Governor Counting Contract </span> </a> </li> <li class=md-nav__item> <a href=#implementing-a-collection-phase class=md-nav__link> <span class=md-ellipsis> Implementing a Collection Phase </span> </a> <nav class=md-nav aria-label="Implementing a Collection Phase"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defining-the-collection-phase-and-preventing-execution class=md-nav__link> <span class=md-ellipsis> Defining the Collection Phase and Preventing Execution </span> </a> </li> <li class=md-nav__item> <a href=#requesting-votes-from-spoke-chains class=md-nav__link> <span class=md-ellipsis> Requesting Votes from Spoke Chains </span> </a> </li> <li class=md-nav__item> <a href=#receiving-votes-from-spoke-chains class=md-nav__link> <span class=md-ellipsis> Receiving Votes from Spoke Chains </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#making-proposals-cross-chain class=md-nav__link> <span class=md-ellipsis> Making Proposals Cross-Chain </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dao-satellite-contract class=md-nav__link> <span class=md-ellipsis> Writing the DAO Satellite Contract </span> </a> </li> <li class=md-nav__item> <a href=#caveats-and-other-designs class=md-nav__link> <span class=md-ellipsis> Caveats and Other Designs </span> </a> <nav class=md-nav aria-label="Caveats and Other Designs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#division-of-the-cross-chain-selector-into-multiple-contracts class=md-nav__link> <span class=md-ellipsis> Division of the Cross-Chain Selector Into Multiple Contracts </span> </a> </li> <li class=md-nav__item> <a href=#distributed-proposal-and-execution class=md-nav__link> <span class=md-ellipsis> Distributed Proposal and Execution </span> </a> </li> <li class=md-nav__item> <a href=#double-weight-attack-from-snapshot-mismatch class=md-nav__link> <span class=md-ellipsis> Double-Weight Attack from Snapshot Mismatch </span> </a> </li> <li class=md-nav__item> <a href=#chained-cross-chain-message-fees class=md-nav__link> <span class=md-ellipsis> Chained Cross-Chain Message Fees </span> </a> </li> <li class=md-nav__item> <a href=#collection-phase-time-out class=md-nav__link> <span class=md-ellipsis> Collection Phase Time Out </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../using-axelar-sdk/ class=md-nav__link> [Axelar] Minting a Cross-Chain NFT </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2_3> <div class="md-nav__link md-nav__link--index "> <a href=../xcm.index/ >Build Cross-Chain Applications with XCM</a> <label for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-interoperability-xcm.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../remote-staking-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Remote Staking on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../uniswapv2-swap-xcm/ class=md-nav__link> [Polkadot's XCM Pallet] Uniswap V2 Swap on Moonbeam from Polkadot </a> </li> <li class=md-nav__item> <a href=../remote-batched-evm-calls/ class=md-nav__link> [Polkadot's XCM Pallet] Batched Remote EVM Calls on Moonbeam from Polkadot </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <div class="md-nav__link md-nav__link--index "> <a href=../../eth-api/ >Ethereum API</a> <label for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../eth-api/get-started.index/ >Get Started with Smart Contracts</a> <label for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-get-started.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../eth-api/chat-gpt/ class=md-nav__link> [ChatGPT] Use GPT-4 to Write and Debug Smart Contracts </a> </li> <li class=md-nav__item> <a href=../../eth-api/how-to-build-a-dapp/ class=md-nav__link> [Ethers.js] How to Build a DApp </a> </li> <li class=md-nav__item> <a href=../../eth-api/foundry-start-to-end/ class=md-nav__link> [Foundry] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../../eth-api/hardhat-start-to-end/ class=md-nav__link> [Hardhat] Development Life Cycle from Start to End </a> </li> <li class=md-nav__item> <a href=../../eth-api/using-tenderly/ class=md-nav__link> [Tenderly] Using Tenderly to Debug and Simulate Transactions </a> </li> <li class=md-nav__item> <a href=../../eth-api/thirdweb/ class=md-nav__link> [thirdweb] Building a DApp with thirdweb </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3_3> <div class="md-nav__link md-nav__link--index "> <a href=../../eth-api/precompiles.index/ >Interact with Precompiles</a> <label for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-eth-api-precompiles.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../eth-api/batch-approve-swap/ class=md-nav__link> [Batch] Approve & Swap Tokens in a Single Transaction </a> </li> <li class=md-nav__item> <a href=../../eth-api/randomness-lottery/ class=md-nav__link> [Randomness] Create a Lottery </a> </li> <li class=md-nav__item> <a href=../../eth-api/call-permit-gasless-txs/ class=md-nav__link> [Call Permit] Send Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/ >Integrations</a> <label for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_2> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/indexers.index/ >Use Indexers to Query Chain Data</a> <label for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_2> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-indexers.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/local-subsquid/ class=md-nav__link> [SQD] Index a Local Dev Node </a> </li> <li class=md-nav__item> <a href=../../integrations/nft-subsquid/ class=md-nav__link> [SQD] Index NFT Transfers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_3> <div class="md-nav__link md-nav__link--index "> <a href=../../integrations/oracles.index/ >Use Oracles to Fetch Off-Chain Data</a> <label for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4_3> <span class="md-nav__icon md-icon"></span> </label> <ul class="md-nav__list tutorials-integrations-oracles.index-" data-md-scrollfix> <li class=md-nav__item> <a href=../../integrations/supra/ class=md-nav__link> [Supra] Fetch Price Data </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../integrations/0xgasless/ class=md-nav__link> Enable Gasless Transactions </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine title --> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label=Sections> <!--
    Check whether the content starts with a level 1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  --> <!-- Table of contents title and list --> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> <div class=toc-sections-title>Sections</div> </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#intuition-and-planning class=md-nav__link> <span class=md-ellipsis> Intuition And Planning </span> </a> </li> <li class=md-nav__item> <a href=#checking-prerequisites class=md-nav__link> <span class=md-ellipsis> Checking Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#cross-chain-dao-token-contract class=md-nav__link> <span class=md-ellipsis> Writing the Cross-Chain DAO Token Contract </span> </a> </li> <li class=md-nav__item> <a href=#cross-chain-dao-contract class=md-nav__link> <span class=md-ellipsis> Writing the Cross-Chain DAO Contract </span> </a> <nav class=md-nav aria-label="Writing the Cross-Chain DAO Contract"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#starting-with-the-openzeppelin-contract-wizard class=md-nav__link> <span class=md-ellipsis> Starting with the OpenZeppelin Contract Wizard </span> </a> </li> <li class=md-nav__item> <a href=#adding-cross-chain-support class=md-nav__link> <span class=md-ellipsis> Adding Cross-Chain Support </span> </a> </li> <li class=md-nav__item> <a href=#counting-votes-with-cross-chain-governor-counting-contract class=md-nav__link> <span class=md-ellipsis> Counting Votes with Cross-Chain Governor Counting Contract </span> </a> </li> <li class=md-nav__item> <a href=#implementing-a-collection-phase class=md-nav__link> <span class=md-ellipsis> Implementing a Collection Phase </span> </a> <nav class=md-nav aria-label="Implementing a Collection Phase"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defining-the-collection-phase-and-preventing-execution class=md-nav__link> <span class=md-ellipsis> Defining the Collection Phase and Preventing Execution </span> </a> </li> <li class=md-nav__item> <a href=#requesting-votes-from-spoke-chains class=md-nav__link> <span class=md-ellipsis> Requesting Votes from Spoke Chains </span> </a> </li> <li class=md-nav__item> <a href=#receiving-votes-from-spoke-chains class=md-nav__link> <span class=md-ellipsis> Receiving Votes from Spoke Chains </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#making-proposals-cross-chain class=md-nav__link> <span class=md-ellipsis> Making Proposals Cross-Chain </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dao-satellite-contract class=md-nav__link> <span class=md-ellipsis> Writing the DAO Satellite Contract </span> </a> </li> <li class=md-nav__item> <a href=#caveats-and-other-designs class=md-nav__link> <span class=md-ellipsis> Caveats and Other Designs </span> </a> <nav class=md-nav aria-label="Caveats and Other Designs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#division-of-the-cross-chain-selector-into-multiple-contracts class=md-nav__link> <span class=md-ellipsis> Division of the Cross-Chain Selector Into Multiple Contracts </span> </a> </li> <li class=md-nav__item> <a href=#distributed-proposal-and-execution class=md-nav__link> <span class=md-ellipsis> Distributed Proposal and Execution </span> </a> </li> <li class=md-nav__item> <a href=#double-weight-attack-from-snapshot-mismatch class=md-nav__link> <span class=md-ellipsis> Double-Weight Attack from Snapshot Mismatch </span> </a> </li> <li class=md-nav__item> <a href=#chained-cross-chain-message-fees class=md-nav__link> <span class=md-ellipsis> Chained Cross-Chain Message Fees </span> </a> </li> <li class=md-nav__item> <a href=#collection-phase-time-out class=md-nav__link> <span class=md-ellipsis> Collection Phase Time Out </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=building-a-cross-chain-dao-with-openzeppelins-governor-contract>Building a Cross-Chain DAO with OpenZeppelin's Governor Contract<a class=headerlink href=#building-a-cross-chain-dao-with-openzeppelins-governor-contract title="Permanent link">&para;</a></h1> <p><em>by Jeremy Boetticher</em></p> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Moonbeam works hard to support interoperability and cross-chain logic. Its <a href=https://moonbeam.network/build/use-case target=_blank>multi-chain</a> initiative requires an updating of previously understood smart contract concepts so that they fit a cross-chain world. While some cross-chain primitives have been available for years, such as cross-chain tokens, others are only now starting to be worked on, such as cross-chain swaps, AMMs, and, of particular interest for this tutorial, DAOs.</p> <p>In this tutorial, we will work through a thought process of writing smart contracts for a cross-chain DAO. The smart contracts in this example will be based off of OpenZeppelin's Governance smart contracts to demonstrate an evolution from single-chain to cross-chain and to highlight some incompatibilities that one might face when converting a DApp concept from single-chain to cross-chain. The cross-chain protocol used in this example will be <a href=/builders/interoperability/protocols/layerzero/ target=_blank>LayerZero</a>, but you are encouraged to adapt its concepts to any other protocol that you see fit, since cross-chain concepts often overlap between the protocols that Moonbeam hosts. </p> <p>The purpose of this tutorial is not to be the end-all, be-all definition of what a cross-chain DAO would be like, but instead to provide an example of thinking about the intricacies of writing a significantly complex cross-chain DApp. The focus of this tutorial will be on architecture, specifically cross-chain smart contract logic, instead of deploying and testing. <strong>The following smart contracts are not tested or recommended for production use</strong>. That being said, feel free to take inspiration from some of the design choices if you decide to write your cross-chain DAO. The full code base and demonstration of the DAO is available in a <a href=https://github.com/jboetticher/cross-chain-dao target=_blank>GitHub repository</a>, with relevant instructions. </p> <div class=intro-disclaimer> The information presented herein is for informational purposes only and has been provided by third parties. Moonbeam does not endorse any project listed and described on the Moonbeam docs website (https://docs.moonbeam.network/). </div> <h2 id=intuition-and-planning>Intuition And Planning<a class=headerlink href=#intuition-and-planning title="Permanent link">&para;</a></h2> <p>DAO stands for "Decentralized Autonomous Organization." In order for a smart contract to be a DAO, it must be: </p> <ul> <li><strong>Decentralized</strong> — control is separated and distributed among many actors</li> <li><strong>Autonomous</strong> — execution must occur without reliance on a single person, government, or team</li> <li><strong>Organized</strong> — there must be a way for actions to be proposed and then taken: code is law</li> </ul> <p>One of the best single-chain DAOs is <a href=https://compound.finance/governance target=_blank>Compound Finance's DAO</a>. It is <strong>organized</strong> because the smart contract allows users to propose actions to be taken on chain in the form of transaction parameters, which are later executed with the smart contract as the origin. It is <strong>autonomous</strong> because the execution of the proposals is permissionless and thus does not depend on any specific person or team. It is <strong>decentralized</strong> because proposals are voted on by holders of the Compound Finance token.</p> <p>Let's take a look at the phases that a proposal in a DAO like Compound Finance's takes: </p> <p><img alt="Typical DAO" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-1.webp></p> <ol> <li><strong>Proposal</strong> — a user proposes that the DAO execute one or more transactions</li> <li><strong>Voting</strong> — after a voting delay time period, a voting period opens, which allows users to vote with their voting weight. The voting weight is determined by a token balance snapshot typically taken sometime between the proposal start and the end of the voting delay period </li> <li><strong>Timelock</strong> — an optional period that allows users to exit the ecosystem (sell their tokens) before the proposal can be executed</li> <li><strong>Execution</strong> — if the vote is successful, any user can trustlessly execute it</li> </ol> <p>But what about a cross-chain DAO? In a cross-chain DAO, the actions that you would typically take should also be available cross-chain: proposals, votes, executions, cancellations, etc. This requires a more complex architecture since a lot of information has to be replicated across chains. </p> <p>There are many ways to architect a cross-chain DApp. You could make a more distributed system, where data and logic are distributed to multiple chains to maximize their use. On the other end of the spectrum, you could use a hub-and-spoke model, where the main logic and data are stored on a single chain and cross-chain messages will interact with it. </p> <p><img alt="Cross-Chain DAO" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-2.webp></p> <p>Let's break down some of the steps in more detail: </p> <ol> <li><strong>Proposal</strong> — a user proposes that the DAO execute one or more transactions on the <strong>hub</strong> chain. A cross-chain message is sent to the satellite smart contracts on the <strong>spoke</strong> chains to let them know the parameters of the vote to take place </li> <li><strong>Voting</strong> — after a voting delay time period, a voting period opens, which allows users to vote with their voting weight on every chain. The voting weight is determined by a cross-chain token's balance on each chain at a certain timestamp between the proposal start and end </li> <li><strong>Collection</strong> — after the voting period, the cross-chain DAO on the <strong>hub</strong> chain sends a request to the <strong>spoke</strong> chains to send the voting results of each chain to the <strong>hub</strong> chain </li> <li><strong>Timelock</strong> — an optional period that allows users to exit the ecosystem (sell their tokens) before the proposal can be executed </li> <li><strong>Execution</strong> — if the vote is successful, any user can execute it trustlessly on the <strong>hub</strong> chain</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Take note of the new collection phase. This is where the cross-chain aspect changes the logic the most. Essentially, the votes on each spoke chain must be collected and submitted to the hub chain after the voting period is over.</p> </div> <p>The process shown here makes it so that anyone can vote from across chains, so long as they hold the DAO token. For holding information that is read-only, we will be storing it on a single chain. Rare one-off actions such as proposals, cancellations, and so on are best done as a hub-and-spoke model. For information regarding voting logic, since users will be voting on multiple chains, voting weight and vote sums will be stored on each spoke chain and only sent to the hub chain after voting is over, since cross-chain actions are generally expensive. </p> <p><img alt="Smart contracts overview" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-3.webp> </p> <p>This is, of course, only one way to implement a cross-chain DAO, and you are encouraged to think of alternative and better ways. In the next section, we will look at an implementation. </p> <h2 id=checking-prerequisites>Checking Prerequisites<a class=headerlink href=#checking-prerequisites title="Permanent link">&para;</a></h2> <p>Before we start writing the entire project, it's important to note that its finished form can be found in its own <a href=https://github.com/jboetticher/cross-chain-dao target=_blank>cross-chain DAO GitHub repository</a>. It uses Hardhat, so prerequisite knowledge will be helpful for understanding how the repository works. This tutorial will not include information on how to use Hardhat and will instead focus solely on the smart contracts. If you would like to follow along, the prerequisites are as follows: </p> <ul> <li>A fresh Hardhat project and <a href=/builders/ethereum/dev-env/hardhat/ target=_blank>knowledge of how to use Hardhat</a></li> <li><a href=https://github.com/OpenZeppelin/openzeppelin-contracts target=_blank>OpenZeppelin smart contracts installed</a> as a dependency</li> <li><a href=https://github.com/LayerZero-Labs/solidity-examples target=_blank>LayerZero smart contracts installed</a> as a dependency</li> </ul> <p>To install both dependencies, you can run:</p> <div class=highlight><pre><span></span><code>npm<span class=w> </span>install<span class=w> </span>@openzeppelin/contracts<span class=w> </span>@layerzerolabs/solidity-examples
</code></pre></div> <h2 id=cross-chain-dao-token-contract>Writing the Cross-Chain DAO Token Contract<a class=headerlink href=#cross-chain-dao-token-contract title="Permanent link">&para;</a></h2> <p>Let's start at the basics and sort out how users will have their voting power calculated.</p> <p>In Compound Finance's DAO, a user needs the COMP token to vote, which enables the decentralization aspect of a DAO. OpenZeppelin's <code>Governor</code> smart contract also has this feature, abstracting the tokens to votes feature into an <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/governance/utils/IVotes.sol target=_blank><code>IVotes</code> interface</a>. </p> <p>The <code>IVotes</code> interface requires a lot of different functions to represent the different weights in a voting scheme. Fortunately, OpenZeppelin provides an ERC-20 implementation of <code>IVotes</code>, called <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/extensions/ERC20Votes.sol target=_blank>ERC20Votes</a>. </p> <p>Recall <a href=#intuition-and-planning target=_blank>from earlier</a> that we intend to have users vote on each chain and to only send voting data to the hub chain during the collection phase. This means that the voting weights must be stored on each chain. This is very easy, since all we have to do is ensure that the <code>ERC20Votes</code> contract is deployed on each chain, or, in other words, make the DAO token a cross-chain token. </p> <p>Previously, it was mentioned that LayerZero is being used as the cross-chain protocol for this tutorial. LayerZero was chosen because of their <a href=https://github.com/LayerZero-Labs/solidity-examples/blob/main/contracts/token/oft/v1/OFT.sol target=_blank>OFT contract</a>, which makes it extremely easy to make an ERC-20 token cross-chain. This doesn't mean that you have to use LayerZero, though; every other cross-chain protocol has its own methods and the ability to create cross-chain assets. </p> <p>We will create a new file named <code>OFTVotes.sol</code>: </p> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>

<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.0</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/token/ERC20/extensions/ERC20Votes.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/utils/introspection/IERC165.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@layerzerolabs/solidity-examples/contracts/token/oft/IOFT.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@layerzerolabs/solidity-examples/contracts/token/oft/OFTCore.sol&quot;</span><span class=p>;</span>

abstract<span class=w> </span><span class=k>contract</span><span class=w> </span><span class=ni>OFTVotes</span><span class=w> </span><span class=kt>is</span><span class=w> </span>OFTCore<span class=p>,</span><span class=w> </span>ERC20Votes<span class=p>,</span><span class=w> </span>IOFT<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span><span class=kt>string</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>_name<span class=p>,</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>_symbol<span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>_lzEndpoint</span><span class=p>)</span><span class=w> </span>ERC20<span class=p>(</span>_name<span class=p>,</span><span class=w> </span>_symbol<span class=p>)</span><span class=w> </span>OFTCore<span class=p>(</span>_lzEndpoint<span class=p>)</span><span class=w> </span><span class=p>{}</span>
<span class=p>}</span>
</code></pre></div> <p>As you can see, <code>OFTVotes</code> is an abstract smart contract that inherits from the <code>OFTCore</code>, <code>ERC20Votes</code>, and <code>IOFT</code> smart contracts. If properly implemented, this will give it both cross-chain ERC-20 properties as well as voting properties. Let's add the following function overrides to the <code>OFTVotes</code> smart contract: </p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>supportsInterface</span><span class=p>(</span>bytes4<span class=w> </span>interfaceId<span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>virtual<span class=w> </span>override<span class=p>(</span>OFTCore<span class=p>,</span><span class=w> </span>IERC165<span class=p>)</span><span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span>interfaceId<span class=w> </span><span class=o>==</span><span class=w> </span>type<span class=p>(</span>IOFT<span class=p>).</span>interfaceId<span class=w> </span><span class=o>||</span><span class=w> </span>interfaceId<span class=w> </span><span class=o>==</span><span class=w> </span>type<span class=p>(</span>IERC20<span class=p>).</span>interfaceId<span class=w> </span><span class=o>||</span><span class=w> </span>super<span class=p>.</span>supportsInterface<span class=p>(</span>interfaceId<span class=p>);</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>token</span><span class=p>()</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>address</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>);</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>circulatingSupply</span><span class=p>()</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span>totalSupply<span class=p>();</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>_debitFrom</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=nv>_from</span><span class=p>,</span><span class=w> </span><span class=kt>uint16</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=p>,</span><span class=w> </span><span class=kt>uint</span><span class=w> </span><span class=nv>_amount</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=p>(</span><span class=kt>uint</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>address</span><span class=w> </span><span class=nv>spender</span><span class=w> </span><span class=o>=</span><span class=w> </span>_msgSender<span class=p>();</span>
<span class=w>    </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>_from<span class=w> </span><span class=o>!=</span><span class=w> </span>spender<span class=p>)</span><span class=w> </span>_spendAllowance<span class=p>(</span>_from<span class=p>,</span><span class=w> </span>spender<span class=p>,</span><span class=w> </span>_amount<span class=p>);</span>
<span class=w>    </span>_burn<span class=p>(</span>_from<span class=p>,</span><span class=w> </span>_amount<span class=p>);</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span>_amount<span class=p>;</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>_creditTo</span><span class=p>(</span><span class=kt>uint16</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>_toAddress</span><span class=p>,</span><span class=w> </span><span class=kt>uint</span><span class=w> </span><span class=nv>_amount</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=p>(</span><span class=kt>uint</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>_mint<span class=p>(</span>_toAddress<span class=p>,</span><span class=w> </span>_amount<span class=p>);</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span>_amount<span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>The first few functions are just ensuring compatibility with the smart contracts that they inherit from.</p> <p>The <code>_debitFrom</code> function is a little spicier: it includes logic to burn tokens so that the token bridge works. Similarly, the <code>_creditTo</code> function includes logic to mint tokens. These two functions are required by the <code>OFTCore</code> smart contract. If you are wondering why minting and burning are involved when most bridges wrap, it's because OFT <a href=/builders/interoperability/xcm/overview/#xcm-transport-protocols target=_blank>teleports assets</a> instead of wrapping them (similar to one of the XCM asset protocols). </p> <p>The <code>OFTVotes</code> contract is abstract, so let's create a final smart contract that we'll deploy. In the <code>contracts</code> folder, create a new smart contract called <code>CrossChainDAOToken.sol</code> and add the following: </p> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.0</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;./OFTVotes.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>CrossChainDAOToken</span><span class=w> </span><span class=kt>is</span><span class=w> </span>OFTVotes<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>_initialSupply</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>_lzEndpoint</span><span class=p>)</span>
<span class=w>        </span>OFTVotes<span class=p>(</span><span class=s2>&quot;Cross Chain DAO Token&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;CCDT&quot;</span><span class=p>,</span><span class=w> </span>_lzEndpoint<span class=p>)</span>
<span class=w>        </span>ERC20Permit<span class=p>(</span><span class=s2>&quot;Cross Chain DAO Token&quot;</span><span class=p>)</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span>_mint<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span>_initialSupply<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// The functions below are overrides required by Solidity</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>_afterTokenTransfer</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=nv>from</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>to</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=p>(</span>ERC20Votes<span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>super<span class=p>.</span>_afterTokenTransfer<span class=p>(</span>from<span class=p>,</span><span class=w> </span>to<span class=p>,</span><span class=w> </span>amount<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>_mint</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=nv>to</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=p>(</span>ERC20Votes<span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>super<span class=p>.</span>_mint<span class=p>(</span>to<span class=p>,</span><span class=w> </span>amount<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>_burn</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=nv>account</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>amount</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=p>(</span>ERC20Votes<span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>super<span class=p>.</span>_burn<span class=p>(</span>account<span class=p>,</span><span class=w> </span>amount<span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>This smart contract isn't very special since all it really does is add metadata in the constructor and mint preliminary tokens to the user. All of the overridden functions are only there because of Solidity rules, and they simply default to a parent contract's implementation. The only reason we didn't add the metadata to <code>OFTVotes</code> is because, in theory, that smart contract could be reused elsewhere. </p> <p>The <code>CrossChainDAOToken</code> smart contract is now ready for deployment on both spoke and hub chains. You can check its complete version in the <a href=https://github.com/jboetticher/cross-chain-dao/blob/main/contracts/CrossChainDAOToken.sol target=_blank>example repository</a>. </p> <h2 id=cross-chain-dao-contract>Writing the Cross-Chain DAO Contract<a class=headerlink href=#cross-chain-dao-contract title="Permanent link">&para;</a></h2> <p>Now to the meat of this tutorial: the cross-chain DAO. To be clear, not <em>all</em> of the cross-chain logic will be stored in the cross-chain DAO smart contract. Instead, we will separate the hub logic into one contract and the <a href=#dao-satellite-contract target=_blank>spoke chain logic into another</a>. This makes sense because of the hub-and-spoke model: some of the logic is stored on a single hub chain, while the spoke chains interface with it through a simpler satellite contract. We don't need logic meant to be on spoke chains to be on the hub chain.</p> <p>We can start off by creating the base for the cross-chain DAO and then edit it so that it becomes cross-chain. To do so, we'll be taking the following steps:</p> <ol> <li>Create the base contract using OpenZeppelin's contract wizard</li> <li>Add support for cross-chain messaging (through LayerZero in this specific example)</li> <li>Count votes from spoke chains</li> <li>Add a new collection phase between voting and execution <ul> <li>Requesting the collection of votes from spoke chains</li> <li>Receiving the collection of votes from spoke chains</li> </ul> </li> <li>Add functionality to let spoke chains know when there is a new proposal to vote on</li> <li>(Optional) Add ability to receive cross-chain messages to do non-voting action(s), like proposing or executing</li> </ol> <h3 id=starting-with-the-openzeppelin-contract-wizard>Starting with the OpenZeppelin Contract Wizard<a class=headerlink href=#starting-with-the-openzeppelin-contract-wizard title="Permanent link">&para;</a></h3> <p>A logical starting point for thinking about writing a cross-chain DAO is its predecessor: a single-chain DAO. There are many different implementations that exist, but since <a href=https://www.openzeppelin.com/contracts target=_blank>OpenZeppelin</a> hosts an already popular smart contract repository, we will use their Governance smart contracts. A second reason why we're using OpenZeppelin's smart contracts is because they're based off of Compound Finance's DAO, which we've already investigated in the <a href=#intuition-and-planning>previous section</a>. </p> <p>A good way to play with the configurations of the <code>Governor</code> smart contract is to use the OpenZeppelin smart contract wizard. By going to the <a href=https://www.openzeppelin.com/contracts target=_blank>OpenZeppelin contract page</a>, scrolling down, and clicking on the <strong>Governor</strong> tab, you can view the different ways that you can configure the <code>Governor</code> smart contract.</p> <p>We're going to generate as simple of a base smart contract as possible for demonstration purposes: </p> <ol> <li>Name the <code>Governor</code> contract <strong>CrossChainDAO</strong></li> <li>Set the <strong>Voting Delay</strong> to 0 for simplicity, which also makes it so that the voting weight snapshot is taken as soon as the proposal is made</li> <li>Set the <strong>Voting Period</strong> to something short, like 6 minutes</li> <li>For calculating quorum (the minimum amount of vote weight required for a vote to pass), set <strong>Quorum</strong> to the number (<strong>#</strong>) 1</li> <li>Disable <strong>Timelock</strong>, since the timelock period is optional anyways </li> </ol> <p><img alt="OpenZeppelin Contract Wizard" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-4.webp></p> <p>You should see a contract similar to this in the OpenZeppelin smart contract wizard:</p> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.9</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/Governor.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/extensions/GovernorSettings.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/extensions/GovernorCountingSimple.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/extensions/GovernorVotes.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>CrossChainDAO</span><span class=w> </span><span class=kt>is</span><span class=w> </span>Governor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>,</span><span class=w> </span>GovernorCountingSimple<span class=p>,</span><span class=w> </span>GovernorVotes<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span>IVotes<span class=w> </span>_token<span class=p>)</span>
<span class=w>        </span>Governor<span class=p>(</span><span class=s2>&quot;CrossChainDAO&quot;</span><span class=p>)</span>
<span class=w>        </span>GovernorSettings<span class=p>(</span><span class="m m-Decimal">0</span><span class=w> </span><span class=cm>/* 0 block */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">30</span><span class=w> </span><span class=cm>/* 6 minutes */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span>
<span class=w>        </span>GovernorVotes<span class=p>(</span>_token<span class=p>)</span>
<span class=w>    </span><span class=p>{}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>quorum</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>blockNumber</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>pure<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>return</span><span class=w> </span><span class=err>1</span>e18<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// The following functions are overrides required by Solidity.</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>votingDelay</span><span class=p>()</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>override<span class=p>(</span>IGovernor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>)</span><span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>return</span><span class=w> </span>super<span class=p>.</span>votingDelay<span class=p>();</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>votingPeriod</span><span class=p>()</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>override<span class=p>(</span>IGovernor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>)</span><span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>return</span><span class=w> </span>super<span class=p>.</span>votingPeriod<span class=p>();</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>proposalThreshold</span><span class=p>()</span><span class=w> </span><span class=kt>public</span><span class=w> </span>view<span class=w> </span>override<span class=p>(</span>Governor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>)</span><span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>return</span><span class=w> </span>super<span class=p>.</span>proposalThreshold<span class=p>();</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Let's take this <code>CrossChainDAO</code> smart contract and add it to our working directory as <code>CrossChainDAO.sol</code>. </p> <h3 id=adding-cross-chain-support>Adding Cross-Chain Support<a class=headerlink href=#adding-cross-chain-support title="Permanent link">&para;</a></h3> <p>Let's tackle our next task: supporting cross-chain messaging. For this implementation, we will use the <a href=https://github.com/LayerZero-Labs/solidity-examples/blob/main/contracts/lzApp/NonblockingLzApp.sol target=_blank><code>NonblockingLzApp</code> smart contract</a> provided by LayerZero to make it easy to receive and send cross-chain messages. Most cross-chain protocols will have some smart contract to inherit from to receive a generic bytes payload, so you can use similar logic with a different parent smart contract. </p> <p>To get started, we'll take the following steps:</p> <ol> <li>Import <code>NonblockingLzApp</code> and add it to the parent smart contracts of <code>CrossChainDAO</code></li> <li>Update the constructor as required by the <code>NonblockingLzApp</code> contract by passing in LayerZero's on-chain smart contract as an input</li> <li>Create a function that overrides the <code>_nonblockingLzReceive</code> function of the <code>NonblockingLzApp</code> contract that will be responsible for receiving cross-chain data</li> </ol> <div class=highlight><pre><span></span><code><span class=c1>// ...other imports go here</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@layerzerolabs/solidity-examples/contracts/lzApp/NonblockingLzApp.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>CrossChainDAO</span><span class=w> </span><span class=kt>is</span><span class=w> </span>Governor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>,</span><span class=w> </span>GovernorCountingSimple<span class=p>,</span><span class=w> </span>GovernorVotes<span class=p>,</span><span class=w> </span>NonblockingLzApp<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span>IVotes<span class=w> </span>_token<span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>lzEndpoint</span><span class=p>)</span>
<span class=w>        </span>Governor<span class=p>(</span><span class=s2>&quot;CrossChainDAO&quot;</span><span class=p>)</span>
<span class=w>        </span>GovernorSettings<span class=p>(</span><span class="m m-Decimal">0</span><span class=w> </span><span class=cm>/* 0 blocks */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">30</span><span class=w> </span><span class=cm>/* 6 minutes */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span>
<span class=w>        </span>GovernorVotes<span class=p>(</span>_token<span class=p>)</span>
<span class=w>        </span>NonblockingLzApp<span class=p>(</span>lzEndpoint<span class=p>)</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=p>}</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>_nonblockingLzReceive</span><span class=p>(</span><span class=w> </span><span class=kt>uint16</span><span class=w> </span><span class=nv>_srcChainId</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=p>,</span><span class=w> </span><span class=kt>uint64</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>_payload<span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// TODO: add cross-chain logic</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span><span class=w> </span>
</code></pre></div> <p>We will come back to fully implement the <code>_nonblockingLzReceive</code> function when implementing the collection phase. Just understand that it is the interface by which LayerZero's cross-chain protocol interacts with when there are incoming messages. </p> <h3 id=counting-votes-with-cross-chain-governor-counting-contract>Counting Votes with Cross-Chain Governor Counting Contract<a class=headerlink href=#counting-votes-with-cross-chain-governor-counting-contract title="Permanent link">&para;</a></h3> <p>We intend to receive cross-chain voting data via <code>_nonblockingLzReceive</code>, but that is pointless if it is not stored or counted. This logic and data will be housed in a parent contract of the <code>CrossChainDAO</code>. So let's implement this parent contract before beginning to write the <code>_nonblockinglzReceive</code> function. </p> <p>OpenZeppelin has divided many of the aspects of a DAO into multiple smart contracts, making it easier to replace sections of logic without having to change others. We don't have to go over all of the different smart contracts that came out of the OpenZeppelin smart contract wizard, but we do have to know what the <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/governance/extensions/GovernorCountingSimple.sol target=_blank><code>GovernorCountingSimple</code> contract</a> does. </p> <p>The <code>GovernorCountingSimple</code> contract defines how votes are counted and what votes are. It stores how many votes have been cast per proposal, what a vote can be (for, against, abstain), and it also controls whether or not quorum has been reached. </p> <p>Fortunately, when converting to a cross-chain version, a lot of the counting logic does not change. The only difference between our cross-chain variant and the single-chain variant is that the cross-chain variant must account for the collection phase and the votes that come with it. Let's add in some of that logic.</p> <p>Before we write any custom code ourselves, copy and paste the <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/governance/extensions/GovernorCountingSimple.sol target=_blank><code>GovernorCountingSimple</code> contract</a> into a new file named <code>CrossChainGovernorCountingSimple.sol</code>. You can get the contract from its repository or within the <code>node_modules</code> folder. </p> <p>Let's start making changes:</p> <ol> <li>Update the imported contract to use <code>@openzeppelin/contracts</code> instead of using a relative path</li> <li>Rename the contract to <code>CrossChainGovernorCountingSimple</code></li> <li>Add a constructor that will take in a <code>uint16[]</code> to define the spoke chains that the <code>CrossChainDAO</code> smart contract will connect with</li> <li>Add a struct and a corresponding map of them that will store the vote data received from other chains</li> </ol> <div class=highlight><pre><span></span><code><span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/Governor.sol&quot;</span>

abstract<span class=w> </span><span class=k>contract</span><span class=w> </span><span class=ni>CrossChainGovernorCountingSimple</span><span class=w> </span><span class=kt>is</span><span class=w> </span>Governor<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// ...</span>
<span class=w>    </span><span class=c1>// The lz-chain IDs that the DAO expects to receive data from during the </span>
<span class=w>    </span><span class=c1>// collection phase</span>
<span class=w>    </span><span class=kt>uint16</span><span class=p>[]</span><span class=w> </span><span class=kt>public</span><span class=w> </span>spokeChains<span class=p>;</span>

<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span><span class=kt>uint16</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>_spokeChains<span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>spokeChains<span class=w> </span><span class=o>=</span><span class=w> </span>_spokeChains<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>struct</span><span class=w> </span><span class=nv>SpokeProposalVote</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>forVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>againstVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>abstainVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>bool</span><span class=w> </span><span class=nv>initialized</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// Maps a proposal ID to a map of a chain ID to summarized spoke voting data</span>
<span class=w>    </span><span class=kt>mapping</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=kt>mapping</span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span>SpokeProposalVote<span class=p>))</span><span class=w> </span><span class=kt>public</span><span class=w> </span>spokeVotes<span class=p>;</span>
<span class=w>    </span><span class=c1>// ...</span>
<span class=p>}</span>
</code></pre></div> <div class="admonition challenge"> <p class=admonition-title>Challenge</p> <p>In a production-ready cross-chain DAO, you would make the spoke chains modifiable by governance instead of keeping it static. Can you add an additional function that would make this possible? Which address should have access to this function? </p> <p><em>Hint: replace the array with a mapping.</em></p> </div> <p>You might notice that the <code>SpokeProposalVote</code> is based off of the <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/dfcc1d16c5efd0fd2a7abac56680810c861a9cd3/contracts/governance/extensions/GovernorCountingSimple.sol#L23 target=_blank><code>ProposalVote</code> struct</a> in <code>GovernorCountingSimple</code>. The first difference is that the new struct includes a <code>bool</code> called <code>initialized</code> so that it's possible to check whether or not data was received from the spoke chain by retrieving the struct from the <code>spokeVotes</code> map. The second difference is that <code>SpokeProposalVote</code> does not include a map of users to votes because that information stays on the spoke chains and is not necessary for the calculations of whether or not a vote succeeded.</p> <div class="admonition challenge"> <p class=admonition-title>Challenge</p> <p>The new <code>SpokeProposalVote</code> struct is very similar to the <code>ProposalVote</code> struct. Can you think of a more optimal data structure for the smart contract that requires only one struct?</p> </div> <p>Now we have a place to store the cross-chain data, and we have a data structure to organize it with. We also want the cross-chain data to matter when calculating if a vote reached quorum and if a vote passed. By iterating through the stored cross-chain data from each of the spoke chains, the votes for each spoke chain are being added to the quorum and vote success calculations. To do so, you'll need to edit the <code>_quorumReached</code> and <code>_voteSucceeded</code> functions.</p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>_quorumReached</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>view<span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>ProposalVote<span class=w> </span>storage<span class=w> </span>proposalVote<span class=w> </span><span class=o>=</span><span class=w> </span>_proposalVotes<span class=p>[</span>proposalId<span class=p>];</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>abstainVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span>proposalVote<span class=p>.</span>abstainVotes<span class=p>;</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>forVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span>proposalVote<span class=p>.</span>forVotes<span class=p>;</span>

<span class=w>    </span><span class=kt>for</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span><span class=w> </span>i<span class=w> </span><span class=o>&lt;</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span><span class=w> </span>i<span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>SpokeProposalVote<span class=w> </span>storage<span class=w> </span>v<span class=w> </span><span class=o>=</span><span class=w> </span>spokeVotes<span class=p>[</span>proposalId<span class=p>][</span>spokeChains<span class=p>[</span>i<span class=p>]];</span>
<span class=w>        </span>abstainVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>v<span class=p>.</span>abstainVotes<span class=p>;</span>
<span class=w>        </span>forVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>v<span class=p>.</span>forVotes<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>return</span><span class=w> </span>quorum<span class=p>(</span>proposalSnapshot<span class=p>(</span>proposalId<span class=p>))</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span>forVotes<span class=w> </span><span class=o>+</span><span class=w> </span>abstainVotes<span class=p>;</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>_voteSucceeded</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>view<span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>ProposalVote<span class=w> </span>storage<span class=w> </span>proposalVote<span class=w> </span><span class=o>=</span><span class=w> </span>_proposalVotes<span class=p>[</span>proposalId<span class=p>];</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>againstVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span>proposalVote<span class=p>.</span>againstVotes<span class=p>;</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>forVotes</span><span class=w> </span><span class=o>=</span><span class=w> </span>proposalVote<span class=p>.</span>forVotes<span class=p>;</span>

<span class=w>    </span><span class=kt>for</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span><span class=w> </span>i<span class=w> </span><span class=o>&lt;</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span><span class=w> </span>i<span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>SpokeProposalVote<span class=w> </span>storage<span class=w> </span>v<span class=w> </span><span class=o>=</span><span class=w> </span>spokeVotes<span class=p>[</span>proposalId<span class=p>][</span>spokeChains<span class=p>[</span>i<span class=p>]];</span>
<span class=w>        </span>againstVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>v<span class=p>.</span>againstVotes<span class=p>;</span>
<span class=w>        </span>forVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>v<span class=p>.</span>forVotes<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span>forVotes<span class=w> </span><span class=o>&gt;</span><span class=w> </span>againstVotes<span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>That should be it for changes to how cross-chain votes are counted and stored. You can view the smart contract in its completed state in the <a href=https://github.com/jboetticher/cross-chain-dao/blob/main/contracts/CrossChainGovernorCountingSimple.sol target=_blank>GitHub repository</a>. </p> <p>Now, in the child contract <code>CrossChainDAO</code>, you can import the <code>CrossChainGovernorCountingSimple</code> contract and replace <code>GovernorCountingSimple</code> with it: </p> <div class=highlight><pre><span></span><code><span class=c1>// ...</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/extensions/GovernorSettings.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;./CrossChainGovernorCountingSimple.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/extensions/GovernorVotes.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>CrossChainDAO</span><span class=w> </span><span class=kt>is</span><span class=w> </span>Governor<span class=p>,</span><span class=w> </span>GovernorSettings<span class=p>,</span><span class=w> </span>CrossChainGovernorCountingSimple<span class=p>,</span><span class=w> </span>GovernorVotes<span class=p>,</span><span class=w> </span>NonblockingLzApp<span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span>IVotes<span class=w> </span>_token<span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>lzEndpoint</span><span class=p>)</span>
<span class=w>        </span>Governor<span class=p>(</span><span class=s2>&quot;CrossChainDAO&quot;</span><span class=p>)</span>
<span class=w>        </span>GovernorSettings<span class=p>(</span><span class="m m-Decimal">0</span><span class=w> </span><span class=cm>/* 0 blocks */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">30</span><span class=w> </span><span class=cm>/* 6 minutes */</span><span class=p>,</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span>
<span class=w>        </span>GovernorVotes<span class=p>(</span>_token<span class=p>)</span>
<span class=w>        </span>NonblockingLzApp<span class=p>(</span>lzEndpoint<span class=p>)</span>
<span class=w>        </span>CrossChainGovernorCountingSimple<span class=p>(</span>_spokeChains<span class=p>)</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=p>}</span>

<span class=w>    </span><span class=c1>// ...</span>
<span class=p>}</span>
</code></pre></div> <h3 id=implementing-a-collection-phase>Implementing a Collection Phase<a class=headerlink href=#implementing-a-collection-phase title="Permanent link">&para;</a></h3> <p>If you recall from the initial conception, a new collection phase should be added in between the voting period and the proposal's execution. During this phase: </p> <ol> <li>Execution must be postponed</li> <li>The hub chain must request voting data from the spoke chains</li> <li>The spoke chain must subsequently send the voting data</li> </ol> <h4 id=defining-the-collection-phase-and-preventing-execution>Defining the Collection Phase and Preventing Execution<a class=headerlink href=#defining-the-collection-phase-and-preventing-execution title="Permanent link">&para;</a></h4> <p>Let's tackle the first issue: ensuring that execution must be disabled during the collection phase. This will effectively define the collection phase from within the <code>CrossChainDAO</code> contract.</p> <p>We'll need to:</p> <ol> <li>Add two new mappings, <code>collectionStarted</code> and <code>collectionFinished</code>, which have been defined to track the collection status that we'll use in multiple functions throughout this section</li> <li>Add a function that overrides the <code>_beforeExecute</code> function of the OpenZeppelin <code>Governor</code> contract that checks whether or not the each of the spoke chains have sent in voting data before a proposal is executed (which is found by checking <code>initialized</code>)</li> <li>Add a function that marks a collection phase as <code>true</code> if all of the satellite chains have sent a cross-chain message back</li> </ol> <div class=highlight><pre><span></span><code><span class=kt>mapping</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>collectionStarted<span class=p>;</span>
<span class=kt>mapping</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>collectionFinished<span class=p>;</span>

<span class=kt>function</span><span class=w> </span><span class=nv>_beforeExecute</span><span class=p>(</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>,</span>
<span class=w>    </span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>targets<span class=p>,</span>
<span class=w>    </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>values<span class=p>,</span>
<span class=w>    </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>calldatas<span class=p>,</span>
<span class=w>    </span><span class=kt>bytes32</span><span class=w> </span><span class=nv>descriptionHash</span>
<span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=w> </span><span class=p>{</span>
<span class=w>    </span>finishCollectionPhase<span class=p>(</span>proposalId<span class=p>);</span>

<span class=w>    </span><span class=kt>require</span><span class=p>(</span>
<span class=w>        </span>collectionFinished<span class=p>[</span>proposalId<span class=p>],</span>
<span class=w>        </span><span class=s2>&quot;Collection phase for this proposal is unfinished!&quot;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span>super<span class=p>.</span>_beforeExecute<span class=p>(</span>proposalId<span class=p>,</span><span class=w> </span>targets<span class=p>,</span><span class=w> </span>values<span class=p>,</span><span class=w> </span>calldatas<span class=p>,</span><span class=w> </span>descriptionHash<span class=p>);</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>finishCollectionPhase</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>bool</span><span class=w> </span><span class=nv>phaseFinished</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>true</span><span class=p>;</span>
<span class=w>    </span><span class=kt>for</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span><span class=w> </span>i<span class=w> </span><span class=o>&lt;</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>phaseFinished<span class=p>;</span><span class=w> </span>i<span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>phaseFinished<span class=w> </span><span class=o>=</span>
<span class=w>            </span>phaseFinished<span class=w> </span><span class=o>&amp;&amp;</span>
<span class=w>            </span>spokeVotes<span class=p>[</span>proposalId<span class=p>][</span>spokeChains<span class=p>[</span>i<span class=p>]].</span>initialized<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span>collectionFinished<span class=p>[</span>proposalId<span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span>phaseFinished<span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>If you wanted, you could also add the collection phase within the <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4f4b6ab40315e2fbfc06e65d78f06c5b26d4646c/contracts/governance/IGovernor.sol#L15 target=_blank>IGovernor state machine</a>. This would require more effort than it would be worth and is more feasible for a cross-chain DAO written from scratch, so we will not be doing it in this tutorial. </p> <h4 id=requesting-votes-from-spoke-chains>Requesting Votes from Spoke Chains<a class=headerlink href=#requesting-votes-from-spoke-chains title="Permanent link">&para;</a></h4> <p>Moving on, let's figure out how to request voting data from spoke chains. We can start by making a new public trustless function to begin the collection phase, similar to the <code>execute</code> function: </p> <div class=highlight><pre><span></span><code><span class=c1>// Requests the voting data from all of the spoke chains</span>
<span class=kt>function</span><span class=w> </span><span class=nv>requestCollections</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span><span class=kt>payable</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>require</span><span class=p>(</span>
<span class=w>        </span><span class=k>block.number</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span>proposalDeadline<span class=p>(</span>proposalId<span class=p>),</span>
<span class=w>        </span><span class=s2>&quot;Cannot request for vote collection until after the vote period is over!&quot;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=kt>require</span><span class=p>(</span>
<span class=w>        </span><span class=o>!</span>collectionStarted<span class=p>[</span>proposalId<span class=p>],</span>
<span class=w>        </span><span class=s2>&quot;Collection phase for this proposal has already started!&quot;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span>collectionStarted<span class=p>[</span>proposalId<span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>true</span><span class=p>;</span>

<span class=w>    </span><span class=c1>// Sends an empty message to each of the aggregators. If they receive a </span>
<span class=w>    </span><span class=c1>// message at all, it is their cue to send data back</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>crossChainFee</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>msg.value</span><span class=w> </span><span class=o>/</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span>
<span class=w>    </span><span class=kt>for</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span><span class=w> </span>i<span class=w> </span><span class=o>&lt;</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span><span class=w> </span>i<span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Using &quot;1&quot; as the function selector</span>
<span class=w>        </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>payload<span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>encode<span class=p>(</span><span class="m m-Decimal">1</span><span class=p>,</span><span class=w> </span>abi<span class=p>.</span>encode<span class=p>(</span>proposalId<span class=p>));</span>
<span class=w>        </span>_lzSend<span class=p>({</span>
<span class=w>            </span>_dstChainId<span class=o>:</span><span class=w> </span>spokeChains<span class=p>[</span>i<span class=p>],</span>
<span class=w>            </span>_payload<span class=o>:</span><span class=w> </span>payload<span class=p>,</span>
<span class=w>            </span>_refundAddress<span class=o>:</span><span class=w> </span><span class=kt>payable</span><span class=p>(</span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>)),</span>
<span class=w>            </span>_zroPaymentAddress<span class=o>:</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=mh>0x0</span><span class=p>),</span>
<span class=w>            </span>_adapterParams<span class=o>:</span><span class=w> </span><span class=kt>bytes</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>),</span>
<span class=w>            </span>_nativeFee<span class=o>:</span><span class=w> </span>crossChainFee
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>This function allows any user to start the collection process for a specific <code>proposalId</code> as long as: </p> <ol> <li>The voting phase for the proposal has finished</li> <li>The collection phase has not yet started</li> </ol> <p>Recall that each spoke chain will have a <code>DAOSatellite</code> smart contract associated with it that can also receive and send cross-chain messages. This function sends a cross-chain message to every registered spoke chain's <code>DAOSatellite</code> during the collection phase. The message contains a function selector, <code>1</code>, and a proposal ID. The function selector is used to request voting data for the given proposal instead of some other action (we will revisit <a href=#receiving-votes-from-spoke-chains>this concept very soon</a>) from the destination <code>DAOSatellite</code> contract.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>By using LayerZero, multiple messages must be sent in a single transaction so that every spoke chain can receive data. LayerZero, along with other cross-chain protocols, <a href=https://layerzero.gitbook.io/docs/faq/messaging-properties#multicast target=_blank>is <strong>unicast</strong> instead of <strong>multicast</strong></a>. As in, a cross-chain message can only arrive to a single destination. When designing a hub-and-spoke architecture, research if your <a href=https://docs.wormhole.com/wormhole/explore-wormhole/core-contracts#multicast target=_blank>protocol supports multicast messaging</a>, as it may be more succinct.</p> </div> <p>This should be it for requesting data, since most of the logic afterwards will be hosted within the <a href=#dao-satellite-contract>DAO Satellite</a>. Just understand that when sending the proposal to the</p> <h4 id=receiving-votes-from-spoke-chains>Receiving Votes from Spoke Chains<a class=headerlink href=#receiving-votes-from-spoke-chains title="Permanent link">&para;</a></h4> <p>Recall that connected contracts that use LayerZero implement the <code>_nonblockingLzReceive</code> function to receive cross-chain messages. For incoming messages, we must be able to receive the voting data from other chains during the collection phase. Like good software developers, we want to maintain extensibility; we might also want to receive messages from other chains that do other actions, like execute or propose. But we only get one payload in one receiving function! How do we resolve this issue? </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>For sake of simplicity, we won't implement cross-chain execution or proposals in this tutorial. The function selector concept is being introduced because it is an important topic in cross-chain DApps. </p> </div> <p>Let's think about the EVM. How does a smart contract know that a transaction wants to call a specific function? Each function has a function selector, a hashed value that is mapped to a specific action. We can do the same thing, but with cross-chain messages and with integers instead of hashes. </p> <p>We'll update the <code>_nonblockingLzReceive</code> function as follows:</p> <ol> <li>Define the function selector as a <code>uint16</code> variable stored at the start of the bytes payload. From here on out, we will ensure in our design that <strong>every cross-chain message sent will have this <code>uint16</code> function selector at the start of its payload</strong>.</li> <li>Use assembly to load data at <code>payload's address + 32 bytes</code> into the <code>option</code> variable. Understanding why this is necessary requires a bit of understanding of how <code>abi.encode</code> works. The first 32 bytes of an ABI encoded payload are dedicated to information on the entire payload's size. After these first 32 bytes, the rest of the information is stored, which in this case is the function selector</li> <li>Based on the input of the <code>option</code> variable, perform some type of cross-chain action. For this example, the number <code>0</code> maps to the option to receive the voting data from the other chains. You could add additional functionality to the next number, <code>1</code>, such as proposing or executing</li> <li>If the <code>option</code> is <code>0</code>, we'll need to add functionality to receive the voting data. So, we'll call a function that will receive the voting data and pass in the <code>_srcChainId</code> and the newly unwrapped <code>payload</code> to this function. We'll create this function in the following steps</li> </ol> <p>Add the following code to the <code>_nonblockingLzReceive</code> function: </p> <div class=highlight><pre><span></span><code><span class=c1>// Gets a function selector option</span>
<span class=kt>uint16</span><span class=w> </span><span class=nv>option</span><span class=p>;</span>
assembly<span class=w> </span><span class=p>{</span>
<span class=w>    </span>option<span class=w> </span><span class=o>:=</span><span class=w> </span>mload<span class=p>(</span>add<span class=p>(</span>payload<span class=p>,</span><span class=w> </span><span class="m m-Decimal">32</span><span class=p>))</span>
<span class=p>}</span>

<span class=c1>// Some options for cross-chain actions are: propose, vote, vote with reason,</span>
<span class=c1>// vote with reason and params, cancel, etc.</span>
<span class=kt>if</span><span class=w> </span><span class=p>(</span>option<span class=w> </span><span class=o>==</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>onReceiveSpokeVotingData<span class=p>(</span>_srcChainId<span class=p>,</span><span class=w> </span>payload<span class=p>);</span>
<span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>option<span class=w> </span><span class=o>==</span><span class=w> </span><span class="m m-Decimal">1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// TODO: Feel free to put your own cross-chain actions (propose, execute, etc.)</span>
<span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// TODO: You could revert here if you wanted to</span>
<span class=p>}</span>
</code></pre></div> <p>When cross-chain messages are received (from any cross-chain protocol), they come with an arbitrary bytes payload. Typically, this bytes payload is created from an invocation of <code>abi.encode</code>, where multiple types of data are inserted. For the smart contract that receives this data, the data must be decoded with <code>abi.decode</code>, where information is decoded in a manner that is expected. For example, if the receiving smart contract's logic requires a <code>uint16</code> and an <code>address</code> to function properly, it will decode by including <code>abi.decode(payload, (uint16, address))</code>. </p> <p>When we have multiple functionalities packed into a message with a single payload, that payload might come in multiple formats, since different functions will require different bytes. Hence, we must examine the function selector before decoding the entire message. </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The <code>abi.encode</code> function is used the most because it has the most support for dynamic types, but you could feasibly use <code>abi.encodePacked</code> if your use case permits. Assembly-level logic would have to change if you chose to make this change.</p> </div> <p>We haven't written the <code>onReceiveSpokeVotingData</code> function yet. To do so, we'll take the following steps:</p> <ol> <li>Create the <code>onReceiveSpokeVotingData</code> function that accepts a <code>_srcChainId</code> and <code>payload</code></li> <li>Store the external voting data for future use. We have already defined what type of information we want from spoke chains in <a href=#counting-votes-with-cross-chain-governor-counting-contract target=_blank><code>CrossChainGovernorCountingSimple</code></a> via the <code>SpokeProposalVote</code> struct. We want three vote values: <code>forVotes</code>, <code>againstVotes</code>, and <code>abstainVotes</code>. Plus, we want to know for which proposal the data received is for, so we also want a proposal ID</li> </ol> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>onReceiveSpokeVotingData</span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>_srcChainId</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>payload<span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>virtual<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=p>(</span>
<span class=w>        </span><span class=p>,</span><span class=w> </span><span class=c1>// uint16 option</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>_proposalId</span><span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>_for</span><span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>_against</span><span class=p>,</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>_abstain</span>
<span class=w>    </span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>decode<span class=p>(</span>payload<span class=p>,</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>));</span>
<span class=p>}</span>
</code></pre></div> <p>We can now store the data within the <code>spokeVotes</code> map defined in <code>CrossChainGovernorCountingSimple</code>, so long as that data hasn't already been stored: </p> <div class=highlight><pre><span></span><code><span class=w>    </span><span class=c1>// As long as the received data isn&#39;t already initialized...</span>
<span class=w>    </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>spokeVotes<span class=p>[</span>_proposalId<span class=p>][</span>_srcChainId<span class=p>].</span>initialized<span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>revert<span class=p>(</span><span class=s2>&quot;Already initialized!&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Add it to the map (while setting initialized true)</span>
<span class=w>        </span>spokeVotes<span class=p>[</span>_proposalId<span class=p>][</span>_srcChainId<span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span>SpokeProposalVote<span class=p>(</span>
<span class=w>            </span>_for<span class=p>,</span>
<span class=w>            </span>_against<span class=p>,</span>
<span class=w>            </span>_abstain<span class=p>,</span>
<span class=w>            </span><span class=kt>true</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
</code></pre></div> <p>At this point, the collection phase has been finished! The collection phase stops the execution before all votes are counted, and a message is sent requesting voting data from spoke chains.</p> <h3 id=making-proposals-cross-chain>Making Proposals Cross-Chain<a class=headerlink href=#making-proposals-cross-chain title="Permanent link">&para;</a></h3> <p>OpenZeppelin's <code>Governor</code> smart contract came with a <code>propose</code> function, but unfortunately it doesn't work for our purposes. When a user sends a proposal, the smart contract needs to send cross-chain messages to let the spoke chains know that there is a new proposal to vote on. But the destination chains also need gas to complete the messages' journey. Most cross-chain protocols currently require extra gas paid in the origin chain's native currency for the destination chain's transaction, and that can only be sent via a payable function. The <code>propose</code> function is not payable, hence why we must write our own cross-chain version. </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Technically, the cross-chain messages should be sent when the voting delay is over to sync with when the voting weight snapshot is taken. In this instance, the proposal and snapshot are made at the same time.</p> </div> <p>We'll rename the original <code>propose</code> function included in the <code>Governor</code> smart contract to be <code>crossCahinPropose</code>. Then we'll modify it to send cross-chain messages with information on the proposal to every spoke chain, the IDs of which you may remember being stored in the <a href=#counting-votes-with-cross-chain-governor-counting-contract target=_blank><code>CrossChainGovernorCountingSimple</code> contract</a>:</p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>crossChainPropose</span><span class=p>(</span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>targets<span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>values<span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>calldatas<span class=p>,</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>description<span class=p>)</span><span class=w> </span>
<span class=w>    </span><span class=kt>public</span><span class=w> </span><span class=kt>payable</span><span class=w> </span>virtual<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=w> </span><span class=o>=</span><span class=w> </span>super<span class=p>.</span>propose<span class=p>(</span>targets<span class=p>,</span><span class=w> </span>values<span class=p>,</span><span class=w> </span>calldatas<span class=p>,</span><span class=w> </span>description<span class=p>);</span>

<span class=w>    </span><span class=c1>// Sends the proposal to all of the other chains</span>
<span class=w>    </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>spokeChains<span class=p>.</span>length<span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>crossChainFee</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>msg.value</span><span class=w> </span><span class=o>/</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span>

<span class=w>        </span><span class=c1>// Iterate over every spoke chain</span>
<span class=w>        </span><span class=kt>for</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span><span class=w> </span>i<span class=w> </span><span class=o>&lt;</span><span class=w> </span>spokeChains<span class=p>.</span>length<span class=p>;</span><span class=w> </span>i<span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>payload<span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>encode<span class=p>(</span>
<span class=w>                </span><span class="m m-Decimal">0</span><span class=p>,</span><span class=w> </span><span class=c1>// Function selector &quot;0&quot; for destination contract</span>
<span class=w>                </span>abi<span class=p>.</span>encode<span class=p>(</span>proposalId<span class=p>,</span><span class=w> </span><span class=k>block.timestamp</span><span class=p>)</span><span class=w> </span><span class=c1>// Encoding the proposal start</span>
<span class=w>            </span><span class=p>);</span>

<span class=w>            </span><span class=c1>// Send a cross-chain message with LayerZero to the chain in the iterator</span>
<span class=w>            </span>_lzSend<span class=p>({</span>
<span class=w>                </span>_dstChainId<span class=o>:</span><span class=w> </span>spokeChains<span class=p>[</span>i<span class=p>],</span>
<span class=w>                </span>_payload<span class=o>:</span><span class=w> </span>payload<span class=p>,</span>
<span class=w>                </span>_refundAddress<span class=o>:</span><span class=w> </span><span class=kt>payable</span><span class=p>(</span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>)),</span>
<span class=w>                </span>_zroPaymentAddress<span class=o>:</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=mh>0x0</span><span class=p>),</span>
<span class=w>                </span>_adapterParams<span class=o>:</span><span class=w> </span><span class=kt>bytes</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>),</span>
<span class=w>                </span>_nativeFee<span class=o>:</span><span class=w> </span>crossChainFee
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>return</span><span class=w> </span>proposalId<span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <p>Remember when we designed the <code>CrossChainDAO</code> smart contract's <code>_nonblockingLzReceive</code> function to expect a function selector? This is the same idea, except now we're expecting the satellite smart contract to also implement these features. So in this case, we've defined <code>0</code> as receiving a new proposal. We did the same thing when <a href=#requesting-votes-from-spoke-chains target=_blank>requesting voting information</a> from spoke chains. </p> <p>At this point, the <code>CrossChainDAO.sol</code> smart contract is finished! If you want to view the completed smart contract, it is available in its <a href=https://github.com/jboetticher/cross-chain-dao/blob/main/contracts/CrossChainDAO.sol target=_blank>GitHub repository</a>.</p> <h2 id=dao-satellite-contract>Writing the DAO Satellite Contract<a class=headerlink href=#dao-satellite-contract title="Permanent link">&para;</a></h2> <p>So far, we've only talked about the cross-chain DAO and its accompanying token. The cross-chain DAO is never deployed on the spoke chains because it wouldn't be efficient to replicate <em>all</em> of the data across each spoke chain. But, we still need an interface to work with the <code>CrossChainDAO</code> smart contract on the spoke chains. Hence, we will create a satellite contract named <code>DAOSatellite</code>.</p> <p>We'll take the following steps to create the new <code>DAOSatellite</code> contract:</p> <ol> <li>Add dependencies and inherit the <code>NonblockingLzApp</code> contract</li> <li>Add a constructor that defines what the hub chain is (every chain has its own ID in LayerZero and every other cross-chain protocol), the LayerZero endpoint, the cross-chain token that defines voting weight, and the average seconds per block on this weight (more on that later)</li> <li>Add some structs, and storage variables to use later. They're mainly stripped-down versions of what are found in the <code>CrossChainDAO</code> and its parent contracts</li> <li>Add a function to check if a given proposal ID is valid and open to voting</li> </ol> <div class=highlight><pre><span></span><code><span class=c1>// SPDX-License-Identifier: MIT</span>
<span class=k>pragma solidity</span><span class=w> </span><span class=o>^</span><span class=k>0.8.0</span><span class=p>;</span>

<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@layerzerolabs/solidity-examples/contracts/lzApp/NonblockingLzApp.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/utils/Timers.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/utils/Checkpoints.sol&quot;</span><span class=p>;</span>
<span class=kt>import</span><span class=w> </span><span class=s2>&quot;@openzeppelin/contracts/governance/utils/IVotes.sol&quot;</span><span class=p>;</span>

<span class=k>contract</span><span class=w> </span><span class=ni>DAOSatellite</span><span class=w> </span><span class=kt>is</span><span class=w> </span>NonblockingLzApp<span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>    </span><span class=kt>struct</span><span class=w> </span><span class=nv>ProposalVote</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>againstVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>forVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>abstainVotes</span><span class=p>;</span>
<span class=w>        </span><span class=kt>mapping</span><span class=p>(</span><span class=kt>address</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=kt>bool</span><span class=p>)</span><span class=w> </span>hasVoted<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>enum</span><span class=w> </span><span class=nv>VoteType</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>Against<span class=p>,</span>
<span class=w>        </span>For<span class=p>,</span>
<span class=w>        </span>Abstain
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>struct</span><span class=w> </span><span class=nv>RemoteProposal</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Blocks provided by the hub chain as to when the local votes should start/finish.</span>
<span class=w>        </span><span class=kt>uint256</span><span class=w> </span><span class=nv>localVoteStart</span><span class=p>;</span>
<span class=w>        </span><span class=kt>bool</span><span class=w> </span><span class=nv>voteFinished</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>constructor</span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>_hubChain</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>_endpoint</span><span class=p>,</span><span class=w> </span>IVotes<span class=w> </span>_token<span class=p>,</span><span class=w> </span><span class=kt>uint</span><span class=w> </span><span class=nv>_targetSecondsPerBlock</span><span class=p>)</span><span class=w> </span>
<span class=w>        </span>NonblockingLzApp<span class=p>(</span>_endpoint<span class=p>)</span><span class=w> </span><span class=kt>payable</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>hubChain<span class=w> </span><span class=o>=</span><span class=w> </span>_hubChain<span class=p>;</span>
<span class=w>        </span>token<span class=w> </span><span class=o>=</span><span class=w> </span>_token<span class=p>;</span>
<span class=w>        </span>targetSecondsPerBlock<span class=w> </span><span class=o>=</span><span class=w> </span>_targetSecondsPerBlock<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>uint16</span><span class=w> </span><span class=k>public </span><span class=nv>immutable</span><span class=w> </span>hubChain<span class=p>;</span>
<span class=w>    </span>IVotes<span class=w> </span><span class=kt>public</span><span class=w> </span>immutable<span class=w> </span>token<span class=p>;</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=k>public </span><span class=nv>immutable</span><span class=w> </span>targetSecondsPerBlock<span class=p>;</span>
<span class=w>    </span><span class=kt>mapping</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span>RemoteProposal<span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>proposals<span class=p>;</span>
<span class=w>    </span><span class=kt>mapping</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span>ProposalVote<span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>proposalVotes<span class=p>;</span>

<span class=w>    </span><span class=kt>function</span><span class=w> </span><span class=nv>isProposal</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>)</span><span class=w> </span>view<span class=w> </span><span class=kt>public</span><span class=w> </span><span class=kt>returns</span><span class=p>(</span><span class=kt>bool</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>return</span><span class=w> </span>proposals<span class=p>[</span>proposalId<span class=p>].</span>localVoteStart<span class=w> </span><span class=o>!=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Since this smart contract inherits from <code>NonblockingLzApp</code>, it requires <code>_nonblockingLzReceive</code> to receive cross-chain messages. This smart contract communicates with the <code>CrossChainDAO</code> smart contract, and recall that there are currently two instances in which the <code>CrossChainDAO</code> sends a message: </p> <ul> <li>When the <code>CrossChainDAO</code> wants to notify the spoke chains of a new proposal (function selector is <code>0</code>) </li> <li>When the <code>CrossChainDAO</code> wants the spoke chains to send their voting data to the hub chain (function selector is <code>1</code>) </li> </ul> <p>Keeping that in mind, let's start with writing the receiving function <code>_nonblockingLzReceive</code> with a function selector just like the <code>CrossChainDAO</code>: </p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>_nonblockingLzReceive</span><span class=p>(</span><span class=kt>uint16</span><span class=w> </span><span class=nv>_srcChainId</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=p>,</span><span class=w> </span><span class=kt>uint64</span><span class=p>,</span><span class=w> </span><span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>_payload<span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>override<span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>require</span><span class=p>(</span>_srcChainId<span class=w> </span><span class=o>==</span><span class=w> </span>hubChain<span class=p>,</span><span class=w> </span><span class=s2>&quot;Only messages from the hub chain can be received!&quot;</span><span class=p>);</span>

<span class=w>    </span><span class=kt>uint16</span><span class=w> </span><span class=nv>option</span><span class=p>;</span>
<span class=w>    </span>assembly<span class=w> </span><span class=p>{</span>
<span class=w>        </span>option<span class=w> </span><span class=o>:=</span><span class=w> </span>mload<span class=p>(</span>add<span class=p>(</span>_payload<span class=p>,</span><span class=w> </span><span class="m m-Decimal">32</span><span class=p>))</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>option<span class=w> </span><span class=o>==</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Begin a proposal on the local chain, with local block times</span>
<span class=w>     </span><span class=p>}</span>
<span class=w>    </span><span class=kt>else</span><span class=w> </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>option<span class=w> </span><span class=o>==</span><span class=w> </span><span class="m m-Decimal">1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Send vote results back to the hub chain</span>
<span class=w>     </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Let's tackle the first action, <code>if (option == 0)</code>, beginning a proposal on the local chain:</p> <ol> <li>Decode the payload, which includes a proposal ID and the timestamp of when the proposal was made as mentioned in the <a href=#making-proposals-cross-chain>CrossChainDAO section</a></li> <li>Perform some funky calculations to generate a <code>cutOffBlockEstimation</code> by subtracting blocks from the current block based on the timestamp and a predetermined seconds-per-block estimate</li> <li>Add a <code>RemoteProposal</code> struct to the proposals map, effectively registering the proposal and its voting-related data on the spoke chain</li> </ol> <div class=highlight><pre><span></span><code><span class=p>(,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalStart</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>decode<span class=p>(</span>_payload<span class=p>,</span><span class=w> </span><span class=p>(</span><span class=kt>uint16</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=p>));</span>
<span class=kt>require</span><span class=p>(</span><span class=o>!</span>isProposal<span class=p>(</span>proposalId<span class=p>),</span><span class=w> </span><span class=s2>&quot;Proposal ID must be unique.&quot;</span><span class=p>);</span>

<span class=kt>uint256</span><span class=w> </span><span class=nv>cutOffBlockEstimation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>;</span>
<span class=kt>if</span><span class=p>(</span>proposalStart<span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=k>block.timestamp</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>blockAdjustment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>block.timestamp</span><span class=w> </span><span class=o>-</span><span class=w> </span>proposalStart<span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span>targetSecondsPerBlock<span class=p>;</span>
<span class=w>    </span><span class=kt>if</span><span class=p>(</span>blockAdjustment<span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=k>block.number</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>cutOffBlockEstimation<span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>block.number</span><span class=w> </span><span class=o>-</span><span class=w> </span>blockAdjustment<span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=kt>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>cutOffBlockEstimation<span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>block.number</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>else</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span>cutOffBlockEstimation<span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>block.number</span><span class=p>;</span>
<span class=p>}</span>

proposals<span class=p>[</span>proposalId<span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span>RemoteProposal<span class=p>(</span>cutOffBlockEstimation<span class=p>,</span><span class=w> </span><span class=kt>false</span><span class=p>);</span>
</code></pre></div> <p>The calculations in the above snippet are not enough to ensure a correct setup. While it may not matter as much when people can start voting, it does matter when the vote weight snapshot is made. If the vote weight snapshot is made too far apart between the spoke and hub chains, a user could send a token from one chain to another and effectively double their voting weight. Some <a href=#double-weight-attack-from-snapshot-mismatch>example mitigation strategies</a> are listed below, but they are too complex to investigate in detail for this tutorial. In the meantime, the only strategy is to subtract blocks from the current block based on the timestamp and a predetermined seconds-per-block estimate. </p> <p>Now let's add logic to send vote results back to the hub chain:</p> <ol> <li>Retrieve the proposal ID from the cross-chain message</li> <li>Get the data for said proposal from the relevant map</li> <li>Encode that data into a payload as defined by the <code>CrossChainDAO</code></li> <li>Send that data through LayerZero</li> </ol> <div class=highlight><pre><span></span><code><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>decode<span class=p>(</span>_payload<span class=p>,</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>));</span>
ProposalVote<span class=w> </span>storage<span class=w> </span>votes<span class=w> </span><span class=o>=</span><span class=w> </span>proposalVotes<span class=p>[</span>proposalId<span class=p>];</span>
<span class=kt>bytes</span><span class=w> </span><span class=nv>memory</span><span class=w> </span>votingPayload<span class=w> </span><span class=o>=</span><span class=w> </span>abi<span class=p>.</span>encode<span class=p>(</span>
<span class=w>    </span><span class="m m-Decimal">0</span><span class=p>,</span><span class=w> </span>
<span class=w>    </span>abi<span class=p>.</span>encode<span class=p>(</span>proposalId<span class=p>,</span><span class=w> </span>votes<span class=p>.</span>forVotes<span class=p>,</span><span class=w> </span>votes<span class=p>.</span>againstVotes<span class=p>,</span><span class=w> </span>votes<span class=p>.</span>abstainVotes<span class=p>)</span>
<span class=p>);</span>
_lzSend<span class=p>({</span>
<span class=w>    </span>_dstChainId<span class=o>:</span><span class=w> </span>hubChain<span class=p>,</span>
<span class=w>    </span>_payload<span class=o>:</span><span class=w> </span>votingPayload<span class=p>,</span>
<span class=w>    </span>_refundAddress<span class=o>:</span><span class=w> </span><span class=kt>payable</span><span class=p>(</span><span class=kt>address</span><span class=p>(</span><span class=kt>this</span><span class=p>)),</span>
<span class=w>    </span>_zroPaymentAddress<span class=o>:</span><span class=w> </span><span class=kt>address</span><span class=p>(</span><span class=mh>0x0</span><span class=p>),</span>
<span class=w>    </span>_adapterParams<span class=o>:</span><span class=w> </span><span class=kt>bytes</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>),</span>
<span class=w>    </span><span class=c1>// NOTE: DAOSatellite needs to be funded beforehand, in the constructor.</span>
<span class=w>    </span><span class=c1>//       There are better solutions, such as cross-chain swaps being built in from the hub chain, but</span>
<span class=w>    </span><span class=c1>//       this is the easiest solution for demonstration purposes.</span>
<span class=w>    </span>_nativeFee<span class=o>:</span><span class=w> </span><span class="m m-Decimal">0</span><span class=p>.</span><span class="m m-Decimal">1</span><span class=w> </span>ether<span class=w> </span>
<span class=p>});</span>
proposals<span class=p>[</span>proposalId<span class=p>].</span>voteFinished<span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>true</span><span class=p>;</span>
</code></pre></div> <p>The only issue here is that the gas payment for the cross-chain message's transaction on the hub chain must be included, and there is no simple way to receive it. There are <a href=#chained-cross-chain-message-fees>options that could potentially avert this issue, as explained below</a>, but for simplicity's sake, the satellite contract will have to be sent native currency every once in a while. </p> <p>Finally, the last thing to add is a vote mechanism that allows users to vote. This mechanism is nearly exactly the same as the mechanism in the <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/governance/extensions/GovernorCountingSimple.sol target=_blank><code>GovernorCountingSimple</code> smart contract</a>, so much of the code can be copied over: </p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>castVote</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>,</span><span class=w> </span><span class=kt>uint8</span><span class=w> </span><span class=nv>support</span><span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>virtual<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>balance</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span>RemoteProposal<span class=w> </span>storage<span class=w> </span>proposal<span class=w> </span><span class=o>=</span><span class=w> </span>proposals<span class=p>[</span>proposalId<span class=p>];</span>
<span class=w>    </span><span class=kt>require</span><span class=p>(</span>
<span class=w>        </span><span class=o>!</span>proposal<span class=p>.</span>voteFinished<span class=p>,</span>
<span class=w>        </span><span class=s2>&quot;DAOSatellite: vote not currently active&quot;</span>
<span class=w>    </span><span class=p>);</span>
<span class=w>    </span><span class=kt>require</span><span class=p>(</span>
<span class=w>        </span>isProposal<span class=p>(</span>proposalId<span class=p>),</span><span class=w> </span>
<span class=w>        </span><span class=s2>&quot;DAOSatellite: not a started vote&quot;</span>
<span class=w>    </span><span class=p>);</span>

<span class=w>    </span><span class=kt>uint256</span><span class=w> </span><span class=nv>weight</span><span class=w> </span><span class=o>=</span><span class=w> </span>token<span class=p>.</span>getPastVotes<span class=p>(</span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span>proposal<span class=p>.</span>localVoteStart<span class=p>);</span>
<span class=w>    </span>_countVote<span class=p>(</span>proposalId<span class=p>,</span><span class=w> </span><span class=k>msg.sender</span><span class=p>,</span><span class=w> </span>support<span class=p>,</span><span class=w> </span>weight<span class=p>);</span>

<span class=w>    </span><span class=kt>return</span><span class=w> </span>weight<span class=p>;</span>
<span class=p>}</span>

<span class=kt>function</span><span class=w> </span><span class=nv>_countVote</span><span class=p>(</span><span class=kt>uint256</span><span class=w> </span><span class=nv>proposalId</span><span class=p>,</span><span class=w> </span><span class=kt>address</span><span class=w> </span><span class=nv>account</span><span class=p>,</span><span class=w> </span><span class=kt>uint8</span><span class=w> </span><span class=nv>support</span><span class=p>,</span><span class=w> </span><span class=kt>uint256</span><span class=w> </span><span class=nv>weight</span><span class=p>)</span><span class=w> </span><span class=kt>internal</span><span class=w> </span>virtual<span class=w> </span>
<span class=p>{</span>
<span class=w>    </span>ProposalVote<span class=w> </span>storage<span class=w> </span>proposalVote<span class=w> </span><span class=o>=</span><span class=w> </span>proposalVotes<span class=p>[</span>proposalId<span class=p>];</span>

<span class=w>    </span><span class=kt>require</span><span class=p>(</span><span class=o>!</span>proposalVote<span class=p>.</span>hasVoted<span class=p>[</span>account<span class=p>],</span><span class=w> </span><span class=s2>&quot;DAOSatellite: vote already cast&quot;</span><span class=p>);</span>
<span class=w>    </span>proposalVote<span class=p>.</span>hasVoted<span class=p>[</span>account<span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kt>true</span><span class=p>;</span>

<span class=w>    </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>support<span class=w> </span><span class=o>==</span><span class=w> </span><span class=kt>uint8</span><span class=p>(</span>VoteType<span class=p>.</span>Against<span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>proposalVote<span class=p>.</span>againstVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>weight<span class=p>;</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>support<span class=w> </span><span class=o>==</span><span class=w> </span><span class=kt>uint8</span><span class=p>(</span>VoteType<span class=p>.</span>For<span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>proposalVote<span class=p>.</span>forVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>weight<span class=p>;</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=kt>if</span><span class=w> </span><span class=p>(</span>support<span class=w> </span><span class=o>==</span><span class=w> </span><span class=kt>uint8</span><span class=p>(</span>VoteType<span class=p>.</span>Abstain<span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>proposalVote<span class=p>.</span>abstainVotes<span class=w> </span><span class=o>+=</span><span class=w> </span>weight<span class=p>;</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=kt>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span>revert<span class=p>(</span><span class=s2>&quot;DAOSatellite: invalid value for enum VoteType&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Note that the <code>castVote</code> function requires that: </p> <ul> <li>The proposal isn't finished</li> <li>The proposal exists, as in, there is data that's stored within the <code>proposals</code> map.</li> </ul> <p>In fact, the <code>_countVote</code> function is <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4fb6833e325658946c2185862b8e57e32f3683bc/contracts/governance/extensions/GovernorCountingSimple.sol#L78 target=_blank>directly copied</a> from the hub chain! Much of the logic of single-chain dApps can be reused in cross-chain dApps with minor tweaks. </p> <p>That's it for breaking down the satellite contract. It was more or less simple because most of the logic is just a reflection of what happens on the hub chain. You can view the completed smart contract in its <a href=https://github.com/jboetticher/cross-chain-dao/blob/main/contracts/DAOSatellite.sol target=_blank>GitHub repository</a>. </p> <p>At this point, every single smart contract has been finished, and a deployment scheme like the one below can be made. If you are interested in seeing this in action, the <a href=https://github.com/jboetticher/cross-chain-dao target=_blank>GitHub repository</a> that hosts the cross-chain DAO allows you to deploy on TestNets. </p> <p><img alt="Smart contracts overview" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-3.webp> </p> <p>As a reminder, <strong>this tutorial's smart contracts are not tested or recommended for production use</strong>.</p> <h2 id=caveats-and-other-designs>Caveats and Other Designs<a class=headerlink href=#caveats-and-other-designs title="Permanent link">&para;</a></h2> <p>Every single part of the smart contract system has been written, and if you got through it all, good job! It's a lot to soak in, and there are still parts that need to be developed for it to be production-ready.</p> <p>The design of this cross-chain DAO was created off of OpenZeppelin's Governor base, but that doesn't mean that it's flawless. It's good to work off of preexisting smart contracts for a version 1 cross-chain DApp, but as you get closer to production-ready code, it's best to start from scratch and leave only the parts that are still relevant to the design. Working off of logic that's meant for single-chain can get in the way several times, which you will find a common occurrence when working with cross-chain smart contracts. </p> <p>For example, the <code>propose</code> function from the <code>Governor</code> smart contract couldn't be used and had to be replaced with a new cross-chain function. It would be best to completely remove the <code>propose</code> function, but that can't be done because of the way the <code>Governor</code> smart contract was designed. This is an obvious issue, and it goes to show that while it's good to prototype cross-chain DApps using preexisting smart contracts, it can be better to completely rewrite them while still reusing some logic. </p> <div class="admonition challenge"> <p class=admonition-title>Challenge</p> <p>Can you rewrite the <code>CrossChainDAO</code> smart contract to only include the logic and functions necessary for cross-chain interactions? While you're at it, can you implement any of the alternate designs suggested below?</p> </div> <h3 id=division-of-the-cross-chain-selector-into-multiple-contracts>Division of the Cross-Chain Selector Into Multiple Contracts<a class=headerlink href=#division-of-the-cross-chain-selector-into-multiple-contracts title="Permanent link">&para;</a></h3> <p>The cross-chain function selection method that was used in the <code>CrossChainDAO</code> and <code>DAOSatellite</code> smart contracts works fine enough. But instead of having a selector within a single smart contract, you could have cross-chain messages directed at multiple smart contracts that have special permissions within the <code>CrossChainDAO</code>. You may find this helpful in case you believe in single responsibility (SRP) for smart contracts. </p> <p>For example, the hub chain's <code>CrossChainDAO</code> could be composed of the main contract that receives cross-chain data as well as two other smart contracts: <code>CrossChainExecutor</code> and <code>CrossChainProposer</code>. So, when interacting with the <code>DAOSatellite</code> contract to send a message to <code>CrossChainDAO</code>, the spoke chain's smart contract could target <code>CrossChainExecutor</code> to execute or <code>CrossChainProposer</code> to propose. This would remove the need to double-wrap payloads and the need to include function-selecting logic in the cross-chain message receiving function. It could even help convert a single-chain DAO into one with cross-chain abilities. </p> <p><img alt="Single Responsibility Principle" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-5.webp> </p> <h3 id=distributed-proposal-and-execution>Distributed Proposal and Execution<a class=headerlink href=#distributed-proposal-and-execution title="Permanent link">&para;</a></h3> <p>What if you wanted users to be able to execute a proposal on multiple chains instead of just the hub chain? There are a few ways to go about it: </p> <ul> <li>Stick with a hub-and-spoke model</li> <li>Completely decentralize </li> </ul> <p>The hub-and-spoke model is already laid out in detail in this tutorial. In such a case where an execution could occur on multiple chains, you would have to have a smart contract on each chain that executes on behalf of the hub chain (which could be added to <code>DAOSatellite</code>). This smart contract would receive a message from the <code>execute</code> function provided by the <code>Governor</code> smart contract. This is simple enough, but it might be too many cross-chain messages to be efficient. </p> <p>If you decide to completely decentralize the DAO, it would be most likely to remove the <code>DAOSatellite</code> smart contract and deploy a modified <code>CrossChainDAO</code> smart contract on every chain. Each <code>CrossChainDAO</code> could control the proposals meant to be executed on its chain. It would require a redesign of how proposals are made and sent, however. </p> <p>You may also find an issue when generating the proposal ID. Take a look at how the IDs are being generated now: </p> <div class=highlight><pre><span></span><code><span class=kt>function</span><span class=w> </span><span class=nv>hashProposal</span><span class=p>(</span>
<span class=w>    </span><span class=kt>address</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>targets<span class=p>,</span>
<span class=w>    </span><span class=kt>uint256</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>values<span class=p>,</span>
<span class=w>    </span><span class=kt>bytes</span><span class=p>[]</span><span class=w> </span><span class=kt>memory</span><span class=w> </span>calldatas<span class=p>,</span>
<span class=w>    </span><span class=kt>bytes32</span><span class=w> </span><span class=nv>descriptionHash</span>
<span class=p>)</span><span class=w> </span><span class=kt>public</span><span class=w> </span>pure<span class=w> </span>virtual<span class=w> </span>override<span class=w> </span><span class=kt>returns</span><span class=w> </span><span class=p>(</span><span class=kt>uint256</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>return</span><span class=w> </span><span class=kt>uint256</span><span class=p>(</span><span class=nb>keccak256</span><span class=p>(</span>abi<span class=p>.</span>encode<span class=p>(</span>targets<span class=p>,</span><span class=w> </span>values<span class=p>,</span><span class=w> </span>calldatas<span class=p>,</span><span class=w> </span>descriptionHash<span class=p>)));</span>
<span class=p>}</span>
</code></pre></div> <p>Conceivably, the same description and transaction details could be sent on both chain A and on chain B. This could cause errors because then there would be conflicting transactions. It may serve best to include another parameter to hash a proposal ID: the chain ID of the chain on which the proposal is meant to execute.</p> <h3 id=double-weight-attack-from-snapshot-mismatch>Double-Weight Attack from Snapshot Mismatch<a class=headerlink href=#double-weight-attack-from-snapshot-mismatch title="Permanent link">&para;</a></h3> <p>One primary issue with the distribution of voting weight across chains via the <code>CrossChainDAOToken</code> is that blocks are not properly aligned across networks. This can cause a situation where the vote snapshots between multiple chains are not close together enough, resulting in a situation where voting weight is doubled when a cross-chain transfer of the DAO token front-runs a new proposal's voting weight snapshot.</p> <p>One option is using an oracle that aligns blocks with timestamps to ensure that snapshots on spoke chains are as close to the hub chain's timestamp as possible.</p> <p>A more simple solution would be to alter the <code>ERC20Votes</code> smart contract to depend on timestamps instead of blocks, but this could still be open to attacks in case the block producers on two chains collude. </p> <p>Alternatively, you could alter the <code>OFTVotes</code> smart contract to postpone the addition of voting weight until a few blocks after the weight is received.</p> <h3 chained-cross-chain-message-fees=chained-cross-chain-message-fees id=chained-cross-chain-message-fees>Chained Cross-Chain Message Fees<a class=headerlink href=#chained-cross-chain-message-fees title="Permanent link">&para;</a></h3> <p>One of the flaws overlooked with the spoke chain's <code>DAOSatellite</code> smart contract is that whenever voting data is requested from the hub chain, the destination chain fees must be stored in the smart contract beforehand. Here are two plausible solutions to this: </p> <ul> <li>Storing the request for data, and allowing anyone to trustlessly send the data back</li> <li>Sending the gas from the hub chain with the cross-chain message that requests the data</li> </ul> <p>The first is the simplest solution, though it may increase the turn-around time from proposal to execution if you don't plan on running additional infrastructure. Similar to how the <code>execute</code> function can be run by anyone once a proposal has been finished, a new function would be written to allow anyone to send the vote data to the hub chain. Preferably, this would also require a <a href=#collection-phase-time-out>timeout for the collection phase</a>. </p> <p><img alt="Chained Execution" src=/images/tutorials/interoperability/cross-chain-dao/cross-chain-dao-6.webp> </p> <p>The second is significantly more complex. It would require a setup that sends tokens with a payload instead of just a payload like the current contract does, and for a swap to occur on the destination chain to retrieve native currency for a cross-chain transaction. </p> <h3 collection-phase-time-out=collection-phase-time-out id=collection-phase-time-out>Collection Phase Time Out<a class=headerlink href=#collection-phase-time-out title="Permanent link">&para;</a></h3> <p>In case you want to be safe and you believe that a spoke chain might stall or even stop being supported, you would want to include a way to cap the amount of time that the collection phase takes and also add a way for your DAO's governance to add and remove spoke chains. </p> <p>For example, the hub chain would wait 30 blocks before disregarding voting data from spoke chains. And if the DAO's participants believe that chain A should be removed from future voting, they could start a proposal to do so, similar to OpenZeppelin's <code>GovernorSettings</code> contract. </p> <div class=page-disclaimer> This tutorial is for educational purposes only. As such, any contracts or code created in this tutorial should not be used in production. </div> <div class=page-disclaimer> The information presented herein has been provided by third parties and is made available solely for general information purposes. Moonbeam does not endorse any project listed and described on the Moonbeam Doc Website (https://docs.moonbeam.network/). Moonbeam Foundation does not warrant the accuracy, completeness or usefulness of this information. Any reliance you place on such information is strictly at your own risk. Moonbeam Foundation disclaims all liability and responsibility arising from any reliance placed on this information by you or by anyone who may be informed of any of its contents. All statements and/or opinions expressed in these materials are solely the responsibility of the person or entity providing those materials and do not necessarily represent the opinion of Moonbeam Foundation. The information should not be construed as professional or financial advice of any kind. Advice from a suitably qualified professional should always be sought in relation to any particular matter or circumstance. The information herein may link to or integrate with other websites operated or content provided by third parties, and such other websites may link to this website. Moonbeam Foundation has no control over any such other websites or their content and will have no liability arising out of or related to such websites or their content. The existence of any such link does not constitute an endorsement of such websites, the content of the websites, or the operators of the websites. These links are being provided to you only as a convenience and you release and hold Moonbeam Foundation harmless from any and all liability arising from your use of this information or the information provided by any third-party website or service. </div> <div class=md-source-file> <small> <span class=source-file-label>Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 6, 2025</span> <br> <span class=source-file-seperator>|</span> <span class=source-file-label>Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 6, 2025</span> </small> <!-- Was this page helpful? --> <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine feedback configuration --> <!-- Determine whether to show feedback --> <!-- Was this page helpful? --> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <!-- Feedback ratings --> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> True <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2M1 21h4V9H1v12Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> False <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2Z"/></svg> </button> </div> <!-- Feedback rating notes (shown after submission) --> <div class=md-feedback__note> <div data-md-value=1 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! </div> <div data-md-value=0 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Build%20a%20Cross-Chain%20DAO%20with%20OpenZeppelin%27s%20Governor+-+/tutorials/interoperability/cross-chain-dao/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> </form> </div> <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine feedback configuration --> <!-- Determine whether to show feedback --> <!-- Was this page helpful? --> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <!-- Feedback ratings --> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> True <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32 0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2M1 21h4V9H1v12Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> False <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31 0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2Z"/></svg> </button> </div> <!-- Feedback rating notes (shown after submission) --> <div class=md-feedback__note> <div data-md-value=1 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! </div> <div data-md-value=0 hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/moonbeam-foundation/moonbeam-docs/issues/new/?title=[Feedback]+Build%20a%20Cross-Chain%20DAO%20with%20OpenZeppelin%27s%20Governor+-+/tutorials/interoperability/cross-chain-dao/" target=_blank rel=noopener>additional feedback</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../protocols.index/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0c16.967,0,32.327,6.877,43.446,17.996c11.119,11.119,17.996,26.479,17.996,43.445 c0,16.966-6.877,32.326-17.996,43.445c-11.119,11.118-26.479,17.995-43.446,17.995c-16.966,0-32.326-6.877-43.445-17.995 C6.877,93.768,0,78.407,0,61.441c0-16.967,6.877-32.327,17.996-43.445C29.115,6.877,44.475,0,61.441,0L61.441,0z M71.377,42.166 c1.736-1.784,1.695-4.637-0.088-6.372s-4.637-1.696-6.373,0.088L43.078,58.402l3.23,3.142l-3.244-3.146 c-1.737,1.792-1.693,4.652,0.099,6.39c0.052,0.05,0.104,0.099,0.158,0.146l21.595,22.082c1.736,1.784,4.59,1.823,6.373,0.088 c1.783-1.734,1.824-4.588,0.088-6.372L52.598,61.531L71.377,42.166L71.377,42.166z M98.496,24.386 C89.014,14.903,75.912,9.038,61.441,9.038s-27.572,5.865-37.055,15.348C14.903,33.869,9.038,46.97,9.038,61.441 c0,14.471,5.865,27.572,15.349,37.055c9.482,9.483,22.583,15.349,37.055,15.349s27.573-5.865,37.055-15.349 c9.484-9.482,15.35-22.584,15.35-37.055C113.846,46.97,107.98,33.869,98.496,24.386L98.496,24.386z"/></g></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <span class=md-footer__page-name> Create Connected Contracts </span> </div> </a> <a href=../using-axelar-sdk/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <span class=md-footer__page-name> [Axelar] Minting a Cross-Chain NFT </span> </div> <div class="md-footer__button md-icon"> <svg version=1.1 id=Layer_1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=122.883px height=122.882px viewbox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space=preserve><g><path d="M61.441,0C44.475,0,29.115,6.877,17.996,17.996C6.877,29.115,0,44.475,0,61.441c0,16.966,6.877,32.326,17.996,43.445 c11.119,11.118,26.479,17.995,43.445,17.995c16.967,0,32.327-6.877,43.446-17.995c11.119-11.119,17.996-26.479,17.996-43.445 c0-16.967-6.877-32.327-17.996-43.445C93.768,6.877,78.408,0,61.441,0L61.441,0z M51.505,42.166 c-1.735-1.784-1.696-4.637,0.088-6.372c1.784-1.735,4.637-1.696,6.373,0.088l21.839,22.521l-3.23,3.142l3.244-3.146 c1.738,1.792,1.693,4.652-0.098,6.39c-0.053,0.05-0.105,0.099-0.158,0.146L57.966,87.017c-1.735,1.784-4.588,1.823-6.373,0.088 c-1.784-1.734-1.823-4.588-0.088-6.372l18.78-19.201L51.505,42.166L51.505,42.166z M24.386,24.386 C33.869,14.903,46.97,9.038,61.441,9.038c14.471,0,27.573,5.865,37.055,15.348c9.484,9.483,15.35,22.584,15.35,37.056 c0,14.471-5.865,27.572-15.35,37.055c-9.482,9.483-22.584,15.349-37.055,15.349c-14.471,0-27.572-5.865-37.055-15.349 C14.903,89.014,9.038,75.912,9.038,61.441C9.038,46.97,14.903,33.869,24.386,24.386L24.386,24.386z"/></g></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="column newsletter"> <label class=newsletter-label>Join our newsletter</label> <form class=md-footer-newsletter> <!-- These script tags are for the newsletter signup and must be here --> <script charset=utf-8 type=text/javascript src=//js.hsforms.net/forms/v2.js></script> <script>
            hbspt.forms.create({
              region: "na1",
              portalId: "6074164",
              formId: "e5b4a7bd-1d01-479a-ac4a-da1b38bb1acb"
            });
            </script> </form> </div> <div class=md-social> <a href=https://discord.gg/PfpUATX target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://t.me/Moonbeam_Official target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://twitter.com/MoonbeamNetwork target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://www.youtube.com/c/MoonbeamNetwork target=_blank rel=noopener title=YouTube class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> <a href=https://github.com/moonbeam-foundation/moonbeam target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> © 2024 Moonbeam Foundation. All Rights Reserved. </div> <div class=papermoon> <span>Made with 🩵 by <a href=https://papermoon.io/ target=_blank>PaperMoon</a></span> </div> <div class=policy-links> <a href=https://moonbeam.network/terms-of-use target=_blank>Terms of use</a> <a href=https://moonbeam.network/privacy-policy target=_blank>Privacy policy</a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "navigation.prune", "content.code.copy", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.081f42fc.min.js></script> <script src=../../../js/connectMetaMask.min.js></script> <script src=../../../js/errorModal.min.js></script> <script src=../../../js/networkModal.min.js></script> <script src=../../../js/handleLanguageChange.min.js></script> <script src=../../../js/fixCreatedDate.min.js></script> <script src=../../../js/externalLinkModal.min.js></script> </body> </html>